(function(){"use strict";/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yt=Symbol("Comlink.proxy"),Xt=Symbol("Comlink.endpoint"),Yt=Symbol("Comlink.releaseProxy"),ot=Symbol("Comlink.finalizer"),Ke=Symbol("Comlink.thrown"),qt=L=>typeof L=="object"&&L!==null||typeof L=="function",Zt={canHandle:L=>qt(L)&&L[yt],serialize(L){const{port1:K,port2:re}=new MessageChannel;return lt(L,K),[re,[re]]},deserialize(L){return L.start(),rn(L)}},en={canHandle:L=>qt(L)&&Ke in L,serialize({value:L}){let K;return L instanceof Error?K={isError:!0,value:{message:L.message,name:L.name,stack:L.stack}}:K={isError:!1,value:L},[K,[]]},deserialize(L){throw L.isError?Object.assign(new Error(L.value.message),L.value):L.value}},bt=new Map([["proxy",Zt],["throw",en]]);function tn(L,K){for(const re of L)if(K===re||re==="*"||re instanceof RegExp&&re.test(K))return!0;return!1}function lt(L,K=globalThis,re=["*"]){K.addEventListener("message",function t(ce){if(!ce||!ce.data)return;if(!tn(re,ce.origin)){console.warn(`Invalid origin '${ce.origin}' for comlink proxy`);return}const{id:ge,type:fe,path:xe}=Object.assign({path:[]},ce.data),Ie=(ce.data.argumentList||[]).map(Re);let we;try{const Ee=xe.slice(0,-1).reduce((de,Me)=>de[Me],L),Se=xe.reduce((de,Me)=>de[Me],L);switch(fe){case"GET":we=Se;break;case"SET":Ee[xe.slice(-1)[0]]=Re(ce.data.value),we=!0;break;case"APPLY":we=Se.apply(Ee,Ie);break;case"CONSTRUCT":{const de=new Se(...Ie);we=cn(de)}break;case"ENDPOINT":{const{port1:de,port2:Me}=new MessageChannel;lt(L,Me),we=an(de,[de])}break;case"RELEASE":we=void 0;break;default:return}}catch(Ee){we={value:Ee,[Ke]:0}}Promise.resolve(we).catch(Ee=>({value:Ee,[Ke]:0})).then(Ee=>{const[Se,de]=Ze(Ee);K.postMessage(Object.assign(Object.assign({},Se),{id:ge}),de),fe==="RELEASE"&&(K.removeEventListener("message",t),wt(K),ot in L&&typeof L[ot]=="function"&&L[ot]())}).catch(Ee=>{const[Se,de]=Ze({value:new TypeError("Unserializable return value"),[Ke]:0});K.postMessage(Object.assign(Object.assign({},Se),{id:ge}),de)})}),K.start&&K.start()}function nn(L){return L.constructor.name==="MessagePort"}function wt(L){nn(L)&&L.close()}function rn(L,K){return at(L,[],K)}function Je(L){if(L)throw new Error("Proxy has been released and is not useable")}function Et(L){return Be(L,{type:"RELEASE"}).then(()=>{wt(L)})}const Xe=new WeakMap,Ye="FinalizationRegistry"in globalThis&&new FinalizationRegistry(L=>{const K=(Xe.get(L)||0)-1;Xe.set(L,K),K===0&&Et(L)});function sn(L,K){const re=(Xe.get(K)||0)+1;Xe.set(K,re),Ye&&Ye.register(L,K,L)}function on(L){Ye&&Ye.unregister(L)}function at(L,K=[],re=function(){}){let t=!1;const ce=new Proxy(re,{get(ge,fe){if(Je(t),fe===Yt)return()=>{on(ce),Et(L),t=!0};if(fe==="then"){if(K.length===0)return{then:()=>ce};const xe=Be(L,{type:"GET",path:K.map(Ie=>Ie.toString())}).then(Re);return xe.then.bind(xe)}return at(L,[...K,fe])},set(ge,fe,xe){Je(t);const[Ie,we]=Ze(xe);return Be(L,{type:"SET",path:[...K,fe].map(Ee=>Ee.toString()),value:Ie},we).then(Re)},apply(ge,fe,xe){Je(t);const Ie=K[K.length-1];if(Ie===Xt)return Be(L,{type:"ENDPOINT"}).then(Re);if(Ie==="bind")return at(L,K.slice(0,-1));const[we,Ee]=vt(xe);return Be(L,{type:"APPLY",path:K.map(Se=>Se.toString()),argumentList:we},Ee).then(Re)},construct(ge,fe){Je(t);const[xe,Ie]=vt(fe);return Be(L,{type:"CONSTRUCT",path:K.map(we=>we.toString()),argumentList:xe},Ie).then(Re)}});return sn(ce,L),ce}function ln(L){return Array.prototype.concat.apply([],L)}function vt(L){const K=L.map(Ze);return[K.map(re=>re[0]),ln(K.map(re=>re[1]))]}const xt=new WeakMap;function an(L,K){return xt.set(L,K),L}function cn(L){return Object.assign(L,{[yt]:!0})}function Ze(L){for(const[K,re]of bt)if(re.canHandle(L)){const[t,ce]=re.serialize(L);return[{type:"HANDLER",name:K,value:t},ce]}return[{type:"RAW",value:L},xt.get(L)||[]]}function Re(L){switch(L.type){case"HANDLER":return bt.get(L.name).deserialize(L.value);case"RAW":return L.value}}function Be(L,K,re){return new Promise(t=>{const ce=un();L.addEventListener("message",function ge(fe){!fe.data||!fe.data.id||fe.data.id!==ce||(L.removeEventListener("message",ge),t(fe.data))}),L.start&&L.start(),L.postMessage(Object.assign({id:ce},K),re)})}function un(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}var ct=(()=>{var L=self.location.href;return function(K){var re=K||{},t=typeof re<"u"?re:{},ce,ge;t.ready=new Promise(function(n,e){ce=n,ge=e});const fe=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,fe.debugModule("globalThis.location =",globalThis.location);const xe="emscripten-bug-17951";t[xe]=function n(e,s){e.env.foo=function(){};const r=t.locateFile(n.uri,typeof de>"u"?"":de);fe.debugModule("instantiateWasm() uri =",r);const i=()=>fetch(r,{credentials:"same-origin"});return(WebAssembly.instantiateStreaming?async()=>WebAssembly.instantiateStreaming(i(),e).then(d=>s(d.instance,d.module)):async()=>i().then(d=>d.arrayBuffer()).then(d=>WebAssembly.instantiate(d,e)).then(d=>s(d.instance,d.module)))(),{}},t[xe].uri="sqlite3.wasm";var Ie=Object.assign({},t),we="./this.program",Ee=typeof window=="object",Se=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var de="";function Me(n){return t.locateFile?t.locateFile(n,de):de+n}var ut,kt,_t;(Ee||Se)&&(Se?de=self.location.href:typeof document<"u"&&document.currentScript&&(de=document.currentScript.src),L&&(de=L),de.indexOf("blob:")!==0?de=de.substr(0,de.replace(/[?#].*/,"").lastIndexOf("/")+1):de="",ut=n=>{var e=new XMLHttpRequest;return e.open("GET",n,!1),e.send(null),e.responseText},Se&&(_t=n=>{var e=new XMLHttpRequest;return e.open("GET",n,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),kt=(n,e,s)=>{var r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType="arraybuffer",r.onload=()=>{if(r.status==200||r.status==0&&r.response){e(r.response);return}s()},r.onerror=s,r.send(null)});var et=t.print||console.log.bind(console),De=t.printErr||console.warn.bind(console);Object.assign(t,Ie),Ie=null,t.arguments&&t.arguments,t.thisProgram&&(we=t.thisProgram),t.quit&&t.quit;var He;t.wasmBinary&&(He=t.wasmBinary),t.noExitRuntime,typeof WebAssembly!="object"&&We("no native wasm support detected");var Ce,Tt=!1;function yn(n,e){n||We(e)}var Ft=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ze(n,e,s){for(var r=e+s,i=e;n[i]&&!(i>=r);)++i;if(i-e>16&&n.buffer&&Ft)return Ft.decode(n.subarray(e,i));for(var l="";e<i;){var d=n[e++];if(!(d&128)){l+=String.fromCharCode(d);continue}var E=n[e++]&63;if((d&224)==192){l+=String.fromCharCode((d&31)<<6|E);continue}var k=n[e++]&63;if((d&240)==224?d=(d&15)<<12|E<<6|k:d=(d&7)<<18|E<<12|k<<6|n[e++]&63,d<65536)l+=String.fromCharCode(d);else{var j=d-65536;l+=String.fromCharCode(55296|j>>10,56320|j&1023)}}return l}function qn(n,e){return n?ze(Ue,n,e):""}function tt(n,e,s,r){if(!(r>0))return 0;for(var i=s,l=s+r-1,d=0;d<n.length;++d){var E=n.charCodeAt(d);if(E>=55296&&E<=57343){var k=n.charCodeAt(++d);E=65536+((E&1023)<<10)|k&1023}if(E<=127){if(s>=l)break;e[s++]=E}else if(E<=2047){if(s+1>=l)break;e[s++]=192|E>>6,e[s++]=128|E&63}else if(E<=65535){if(s+2>=l)break;e[s++]=224|E>>12,e[s++]=128|E>>6&63,e[s++]=128|E&63}else{if(s+3>=l)break;e[s++]=240|E>>18,e[s++]=128|E>>12&63,e[s++]=128|E>>6&63,e[s++]=128|E&63}}return e[s]=0,s-i}function Ot(n,e,s){return tt(n,Ue,e,s)}function Ve(n){for(var e=0,s=0;s<n.length;++s){var r=n.charCodeAt(s);r<=127?e++:r<=2047?e+=2:r>=55296&&r<=57343?(e+=4,++s):e+=3}return e}var ke,Ue,Pt,ie,ye;function Lt(){var n=Ce.buffer;t.HEAP8=ke=new Int8Array(n),t.HEAP16=Pt=new Int16Array(n),t.HEAP32=ie=new Int32Array(n),t.HEAPU8=Ue=new Uint8Array(n),t.HEAPU16=new Uint16Array(n),t.HEAPU32=ye=new Uint32Array(n),t.HEAPF32=new Float32Array(n),t.HEAPF64=new Float64Array(n),t.HEAP64=new BigInt64Array(n),t.HEAPU64=new BigUint64Array(n)}var Dt=t.INITIAL_MEMORY||16777216;t.wasmMemory?Ce=t.wasmMemory:Ce=new WebAssembly.Memory({initial:Dt/65536,maximum:2147483648/65536}),Lt(),Dt=Ce.buffer.byteLength;var Ct=[],Rt=[],Mt=[];function bn(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)vn(t.preRun.shift());pt(Ct)}function wn(){!t.noFSInit&&!o.init.initialized&&o.init(),o.ignorePermissions=!1,pt(Rt)}function En(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)Sn(t.postRun.shift());pt(Mt)}function vn(n){Ct.unshift(n)}function xn(n){Rt.unshift(n)}function Sn(n){Mt.unshift(n)}var Ne=0,Ge=null;function Fr(n){return n}function ft(n){Ne++,t.monitorRunDependencies&&t.monitorRunDependencies(Ne)}function nt(n){if(Ne--,t.monitorRunDependencies&&t.monitorRunDependencies(Ne),Ne==0&&Ge){var e=Ge;Ge=null,e()}}function We(n){t.onAbort&&t.onAbort(n),n="Aborted("+n+")",De(n),Tt=!0,n+=". Build with -sASSERTIONS for more info.";var e=new WebAssembly.RuntimeError(n);throw ge(e),e}var An="data:application/octet-stream;base64,";function Nt(n){return n.startsWith(An)}var Fe;t.locateFile?(Fe="sqlite3.wasm",Nt(Fe)||(Fe=Me(Fe))):Fe=new URL("/assets/sqlite3-25c52ce6.wasm",self.location).href;function jt(n){try{if(n==Fe&&He)return new Uint8Array(He);if(_t)return _t(n);throw"both async and sync fetching of the wasm failed"}catch(e){We(e)}}function In(){return!He&&(Ee||Se)&&typeof fetch=="function"?fetch(Fe,{credentials:"same-origin"}).then(function(n){if(!n.ok)throw"failed to load wasm binary file at '"+Fe+"'";return n.arrayBuffer()}).catch(function(){return jt(Fe)}):Promise.resolve().then(function(){return jt(Fe)})}function kn(){var n={env:Ht,wasi_snapshot_preview1:Ht};function e(d,E){var k=d.exports;t.asm=k,t.asm.__indirect_function_table,xn(t.asm.__wasm_call_ctors),nt()}ft();function s(d){e(d.instance)}function r(d){return In().then(function(E){return WebAssembly.instantiate(E,n)}).then(function(E){return E}).then(d,function(E){De("failed to asynchronously prepare wasm: "+E),We(E)})}function i(){return!He&&typeof WebAssembly.instantiateStreaming=="function"&&!Nt(Fe)&&typeof fetch=="function"?fetch(Fe,{credentials:"same-origin"}).then(function(d){var E=WebAssembly.instantiateStreaming(d,n);return E.then(s,function(k){return De("wasm streaming compile failed: "+k),De("falling back to ArrayBuffer instantiation"),r(s)})}):r(s)}if(t.instantiateWasm)try{var l=t.instantiateWasm(n,e);return l}catch(d){De("Module.instantiateWasm callback failed with error: "+d),ge(d)}return i().catch(ge),{}}var le,be;function pt(n){for(;n.length>0;)n.shift()(t)}var ae={isAbs:n=>n.charAt(0)==="/",splitPath:n=>{var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return e.exec(n).slice(1)},normalizeArray:(n,e)=>{for(var s=0,r=n.length-1;r>=0;r--){var i=n[r];i==="."?n.splice(r,1):i===".."?(n.splice(r,1),s++):s&&(n.splice(r,1),s--)}if(e)for(;s;s--)n.unshift("..");return n},normalize:n=>{var e=ae.isAbs(n),s=n.substr(-1)==="/";return n=ae.normalizeArray(n.split("/").filter(r=>!!r),!e).join("/"),!n&&!e&&(n="."),n&&s&&(n+="/"),(e?"/":"")+n},dirname:n=>{var e=ae.splitPath(n),s=e[0],r=e[1];return!s&&!r?".":(r&&(r=r.substr(0,r.length-1)),s+r)},basename:n=>{if(n==="/")return"/";n=ae.normalize(n),n=n.replace(/\/$/,"");var e=n.lastIndexOf("/");return e===-1?n:n.substr(e+1)},join:function(){var n=Array.prototype.slice.call(arguments);return ae.normalize(n.join("/"))},join2:(n,e)=>ae.normalize(n+"/"+e)};function Tn(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var n=new Uint8Array(1);return()=>(crypto.getRandomValues(n),n[0])}else return()=>We("randomDevice")}var Pe={resolve:function(){for(var n="",e=!1,s=arguments.length-1;s>=-1&&!e;s--){var r=s>=0?arguments[s]:o.cwd();if(typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";n=r+"/"+n,e=ae.isAbs(r)}return n=ae.normalizeArray(n.split("/").filter(i=>!!i),!e).join("/"),(e?"/":"")+n||"."},relative:(n,e)=>{n=Pe.resolve(n).substr(1),e=Pe.resolve(e).substr(1);function s(j){for(var H=0;H<j.length&&j[H]==="";H++);for(var Y=j.length-1;Y>=0&&j[Y]==="";Y--);return H>Y?[]:j.slice(H,Y-H+1)}for(var r=s(n.split("/")),i=s(e.split("/")),l=Math.min(r.length,i.length),d=l,E=0;E<l;E++)if(r[E]!==i[E]){d=E;break}for(var k=[],E=d;E<r.length;E++)k.push("..");return k=k.concat(i.slice(d)),k.join("/")}};function dt(n,e,s){var r=s>0?s:Ve(n)+1,i=new Array(r),l=tt(n,i,0,i.length);return e&&(i.length=l),i}var je={ttys:[],init:function(){},shutdown:function(){},register:function(n,e){je.ttys[n]={input:[],output:[],ops:e},o.registerDevice(n,je.stream_ops)},stream_ops:{open:function(n){var e=je.ttys[n.node.rdev];if(!e)throw new o.ErrnoError(43);n.tty=e,n.seekable=!1},close:function(n){n.tty.ops.fsync(n.tty)},fsync:function(n){n.tty.ops.fsync(n.tty)},read:function(n,e,s,r,i){if(!n.tty||!n.tty.ops.get_char)throw new o.ErrnoError(60);for(var l=0,d=0;d<r;d++){var E;try{E=n.tty.ops.get_char(n.tty)}catch{throw new o.ErrnoError(29)}if(E===void 0&&l===0)throw new o.ErrnoError(6);if(E==null)break;l++,e[s+d]=E}return l&&(n.node.timestamp=Date.now()),l},write:function(n,e,s,r,i){if(!n.tty||!n.tty.ops.put_char)throw new o.ErrnoError(60);try{for(var l=0;l<r;l++)n.tty.ops.put_char(n.tty,e[s+l])}catch{throw new o.ErrnoError(29)}return r&&(n.node.timestamp=Date.now()),l}},default_tty_ops:{get_char:function(n){if(!n.input.length){var e=null;if(typeof window<"u"&&typeof window.prompt=="function"?(e=window.prompt("Input: "),e!==null&&(e+=`
`)):typeof readline=="function"&&(e=readline(),e!==null&&(e+=`
`)),!e)return null;n.input=dt(e,!0)}return n.input.shift()},put_char:function(n,e){e===null||e===10?(et(ze(n.output,0)),n.output=[]):e!=0&&n.output.push(e)},fsync:function(n){n.output&&n.output.length>0&&(et(ze(n.output,0)),n.output=[])}},default_tty1_ops:{put_char:function(n,e){e===null||e===10?(De(ze(n.output,0)),n.output=[]):e!=0&&n.output.push(e)},fsync:function(n){n.output&&n.output.length>0&&(De(ze(n.output,0)),n.output=[])}}};function Fn(n,e){return Ue.fill(0,n,n+e),n}function On(n,e){return Math.ceil(n/e)*e}function Bt(n){n=On(n,65536);var e=$t(65536,n);return e?Fn(e,n):0}var se={ops_table:null,mount:function(n){return se.createNode(null,"/",16895,0)},createNode:function(n,e,s,r){if(o.isBlkdev(s)||o.isFIFO(s))throw new o.ErrnoError(63);se.ops_table||(se.ops_table={dir:{node:{getattr:se.node_ops.getattr,setattr:se.node_ops.setattr,lookup:se.node_ops.lookup,mknod:se.node_ops.mknod,rename:se.node_ops.rename,unlink:se.node_ops.unlink,rmdir:se.node_ops.rmdir,readdir:se.node_ops.readdir,symlink:se.node_ops.symlink},stream:{llseek:se.stream_ops.llseek}},file:{node:{getattr:se.node_ops.getattr,setattr:se.node_ops.setattr},stream:{llseek:se.stream_ops.llseek,read:se.stream_ops.read,write:se.stream_ops.write,allocate:se.stream_ops.allocate,mmap:se.stream_ops.mmap,msync:se.stream_ops.msync}},link:{node:{getattr:se.node_ops.getattr,setattr:se.node_ops.setattr,readlink:se.node_ops.readlink},stream:{}},chrdev:{node:{getattr:se.node_ops.getattr,setattr:se.node_ops.setattr},stream:o.chrdev_stream_ops}});var i=o.createNode(n,e,s,r);return o.isDir(i.mode)?(i.node_ops=se.ops_table.dir.node,i.stream_ops=se.ops_table.dir.stream,i.contents={}):o.isFile(i.mode)?(i.node_ops=se.ops_table.file.node,i.stream_ops=se.ops_table.file.stream,i.usedBytes=0,i.contents=null):o.isLink(i.mode)?(i.node_ops=se.ops_table.link.node,i.stream_ops=se.ops_table.link.stream):o.isChrdev(i.mode)&&(i.node_ops=se.ops_table.chrdev.node,i.stream_ops=se.ops_table.chrdev.stream),i.timestamp=Date.now(),n&&(n.contents[e]=i,n.timestamp=i.timestamp),i},getFileDataAsTypedArray:function(n){return n.contents?n.contents.subarray?n.contents.subarray(0,n.usedBytes):new Uint8Array(n.contents):new Uint8Array(0)},expandFileStorage:function(n,e){var s=n.contents?n.contents.length:0;if(!(s>=e)){var r=1024*1024;e=Math.max(e,s*(s<r?2:1.125)>>>0),s!=0&&(e=Math.max(e,256));var i=n.contents;n.contents=new Uint8Array(e),n.usedBytes>0&&n.contents.set(i.subarray(0,n.usedBytes),0)}},resizeFileStorage:function(n,e){if(n.usedBytes!=e)if(e==0)n.contents=null,n.usedBytes=0;else{var s=n.contents;n.contents=new Uint8Array(e),s&&n.contents.set(s.subarray(0,Math.min(e,n.usedBytes))),n.usedBytes=e}},node_ops:{getattr:function(n){var e={};return e.dev=o.isChrdev(n.mode)?n.id:1,e.ino=n.id,e.mode=n.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=n.rdev,o.isDir(n.mode)?e.size=4096:o.isFile(n.mode)?e.size=n.usedBytes:o.isLink(n.mode)?e.size=n.link.length:e.size=0,e.atime=new Date(n.timestamp),e.mtime=new Date(n.timestamp),e.ctime=new Date(n.timestamp),e.blksize=4096,e.blocks=Math.ceil(e.size/e.blksize),e},setattr:function(n,e){e.mode!==void 0&&(n.mode=e.mode),e.timestamp!==void 0&&(n.timestamp=e.timestamp),e.size!==void 0&&se.resizeFileStorage(n,e.size)},lookup:function(n,e){throw o.genericErrors[44]},mknod:function(n,e,s,r){return se.createNode(n,e,s,r)},rename:function(n,e,s){if(o.isDir(n.mode)){var r;try{r=o.lookupNode(e,s)}catch{}if(r)for(var i in r.contents)throw new o.ErrnoError(55)}delete n.parent.contents[n.name],n.parent.timestamp=Date.now(),n.name=s,e.contents[s]=n,e.timestamp=n.parent.timestamp,n.parent=e},unlink:function(n,e){delete n.contents[e],n.timestamp=Date.now()},rmdir:function(n,e){var s=o.lookupNode(n,e);for(var r in s.contents)throw new o.ErrnoError(55);delete n.contents[e],n.timestamp=Date.now()},readdir:function(n){var e=[".",".."];for(var s in n.contents)n.contents.hasOwnProperty(s)&&e.push(s);return e},symlink:function(n,e,s){var r=se.createNode(n,e,41471,0);return r.link=s,r},readlink:function(n){if(!o.isLink(n.mode))throw new o.ErrnoError(28);return n.link}},stream_ops:{read:function(n,e,s,r,i){var l=n.node.contents;if(i>=n.node.usedBytes)return 0;var d=Math.min(n.node.usedBytes-i,r);if(d>8&&l.subarray)e.set(l.subarray(i,i+d),s);else for(var E=0;E<d;E++)e[s+E]=l[i+E];return d},write:function(n,e,s,r,i,l){if(e.buffer===ke.buffer&&(l=!1),!r)return 0;var d=n.node;if(d.timestamp=Date.now(),e.subarray&&(!d.contents||d.contents.subarray)){if(l)return d.contents=e.subarray(s,s+r),d.usedBytes=r,r;if(d.usedBytes===0&&i===0)return d.contents=e.slice(s,s+r),d.usedBytes=r,r;if(i+r<=d.usedBytes)return d.contents.set(e.subarray(s,s+r),i),r}if(se.expandFileStorage(d,i+r),d.contents.subarray&&e.subarray)d.contents.set(e.subarray(s,s+r),i);else for(var E=0;E<r;E++)d.contents[i+E]=e[s+E];return d.usedBytes=Math.max(d.usedBytes,i+r),r},llseek:function(n,e,s){var r=e;if(s===1?r+=n.position:s===2&&o.isFile(n.node.mode)&&(r+=n.node.usedBytes),r<0)throw new o.ErrnoError(28);return r},allocate:function(n,e,s){se.expandFileStorage(n.node,e+s),n.node.usedBytes=Math.max(n.node.usedBytes,e+s)},mmap:function(n,e,s,r,i){if(!o.isFile(n.node.mode))throw new o.ErrnoError(43);var l,d,E=n.node.contents;if(!(i&2)&&E.buffer===ke.buffer)d=!1,l=E.byteOffset;else{if((s>0||s+e<E.length)&&(E.subarray?E=E.subarray(s,s+e):E=Array.prototype.slice.call(E,s,s+e)),d=!0,l=Bt(e),!l)throw new o.ErrnoError(48);ke.set(E,l)}return{ptr:l,allocated:d}},msync:function(n,e,s,r,i){return se.stream_ops.write(n,e,0,r,s,!1),0}}};function Pn(n,e,s,r){var i=r?"":"al "+n;kt(n,l=>{yn(l,'Loading data file "'+n+'" failed (no arrayBuffer).'),e(new Uint8Array(l)),i&&nt()},l=>{if(s)s();else throw'Loading data file "'+n+'" failed.'}),i&&ft()}var o={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(n,e={})=>{if(n=Pe.resolve(n),!n)return{path:"",node:null};var s={follow_mount:!0,recurse_count:0};if(e=Object.assign(s,e),e.recurse_count>8)throw new o.ErrnoError(32);for(var r=n.split("/").filter(Y=>!!Y),i=o.root,l="/",d=0;d<r.length;d++){var E=d===r.length-1;if(E&&e.parent)break;if(i=o.lookupNode(i,r[d]),l=ae.join2(l,r[d]),o.isMountpoint(i)&&(!E||E&&e.follow_mount)&&(i=i.mounted.root),!E||e.follow)for(var k=0;o.isLink(i.mode);){var j=o.readlink(l);l=Pe.resolve(ae.dirname(l),j);var H=o.lookupPath(l,{recurse_count:e.recurse_count+1});if(i=H.node,k++>40)throw new o.ErrnoError(32)}}return{path:l,node:i}},getPath:n=>{for(var e;;){if(o.isRoot(n)){var s=n.mount.mountpoint;return e?s[s.length-1]!=="/"?s+"/"+e:s+e:s}e=e?n.name+"/"+e:n.name,n=n.parent}},hashName:(n,e)=>{for(var s=0,r=0;r<e.length;r++)s=(s<<5)-s+e.charCodeAt(r)|0;return(n+s>>>0)%o.nameTable.length},hashAddNode:n=>{var e=o.hashName(n.parent.id,n.name);n.name_next=o.nameTable[e],o.nameTable[e]=n},hashRemoveNode:n=>{var e=o.hashName(n.parent.id,n.name);if(o.nameTable[e]===n)o.nameTable[e]=n.name_next;else for(var s=o.nameTable[e];s;){if(s.name_next===n){s.name_next=n.name_next;break}s=s.name_next}},lookupNode:(n,e)=>{var s=o.mayLookup(n);if(s)throw new o.ErrnoError(s,n);for(var r=o.hashName(n.id,e),i=o.nameTable[r];i;i=i.name_next){var l=i.name;if(i.parent.id===n.id&&l===e)return i}return o.lookup(n,e)},createNode:(n,e,s,r)=>{var i=new o.FSNode(n,e,s,r);return o.hashAddNode(i),i},destroyNode:n=>{o.hashRemoveNode(n)},isRoot:n=>n===n.parent,isMountpoint:n=>!!n.mounted,isFile:n=>(n&61440)===32768,isDir:n=>(n&61440)===16384,isLink:n=>(n&61440)===40960,isChrdev:n=>(n&61440)===8192,isBlkdev:n=>(n&61440)===24576,isFIFO:n=>(n&61440)===4096,isSocket:n=>(n&49152)===49152,flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:n=>{var e=o.flagModes[n];if(typeof e>"u")throw new Error("Unknown file open mode: "+n);return e},flagsToPermissionString:n=>{var e=["r","w","rw"][n&3];return n&512&&(e+="w"),e},nodePermissions:(n,e)=>o.ignorePermissions?0:e.includes("r")&&!(n.mode&292)||e.includes("w")&&!(n.mode&146)||e.includes("x")&&!(n.mode&73)?2:0,mayLookup:n=>{var e=o.nodePermissions(n,"x");return e||(n.node_ops.lookup?0:2)},mayCreate:(n,e)=>{try{var s=o.lookupNode(n,e);return 20}catch{}return o.nodePermissions(n,"wx")},mayDelete:(n,e,s)=>{var r;try{r=o.lookupNode(n,e)}catch(l){return l.errno}var i=o.nodePermissions(n,"wx");if(i)return i;if(s){if(!o.isDir(r.mode))return 54;if(o.isRoot(r)||o.getPath(r)===o.cwd())return 10}else if(o.isDir(r.mode))return 31;return 0},mayOpen:(n,e)=>n?o.isLink(n.mode)?32:o.isDir(n.mode)&&(o.flagsToPermissionString(e)!=="r"||e&512)?31:o.nodePermissions(n,o.flagsToPermissionString(e)):44,MAX_OPEN_FDS:4096,nextfd:(n=0,e=o.MAX_OPEN_FDS)=>{for(var s=n;s<=e;s++)if(!o.streams[s])return s;throw new o.ErrnoError(33)},getStream:n=>o.streams[n],createStream:(n,e,s)=>{o.FSStream||(o.FSStream=function(){this.shared={}},o.FSStream.prototype={},Object.defineProperties(o.FSStream.prototype,{object:{get:function(){return this.node},set:function(i){this.node=i}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}},flags:{get:function(){return this.shared.flags},set:function(i){this.shared.flags=i}},position:{get:function(){return this.shared.position},set:function(i){this.shared.position=i}}})),n=Object.assign(new o.FSStream,n);var r=o.nextfd(e,s);return n.fd=r,o.streams[r]=n,n},closeStream:n=>{o.streams[n]=null},chrdev_stream_ops:{open:n=>{var e=o.getDevice(n.node.rdev);n.stream_ops=e.stream_ops,n.stream_ops.open&&n.stream_ops.open(n)},llseek:()=>{throw new o.ErrnoError(70)}},major:n=>n>>8,minor:n=>n&255,makedev:(n,e)=>n<<8|e,registerDevice:(n,e)=>{o.devices[n]={stream_ops:e}},getDevice:n=>o.devices[n],getMounts:n=>{for(var e=[],s=[n];s.length;){var r=s.pop();e.push(r),s.push.apply(s,r.mounts)}return e},syncfs:(n,e)=>{typeof n=="function"&&(e=n,n=!1),o.syncFSRequests++,o.syncFSRequests>1&&De("warning: "+o.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var s=o.getMounts(o.root.mount),r=0;function i(d){return o.syncFSRequests--,e(d)}function l(d){if(d)return l.errored?void 0:(l.errored=!0,i(d));++r>=s.length&&i(null)}s.forEach(d=>{if(!d.type.syncfs)return l(null);d.type.syncfs(d,n,l)})},mount:(n,e,s)=>{var r=s==="/",i=!s,l;if(r&&o.root)throw new o.ErrnoError(10);if(!r&&!i){var d=o.lookupPath(s,{follow_mount:!1});if(s=d.path,l=d.node,o.isMountpoint(l))throw new o.ErrnoError(10);if(!o.isDir(l.mode))throw new o.ErrnoError(54)}var E={type:n,opts:e,mountpoint:s,mounts:[]},k=n.mount(E);return k.mount=E,E.root=k,r?o.root=k:l&&(l.mounted=E,l.mount&&l.mount.mounts.push(E)),k},unmount:n=>{var e=o.lookupPath(n,{follow_mount:!1});if(!o.isMountpoint(e.node))throw new o.ErrnoError(28);var s=e.node,r=s.mounted,i=o.getMounts(r);Object.keys(o.nameTable).forEach(d=>{for(var E=o.nameTable[d];E;){var k=E.name_next;i.includes(E.mount)&&o.destroyNode(E),E=k}}),s.mounted=null;var l=s.mount.mounts.indexOf(r);s.mount.mounts.splice(l,1)},lookup:(n,e)=>n.node_ops.lookup(n,e),mknod:(n,e,s)=>{var r=o.lookupPath(n,{parent:!0}),i=r.node,l=ae.basename(n);if(!l||l==="."||l==="..")throw new o.ErrnoError(28);var d=o.mayCreate(i,l);if(d)throw new o.ErrnoError(d);if(!i.node_ops.mknod)throw new o.ErrnoError(63);return i.node_ops.mknod(i,l,e,s)},create:(n,e)=>(e=e!==void 0?e:438,e&=4095,e|=32768,o.mknod(n,e,0)),mkdir:(n,e)=>(e=e!==void 0?e:511,e&=1023,e|=16384,o.mknod(n,e,0)),mkdirTree:(n,e)=>{for(var s=n.split("/"),r="",i=0;i<s.length;++i)if(s[i]){r+="/"+s[i];try{o.mkdir(r,e)}catch(l){if(l.errno!=20)throw l}}},mkdev:(n,e,s)=>(typeof s>"u"&&(s=e,e=438),e|=8192,o.mknod(n,e,s)),symlink:(n,e)=>{if(!Pe.resolve(n))throw new o.ErrnoError(44);var s=o.lookupPath(e,{parent:!0}),r=s.node;if(!r)throw new o.ErrnoError(44);var i=ae.basename(e),l=o.mayCreate(r,i);if(l)throw new o.ErrnoError(l);if(!r.node_ops.symlink)throw new o.ErrnoError(63);return r.node_ops.symlink(r,i,n)},rename:(n,e)=>{var s=ae.dirname(n),r=ae.dirname(e),i=ae.basename(n),l=ae.basename(e),d,E,k;if(d=o.lookupPath(n,{parent:!0}),E=d.node,d=o.lookupPath(e,{parent:!0}),k=d.node,!E||!k)throw new o.ErrnoError(44);if(E.mount!==k.mount)throw new o.ErrnoError(75);var j=o.lookupNode(E,i),H=Pe.relative(n,r);if(H.charAt(0)!==".")throw new o.ErrnoError(28);if(H=Pe.relative(e,s),H.charAt(0)!==".")throw new o.ErrnoError(55);var Y;try{Y=o.lookupNode(k,l)}catch{}if(j!==Y){var S=o.isDir(j.mode),p=o.mayDelete(E,i,S);if(p)throw new o.ErrnoError(p);if(p=Y?o.mayDelete(k,l,S):o.mayCreate(k,l),p)throw new o.ErrnoError(p);if(!E.node_ops.rename)throw new o.ErrnoError(63);if(o.isMountpoint(j)||Y&&o.isMountpoint(Y))throw new o.ErrnoError(10);if(k!==E&&(p=o.nodePermissions(E,"w"),p))throw new o.ErrnoError(p);o.hashRemoveNode(j);try{E.node_ops.rename(j,k,l)}catch(f){throw f}finally{o.hashAddNode(j)}}},rmdir:n=>{var e=o.lookupPath(n,{parent:!0}),s=e.node,r=ae.basename(n),i=o.lookupNode(s,r),l=o.mayDelete(s,r,!0);if(l)throw new o.ErrnoError(l);if(!s.node_ops.rmdir)throw new o.ErrnoError(63);if(o.isMountpoint(i))throw new o.ErrnoError(10);s.node_ops.rmdir(s,r),o.destroyNode(i)},readdir:n=>{var e=o.lookupPath(n,{follow:!0}),s=e.node;if(!s.node_ops.readdir)throw new o.ErrnoError(54);return s.node_ops.readdir(s)},unlink:n=>{var e=o.lookupPath(n,{parent:!0}),s=e.node;if(!s)throw new o.ErrnoError(44);var r=ae.basename(n),i=o.lookupNode(s,r),l=o.mayDelete(s,r,!1);if(l)throw new o.ErrnoError(l);if(!s.node_ops.unlink)throw new o.ErrnoError(63);if(o.isMountpoint(i))throw new o.ErrnoError(10);s.node_ops.unlink(s,r),o.destroyNode(i)},readlink:n=>{var e=o.lookupPath(n),s=e.node;if(!s)throw new o.ErrnoError(44);if(!s.node_ops.readlink)throw new o.ErrnoError(28);return Pe.resolve(o.getPath(s.parent),s.node_ops.readlink(s))},stat:(n,e)=>{var s=o.lookupPath(n,{follow:!e}),r=s.node;if(!r)throw new o.ErrnoError(44);if(!r.node_ops.getattr)throw new o.ErrnoError(63);return r.node_ops.getattr(r)},lstat:n=>o.stat(n,!0),chmod:(n,e,s)=>{var r;if(typeof n=="string"){var i=o.lookupPath(n,{follow:!s});r=i.node}else r=n;if(!r.node_ops.setattr)throw new o.ErrnoError(63);r.node_ops.setattr(r,{mode:e&4095|r.mode&-4096,timestamp:Date.now()})},lchmod:(n,e)=>{o.chmod(n,e,!0)},fchmod:(n,e)=>{var s=o.getStream(n);if(!s)throw new o.ErrnoError(8);o.chmod(s.node,e)},chown:(n,e,s,r)=>{var i;if(typeof n=="string"){var l=o.lookupPath(n,{follow:!r});i=l.node}else i=n;if(!i.node_ops.setattr)throw new o.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown:(n,e,s)=>{o.chown(n,e,s,!0)},fchown:(n,e,s)=>{var r=o.getStream(n);if(!r)throw new o.ErrnoError(8);o.chown(r.node,e,s)},truncate:(n,e)=>{if(e<0)throw new o.ErrnoError(28);var s;if(typeof n=="string"){var r=o.lookupPath(n,{follow:!0});s=r.node}else s=n;if(!s.node_ops.setattr)throw new o.ErrnoError(63);if(o.isDir(s.mode))throw new o.ErrnoError(31);if(!o.isFile(s.mode))throw new o.ErrnoError(28);var i=o.nodePermissions(s,"w");if(i)throw new o.ErrnoError(i);s.node_ops.setattr(s,{size:e,timestamp:Date.now()})},ftruncate:(n,e)=>{var s=o.getStream(n);if(!s)throw new o.ErrnoError(8);if(!(s.flags&2097155))throw new o.ErrnoError(28);o.truncate(s.node,e)},utime:(n,e,s)=>{var r=o.lookupPath(n,{follow:!0}),i=r.node;i.node_ops.setattr(i,{timestamp:Math.max(e,s)})},open:(n,e,s)=>{if(n==="")throw new o.ErrnoError(44);e=typeof e=="string"?o.modeStringToFlags(e):e,s=typeof s>"u"?438:s,e&64?s=s&4095|32768:s=0;var r;if(typeof n=="object")r=n;else{n=ae.normalize(n);try{var i=o.lookupPath(n,{follow:!(e&131072)});r=i.node}catch{}}var l=!1;if(e&64)if(r){if(e&128)throw new o.ErrnoError(20)}else r=o.mknod(n,s,0),l=!0;if(!r)throw new o.ErrnoError(44);if(o.isChrdev(r.mode)&&(e&=-513),e&65536&&!o.isDir(r.mode))throw new o.ErrnoError(54);if(!l){var d=o.mayOpen(r,e);if(d)throw new o.ErrnoError(d)}e&512&&!l&&o.truncate(r,0),e&=-131713;var E=o.createStream({node:r,path:o.getPath(r),flags:e,seekable:!0,position:0,stream_ops:r.stream_ops,ungotten:[],error:!1});return E.stream_ops.open&&E.stream_ops.open(E),t.logReadFiles&&!(e&1)&&(o.readFiles||(o.readFiles={}),n in o.readFiles||(o.readFiles[n]=1)),E},close:n=>{if(o.isClosed(n))throw new o.ErrnoError(8);n.getdents&&(n.getdents=null);try{n.stream_ops.close&&n.stream_ops.close(n)}catch(e){throw e}finally{o.closeStream(n.fd)}n.fd=null},isClosed:n=>n.fd===null,llseek:(n,e,s)=>{if(o.isClosed(n))throw new o.ErrnoError(8);if(!n.seekable||!n.stream_ops.llseek)throw new o.ErrnoError(70);if(s!=0&&s!=1&&s!=2)throw new o.ErrnoError(28);return n.position=n.stream_ops.llseek(n,e,s),n.ungotten=[],n.position},read:(n,e,s,r,i)=>{if(r<0||i<0)throw new o.ErrnoError(28);if(o.isClosed(n))throw new o.ErrnoError(8);if((n.flags&2097155)===1)throw new o.ErrnoError(8);if(o.isDir(n.node.mode))throw new o.ErrnoError(31);if(!n.stream_ops.read)throw new o.ErrnoError(28);var l=typeof i<"u";if(!l)i=n.position;else if(!n.seekable)throw new o.ErrnoError(70);var d=n.stream_ops.read(n,e,s,r,i);return l||(n.position+=d),d},write:(n,e,s,r,i,l)=>{if(r<0||i<0)throw new o.ErrnoError(28);if(o.isClosed(n))throw new o.ErrnoError(8);if(!(n.flags&2097155))throw new o.ErrnoError(8);if(o.isDir(n.node.mode))throw new o.ErrnoError(31);if(!n.stream_ops.write)throw new o.ErrnoError(28);n.seekable&&n.flags&1024&&o.llseek(n,0,2);var d=typeof i<"u";if(!d)i=n.position;else if(!n.seekable)throw new o.ErrnoError(70);var E=n.stream_ops.write(n,e,s,r,i,l);return d||(n.position+=E),E},allocate:(n,e,s)=>{if(o.isClosed(n))throw new o.ErrnoError(8);if(e<0||s<=0)throw new o.ErrnoError(28);if(!(n.flags&2097155))throw new o.ErrnoError(8);if(!o.isFile(n.node.mode)&&!o.isDir(n.node.mode))throw new o.ErrnoError(43);if(!n.stream_ops.allocate)throw new o.ErrnoError(138);n.stream_ops.allocate(n,e,s)},mmap:(n,e,s,r,i)=>{if(r&2&&!(i&2)&&(n.flags&2097155)!==2)throw new o.ErrnoError(2);if((n.flags&2097155)===1)throw new o.ErrnoError(2);if(!n.stream_ops.mmap)throw new o.ErrnoError(43);return n.stream_ops.mmap(n,e,s,r,i)},msync:(n,e,s,r,i)=>n.stream_ops.msync?n.stream_ops.msync(n,e,s,r,i):0,munmap:n=>0,ioctl:(n,e,s)=>{if(!n.stream_ops.ioctl)throw new o.ErrnoError(59);return n.stream_ops.ioctl(n,e,s)},readFile:(n,e={})=>{if(e.flags=e.flags||0,e.encoding=e.encoding||"binary",e.encoding!=="utf8"&&e.encoding!=="binary")throw new Error('Invalid encoding type "'+e.encoding+'"');var s,r=o.open(n,e.flags),i=o.stat(n),l=i.size,d=new Uint8Array(l);return o.read(r,d,0,l,0),e.encoding==="utf8"?s=ze(d,0):e.encoding==="binary"&&(s=d),o.close(r),s},writeFile:(n,e,s={})=>{s.flags=s.flags||577;var r=o.open(n,s.flags,s.mode);if(typeof e=="string"){var i=new Uint8Array(Ve(e)+1),l=tt(e,i,0,i.length);o.write(r,i,0,l,void 0,s.canOwn)}else if(ArrayBuffer.isView(e))o.write(r,e,0,e.byteLength,void 0,s.canOwn);else throw new Error("Unsupported data type");o.close(r)},cwd:()=>o.currentPath,chdir:n=>{var e=o.lookupPath(n,{follow:!0});if(e.node===null)throw new o.ErrnoError(44);if(!o.isDir(e.node.mode))throw new o.ErrnoError(54);var s=o.nodePermissions(e.node,"x");if(s)throw new o.ErrnoError(s);o.currentPath=e.path},createDefaultDirectories:()=>{o.mkdir("/tmp"),o.mkdir("/home"),o.mkdir("/home/web_user")},createDefaultDevices:()=>{o.mkdir("/dev"),o.registerDevice(o.makedev(1,3),{read:()=>0,write:(e,s,r,i,l)=>i}),o.mkdev("/dev/null",o.makedev(1,3)),je.register(o.makedev(5,0),je.default_tty_ops),je.register(o.makedev(6,0),je.default_tty1_ops),o.mkdev("/dev/tty",o.makedev(5,0)),o.mkdev("/dev/tty1",o.makedev(6,0));var n=Tn();o.createDevice("/dev","random",n),o.createDevice("/dev","urandom",n),o.mkdir("/dev/shm"),o.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{o.mkdir("/proc");var n=o.mkdir("/proc/self");o.mkdir("/proc/self/fd"),o.mount({mount:()=>{var e=o.createNode(n,"fd",16895,73);return e.node_ops={lookup:(s,r)=>{var i=+r,l=o.getStream(i);if(!l)throw new o.ErrnoError(8);var d={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>l.path}};return d.parent=d,d}},e}},{},"/proc/self/fd")},createStandardStreams:()=>{t.stdin?o.createDevice("/dev","stdin",t.stdin):o.symlink("/dev/tty","/dev/stdin"),t.stdout?o.createDevice("/dev","stdout",null,t.stdout):o.symlink("/dev/tty","/dev/stdout"),t.stderr?o.createDevice("/dev","stderr",null,t.stderr):o.symlink("/dev/tty1","/dev/stderr"),o.open("/dev/stdin",0),o.open("/dev/stdout",1),o.open("/dev/stderr",1)},ensureErrnoError:()=>{o.ErrnoError||(o.ErrnoError=function(e,s){this.node=s,this.setErrno=function(r){this.errno=r},this.setErrno(e),this.message="FS error"},o.ErrnoError.prototype=new Error,o.ErrnoError.prototype.constructor=o.ErrnoError,[44].forEach(n=>{o.genericErrors[n]=new o.ErrnoError(n),o.genericErrors[n].stack="<generic error, no stack>"}))},staticInit:()=>{o.ensureErrnoError(),o.nameTable=new Array(4096),o.mount(se,{},"/"),o.createDefaultDirectories(),o.createDefaultDevices(),o.createSpecialDirectories(),o.filesystems={MEMFS:se}},init:(n,e,s)=>{o.init.initialized=!0,o.ensureErrnoError(),t.stdin=n||t.stdin,t.stdout=e||t.stdout,t.stderr=s||t.stderr,o.createStandardStreams()},quit:()=>{o.init.initialized=!1;for(var n=0;n<o.streams.length;n++){var e=o.streams[n];e&&o.close(e)}},getMode:(n,e)=>{var s=0;return n&&(s|=365),e&&(s|=146),s},findObject:(n,e)=>{var s=o.analyzePath(n,e);return s.exists?s.object:null},analyzePath:(n,e)=>{try{var s=o.lookupPath(n,{follow:!e});n=s.path}catch{}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var s=o.lookupPath(n,{parent:!0});r.parentExists=!0,r.parentPath=s.path,r.parentObject=s.node,r.name=ae.basename(n),s=o.lookupPath(n,{follow:!e}),r.exists=!0,r.path=s.path,r.object=s.node,r.name=s.node.name,r.isRoot=s.path==="/"}catch(i){r.error=i.errno}return r},createPath:(n,e,s,r)=>{n=typeof n=="string"?n:o.getPath(n);for(var i=e.split("/").reverse();i.length;){var l=i.pop();if(l){var d=ae.join2(n,l);try{o.mkdir(d)}catch{}n=d}}return d},createFile:(n,e,s,r,i)=>{var l=ae.join2(typeof n=="string"?n:o.getPath(n),e),d=o.getMode(r,i);return o.create(l,d)},createDataFile:(n,e,s,r,i,l)=>{var d=e;n&&(n=typeof n=="string"?n:o.getPath(n),d=e?ae.join2(n,e):n);var E=o.getMode(r,i),k=o.create(d,E);if(s){if(typeof s=="string"){for(var j=new Array(s.length),H=0,Y=s.length;H<Y;++H)j[H]=s.charCodeAt(H);s=j}o.chmod(k,E|146);var S=o.open(k,577);o.write(S,s,0,s.length,0,l),o.close(S),o.chmod(k,E)}return k},createDevice:(n,e,s,r)=>{var i=ae.join2(typeof n=="string"?n:o.getPath(n),e),l=o.getMode(!!s,!!r);o.createDevice.major||(o.createDevice.major=64);var d=o.makedev(o.createDevice.major++,0);return o.registerDevice(d,{open:E=>{E.seekable=!1},close:E=>{r&&r.buffer&&r.buffer.length&&r(10)},read:(E,k,j,H,Y)=>{for(var S=0,p=0;p<H;p++){var f;try{f=s()}catch{throw new o.ErrnoError(29)}if(f===void 0&&S===0)throw new o.ErrnoError(6);if(f==null)break;S++,k[j+p]=f}return S&&(E.node.timestamp=Date.now()),S},write:(E,k,j,H,Y)=>{for(var S=0;S<H;S++)try{r(k[j+S])}catch{throw new o.ErrnoError(29)}return H&&(E.node.timestamp=Date.now()),S}}),o.mkdev(i,l,d)},forceLoadFile:n=>{if(n.isDevice||n.isFolder||n.link||n.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(ut)try{n.contents=dt(ut(n.url),!0),n.usedBytes=n.contents.length}catch{throw new o.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:(n,e,s,r,i)=>{function l(){this.lengthKnown=!1,this.chunks=[]}if(l.prototype.get=function(p){if(!(p>this.length-1||p<0)){var f=p%this.chunkSize,y=p/this.chunkSize|0;return this.getter(y)[f]}},l.prototype.setDataGetter=function(p){this.getter=p},l.prototype.cacheLength=function(){var p=new XMLHttpRequest;if(p.open("HEAD",s,!1),p.send(null),!(p.status>=200&&p.status<300||p.status===304))throw new Error("Couldn't load "+s+". Status: "+p.status);var f=Number(p.getResponseHeader("Content-length")),y,w=(y=p.getResponseHeader("Accept-Ranges"))&&y==="bytes",m=(y=p.getResponseHeader("Content-Encoding"))&&y==="gzip",D=1024*1024;w||(D=f);var N=(B,te)=>{if(B>te)throw new Error("invalid range ("+B+", "+te+") or no bytes requested!");if(te>f-1)throw new Error("only "+f+" bytes available! programmer error!");var u=new XMLHttpRequest;if(u.open("GET",s,!1),f!==D&&u.setRequestHeader("Range","bytes="+B+"-"+te),u.responseType="arraybuffer",u.overrideMimeType&&u.overrideMimeType("text/plain; charset=x-user-defined"),u.send(null),!(u.status>=200&&u.status<300||u.status===304))throw new Error("Couldn't load "+s+". Status: "+u.status);return u.response!==void 0?new Uint8Array(u.response||[]):dt(u.responseText||"",!0)},F=this;F.setDataGetter(B=>{var te=B*D,u=(B+1)*D-1;if(u=Math.min(u,f-1),typeof F.chunks[B]>"u"&&(F.chunks[B]=N(te,u)),typeof F.chunks[B]>"u")throw new Error("doXHR failed!");return F.chunks[B]}),(m||!f)&&(D=f=1,f=this.getter(0).length,D=f,et("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=f,this._chunkSize=D,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!Se)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var d=new l;Object.defineProperties(d,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var E={isDevice:!1,contents:d}}else var E={isDevice:!1,url:s};var k=o.createFile(n,e,E,r,i);E.contents?k.contents=E.contents:E.url&&(k.contents=null,k.url=E.url),Object.defineProperties(k,{usedBytes:{get:function(){return this.contents.length}}});var j={},H=Object.keys(k.stream_ops);H.forEach(S=>{var p=k.stream_ops[S];j[S]=function(){return o.forceLoadFile(k),p.apply(null,arguments)}});function Y(S,p,f,y,w){var m=S.node.contents;if(w>=m.length)return 0;var D=Math.min(m.length-w,y);if(m.slice)for(var N=0;N<D;N++)p[f+N]=m[w+N];else for(var N=0;N<D;N++)p[f+N]=m.get(w+N);return D}return j.read=(S,p,f,y,w)=>(o.forceLoadFile(k),Y(S,p,f,y,w)),j.mmap=(S,p,f,y,w)=>{o.forceLoadFile(k);var m=Bt(p);if(!m)throw new o.ErrnoError(48);return Y(S,ke,m,p,f),{ptr:m,allocated:!0}},k.stream_ops=j,k},createPreloadedFile:(n,e,s,r,i,l,d,E,k,j)=>{var H=e?Pe.resolve(ae.join2(n,e)):n;function Y(S){function p(f){j&&j(),E||o.createDataFile(n,e,f,r,i,k),l&&l(),nt()}Browser.handledByPreloadPlugin(S,H,p,()=>{d&&d(),nt()})||p(S)}ft(),typeof s=="string"?Pn(s,S=>Y(S),d):Y(s)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(n,e,s)=>{e=e||(()=>{}),s=s||(()=>{});var r=o.indexedDB();try{var i=r.open(o.DB_NAME(),o.DB_VERSION)}catch(l){return s(l)}i.onupgradeneeded=()=>{et("creating db");var l=i.result;l.createObjectStore(o.DB_STORE_NAME)},i.onsuccess=()=>{var l=i.result,d=l.transaction([o.DB_STORE_NAME],"readwrite"),E=d.objectStore(o.DB_STORE_NAME),k=0,j=0,H=n.length;function Y(){j==0?e():s()}n.forEach(S=>{var p=E.put(o.analyzePath(S).object.contents,S);p.onsuccess=()=>{k++,k+j==H&&Y()},p.onerror=()=>{j++,k+j==H&&Y()}}),d.onerror=s},i.onerror=s},loadFilesFromDB:(n,e,s)=>{e=e||(()=>{}),s=s||(()=>{});var r=o.indexedDB();try{var i=r.open(o.DB_NAME(),o.DB_VERSION)}catch(l){return s(l)}i.onupgradeneeded=s,i.onsuccess=()=>{var l=i.result;try{var d=l.transaction([o.DB_STORE_NAME],"readonly")}catch(S){s(S);return}var E=d.objectStore(o.DB_STORE_NAME),k=0,j=0,H=n.length;function Y(){j==0?e():s()}n.forEach(S=>{var p=E.get(S);p.onsuccess=()=>{o.analyzePath(S).exists&&o.unlink(S),o.createDataFile(ae.dirname(S),ae.basename(S),p.result,!0,!0,!0),k++,k+j==H&&Y()},p.onerror=()=>{j++,k+j==H&&Y()}}),d.onerror=s},i.onerror=s}},ne={DEFAULT_POLLMASK:5,calculateAt:function(n,e,s){if(ae.isAbs(e))return e;var r;if(n===-100)r=o.cwd();else{var i=ne.getStreamFromFD(n);r=i.path}if(e.length==0){if(!s)throw new o.ErrnoError(44);return r}return ae.join2(r,e)},doStat:function(n,e,s){try{var r=n(e)}catch(E){if(E&&E.node&&ae.normalize(e)!==ae.normalize(o.getPath(E.node)))return-54;throw E}ie[s>>2]=r.dev,ie[s+8>>2]=r.ino,ie[s+12>>2]=r.mode,ye[s+16>>2]=r.nlink,ie[s+20>>2]=r.uid,ie[s+24>>2]=r.gid,ie[s+28>>2]=r.rdev,be=[r.size>>>0,(le=r.size,+Math.abs(le)>=1?le>0?(Math.min(+Math.floor(le/4294967296),4294967295)|0)>>>0:~~+Math.ceil((le-+(~~le>>>0))/4294967296)>>>0:0)],ie[s+40>>2]=be[0],ie[s+44>>2]=be[1],ie[s+48>>2]=4096,ie[s+52>>2]=r.blocks;var i=r.atime.getTime(),l=r.mtime.getTime(),d=r.ctime.getTime();return be=[Math.floor(i/1e3)>>>0,(le=Math.floor(i/1e3),+Math.abs(le)>=1?le>0?(Math.min(+Math.floor(le/4294967296),4294967295)|0)>>>0:~~+Math.ceil((le-+(~~le>>>0))/4294967296)>>>0:0)],ie[s+56>>2]=be[0],ie[s+60>>2]=be[1],ye[s+64>>2]=i%1e3*1e3,be=[Math.floor(l/1e3)>>>0,(le=Math.floor(l/1e3),+Math.abs(le)>=1?le>0?(Math.min(+Math.floor(le/4294967296),4294967295)|0)>>>0:~~+Math.ceil((le-+(~~le>>>0))/4294967296)>>>0:0)],ie[s+72>>2]=be[0],ie[s+76>>2]=be[1],ye[s+80>>2]=l%1e3*1e3,be=[Math.floor(d/1e3)>>>0,(le=Math.floor(d/1e3),+Math.abs(le)>=1?le>0?(Math.min(+Math.floor(le/4294967296),4294967295)|0)>>>0:~~+Math.ceil((le-+(~~le>>>0))/4294967296)>>>0:0)],ie[s+88>>2]=be[0],ie[s+92>>2]=be[1],ye[s+96>>2]=d%1e3*1e3,be=[r.ino>>>0,(le=r.ino,+Math.abs(le)>=1?le>0?(Math.min(+Math.floor(le/4294967296),4294967295)|0)>>>0:~~+Math.ceil((le-+(~~le>>>0))/4294967296)>>>0:0)],ie[s+104>>2]=be[0],ie[s+108>>2]=be[1],0},doMsync:function(n,e,s,r,i){if(!o.isFile(e.node.mode))throw new o.ErrnoError(43);if(r&2)return 0;var l=Ue.slice(n,n+s);o.msync(e,l,i,s,r)},varargs:void 0,get:function(){ne.varargs+=4;var n=ie[ne.varargs-4>>2];return n},getStr:function(n){var e=qn(n);return e},getStreamFromFD:function(n){var e=o.getStream(n);if(!e)throw new o.ErrnoError(8);return e}};function Ln(n,e){try{return n=ne.getStr(n),o.chmod(n,e),0}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}function Dn(n,e,s,r){try{if(e=ne.getStr(e),e=ne.calculateAt(n,e),s&-8)return-28;var i=o.lookupPath(e,{follow:!0}),l=i.node;if(!l)return-44;var d="";return s&4&&(d+="r"),s&2&&(d+="w"),s&1&&(d+="x"),d&&o.nodePermissions(l,d)?-2:0}catch(E){if(typeof o>"u"||!(E instanceof o.ErrnoError))throw E;return-E.errno}}function Cn(n,e){try{return o.fchmod(n,e),0}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}function Rn(n,e,s){try{return o.fchown(n,e,s),0}catch(r){if(typeof o>"u"||!(r instanceof o.ErrnoError))throw r;return-r.errno}}function Mn(n){return ie[Vt()>>2]=n,n}function Nn(n,e,s){ne.varargs=s;try{var r=ne.getStreamFromFD(n);switch(e){case 0:{var i=ne.get();if(i<0)return-28;var l;return l=o.createStream(r,i),l.fd}case 1:case 2:return 0;case 3:return r.flags;case 4:{var i=ne.get();return r.flags|=i,0}case 5:{var i=ne.get(),d=0;return Pt[i+d>>1]=2,0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:return Mn(28),-1;default:return-28}}catch(E){if(typeof o>"u"||!(E instanceof o.ErrnoError))throw E;return-E.errno}}function jn(n,e){try{var s=ne.getStreamFromFD(n);return ne.doStat(o.stat,s.path,e)}catch(r){if(typeof o>"u"||!(r instanceof o.ErrnoError))throw r;return-r.errno}}var Bn=9007199254740992,zn=-9007199254740992;function zt(n){return n<zn||n>Bn?NaN:Number(n)}function Un(n,e){try{return e=zt(e),isNaN(e)?-61:(o.ftruncate(n,e),0)}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}function Wn(n,e){try{if(e===0)return-28;var s=o.cwd(),r=Ve(s)+1;return e<r?-68:(Ot(s,n,e),r)}catch(i){if(typeof o>"u"||!(i instanceof o.ErrnoError))throw i;return-i.errno}}function Qn(n,e,s){ne.varargs=s;try{var r=ne.getStreamFromFD(n);switch(e){case 21509:case 21505:return r.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return r.tty?0:-59;case 21519:{if(!r.tty)return-59;var i=ne.get();return ie[i>>2]=0,0}case 21520:return r.tty?-28:-59;case 21531:{var i=ne.get();return o.ioctl(r,e,i)}case 21523:return r.tty?0:-59;case 21524:return r.tty?0:-59;default:return-28}}catch(l){if(typeof o>"u"||!(l instanceof o.ErrnoError))throw l;return-l.errno}}function Hn(n,e){try{return n=ne.getStr(n),ne.doStat(o.lstat,n,e)}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}function Vn(n,e,s){try{return e=ne.getStr(e),e=ne.calculateAt(n,e),e=ae.normalize(e),e[e.length-1]==="/"&&(e=e.substr(0,e.length-1)),o.mkdir(e,s,0),0}catch(r){if(typeof o>"u"||!(r instanceof o.ErrnoError))throw r;return-r.errno}}function Gn(n,e,s,r){try{e=ne.getStr(e);var i=r&256,l=r&4096;return r=r&-6401,e=ne.calculateAt(n,e,l),ne.doStat(i?o.lstat:o.stat,e,s)}catch(d){if(typeof o>"u"||!(d instanceof o.ErrnoError))throw d;return-d.errno}}function $n(n,e,s,r){ne.varargs=r;try{e=ne.getStr(e),e=ne.calculateAt(n,e);var i=r?ne.get():0;return o.open(e,s,i).fd}catch(l){if(typeof o>"u"||!(l instanceof o.ErrnoError))throw l;return-l.errno}}function Kn(n,e,s,r){try{if(e=ne.getStr(e),e=ne.calculateAt(n,e),r<=0)return-28;var i=o.readlink(e),l=Math.min(r,Ve(i)),d=ke[s+l];return Ot(i,s,r+1),ke[s+l]=d,l}catch(E){if(typeof o>"u"||!(E instanceof o.ErrnoError))throw E;return-E.errno}}function Jn(n){try{return n=ne.getStr(n),o.rmdir(n),0}catch(e){if(typeof o>"u"||!(e instanceof o.ErrnoError))throw e;return-e.errno}}function Xn(n,e){try{return n=ne.getStr(n),ne.doStat(o.stat,n,e)}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}function Yn(n,e,s){try{return e=ne.getStr(e),e=ne.calculateAt(n,e),s===0?o.unlink(e):s===512?o.rmdir(e):We("Invalid flags passed to unlinkat"),0}catch(r){if(typeof o>"u"||!(r instanceof o.ErrnoError))throw r;return-r.errno}}function mt(n){return ye[n>>2]+ie[n+4>>2]*4294967296}function Zn(n,e,s,r){try{if(e=ne.getStr(e),e=ne.calculateAt(n,e,!0),s){var d=mt(s),E=ie[s+8>>2];i=d*1e3+E/(1e3*1e3),s+=16,d=mt(s),E=ie[s+8>>2],l=d*1e3+E/(1e3*1e3)}else var i=Date.now(),l=i;return o.utime(e,i,l),0}catch(k){if(typeof o>"u"||!(k instanceof o.ErrnoError))throw k;return-k.errno}}var er=!0;function tr(){return er}function nr(n){return n%4===0&&(n%100!==0||n%400===0)}var rr=[0,31,60,91,121,152,182,213,244,274,305,335],sr=[0,31,59,90,120,151,181,212,243,273,304,334];function ir(n){var e=nr(n.getFullYear()),s=e?rr:sr,r=s[n.getMonth()]+n.getDate()-1;return r}function or(n,e){var s=new Date(mt(n)*1e3);ie[e>>2]=s.getSeconds(),ie[e+4>>2]=s.getMinutes(),ie[e+8>>2]=s.getHours(),ie[e+12>>2]=s.getDate(),ie[e+16>>2]=s.getMonth(),ie[e+20>>2]=s.getFullYear()-1900,ie[e+24>>2]=s.getDay();var r=ir(s)|0;ie[e+28>>2]=r,ie[e+36>>2]=-(s.getTimezoneOffset()*60);var i=new Date(s.getFullYear(),0,1),l=new Date(s.getFullYear(),6,1).getTimezoneOffset(),d=i.getTimezoneOffset(),E=(l!=d&&s.getTimezoneOffset()==Math.min(d,l))|0;ie[e+32>>2]=E}function lr(n,e,s,r,i,l,d){try{var E=ne.getStreamFromFD(r),k=o.mmap(E,n,i,e,s),j=k.ptr;return ie[l>>2]=k.allocated,ye[d>>2]=j,0}catch(H){if(typeof o>"u"||!(H instanceof o.ErrnoError))throw H;return-H.errno}}function ar(n,e,s,r,i,l){try{var d=ne.getStreamFromFD(i);s&2&&ne.doMsync(n,d,e,r,l),o.munmap(d)}catch(E){if(typeof o>"u"||!(E instanceof o.ErrnoError))throw E;return-E.errno}}function Ut(n){var e=Ve(n)+1,s=Gt(e);return s&&tt(n,ke,s,e),s}function cr(n,e,s){var r=new Date().getFullYear(),i=new Date(r,0,1),l=new Date(r,6,1),d=i.getTimezoneOffset(),E=l.getTimezoneOffset(),k=Math.max(d,E);ye[n>>2]=k*60,ie[e>>2]=+(d!=E);function j(f){var y=f.toTimeString().match(/\(([A-Za-z ]+)\)$/);return y?y[1]:"GMT"}var H=j(i),Y=j(l),S=Ut(H),p=Ut(Y);E<d?(ye[s>>2]=S,ye[s+4>>2]=p):(ye[s>>2]=p,ye[s+4>>2]=S)}function ur(){return Date.now()}var Wt;Wt=()=>performance.now();function _r(){return 2147483648}function fr(n){var e=Ce.buffer;try{return Ce.grow(n-e.byteLength+65535>>>16),Lt(),1}catch{}}function pr(n){var e=Ue.length;n=n>>>0;var s=_r();if(n>s)return!1;let r=(k,j)=>k+(j-k%j)%j;for(var i=1;i<=4;i*=2){var l=e*(1+.2/i);l=Math.min(l,n+100663296);var d=Math.min(s,r(Math.max(n,l),65536)),E=fr(d);if(E)return!0}return!1}var gt={};function dr(){return we||"./this.program"}function $e(){if(!$e.strings){var n=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:n,_:dr()};for(var s in gt)gt[s]===void 0?delete e[s]:e[s]=gt[s];var r=[];for(var s in e)r.push(s+"="+e[s]);$e.strings=r}return $e.strings}function mr(n,e,s){for(var r=0;r<n.length;++r)ke[e++>>0]=n.charCodeAt(r);s||(ke[e>>0]=0)}function gr(n,e){var s=0;return $e().forEach(function(r,i){var l=e+s;ye[n+i*4>>2]=l,mr(r,l),s+=r.length+1}),0}function hr(n,e){var s=$e();ye[n>>2]=s.length;var r=0;return s.forEach(function(i){r+=i.length+1}),ye[e>>2]=r,0}function yr(n){try{var e=ne.getStreamFromFD(n);return o.close(e),0}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return s.errno}}function qr(n,e){try{var s=ne.getStreamFromFD(n),r=s.tty?2:o.isDir(s.mode)?3:o.isLink(s.mode)?7:4;return ke[e>>0]=r,0}catch(i){if(typeof o>"u"||!(i instanceof o.ErrnoError))throw i;return i.errno}}function br(n,e,s,r){for(var i=0,l=0;l<s;l++){var d=ye[e>>2],E=ye[e+4>>2];e+=8;var k=o.read(n,ke,d,E,r);if(k<0)return-1;if(i+=k,k<E)break;typeof r<"u"&&(r+=k)}return i}function wr(n,e,s,r){try{var i=ne.getStreamFromFD(n),l=br(i,e,s);return ye[r>>2]=l,0}catch(d){if(typeof o>"u"||!(d instanceof o.ErrnoError))throw d;return d.errno}}function Er(n,e,s,r){try{if(e=zt(e),isNaN(e))return 61;var i=ne.getStreamFromFD(n);return o.llseek(i,e,s),be=[i.position>>>0,(le=i.position,+Math.abs(le)>=1?le>0?(Math.min(+Math.floor(le/4294967296),4294967295)|0)>>>0:~~+Math.ceil((le-+(~~le>>>0))/4294967296)>>>0:0)],ie[r>>2]=be[0],ie[r+4>>2]=be[1],i.getdents&&e===0&&s===0&&(i.getdents=null),0}catch(l){if(typeof o>"u"||!(l instanceof o.ErrnoError))throw l;return l.errno}}function vr(n){try{var e=ne.getStreamFromFD(n);return e.stream_ops&&e.stream_ops.fsync?e.stream_ops.fsync(e):0}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return s.errno}}function xr(n,e,s,r){for(var i=0,l=0;l<s;l++){var d=ye[e>>2],E=ye[e+4>>2];e+=8;var k=o.write(n,ke,d,E,r);if(k<0)return-1;i+=k,typeof r<"u"&&(r+=k)}return i}function Sr(n,e,s,r){try{var i=ne.getStreamFromFD(n),l=xr(i,e,s);return ye[r>>2]=l,0}catch(d){if(typeof o>"u"||!(d instanceof o.ErrnoError))throw d;return d.errno}}var Qt=function(n,e,s,r){n||(n=this),this.parent=n,this.mount=n.mount,this.mounted=null,this.id=o.nextInode++,this.name=e,this.mode=s,this.node_ops={},this.stream_ops={},this.rdev=r},rt=365,st=146;Object.defineProperties(Qt.prototype,{read:{get:function(){return(this.mode&rt)===rt},set:function(n){n?this.mode|=rt:this.mode&=~rt}},write:{get:function(){return(this.mode&st)===st},set:function(n){n?this.mode|=st:this.mode&=~st}},isFolder:{get:function(){return o.isDir(this.mode)}},isDevice:{get:function(){return o.isChrdev(this.mode)}}}),o.FSNode=Qt,o.staticInit();var Ht={__syscall_chmod:Ln,__syscall_faccessat:Dn,__syscall_fchmod:Cn,__syscall_fchown32:Rn,__syscall_fcntl64:Nn,__syscall_fstat64:jn,__syscall_ftruncate64:Un,__syscall_getcwd:Wn,__syscall_ioctl:Qn,__syscall_lstat64:Hn,__syscall_mkdirat:Vn,__syscall_newfstatat:Gn,__syscall_openat:$n,__syscall_readlinkat:Kn,__syscall_rmdir:Jn,__syscall_stat64:Xn,__syscall_unlinkat:Yn,__syscall_utimensat:Zn,_emscripten_get_now_is_monotonic:tr,_localtime_js:or,_mmap_js:lr,_munmap_js:ar,_tzset_js:cr,emscripten_date_now:ur,emscripten_get_now:Wt,emscripten_resize_heap:pr,environ_get:gr,environ_sizes_get:hr,fd_close:yr,fd_fdstat_get:qr,fd_read:wr,fd_seek:Er,fd_sync:vr,fd_write:Sr,memory:Ce};kn(),t.___wasm_call_ctors=function(){return(t.___wasm_call_ctors=t.asm.__wasm_call_ctors).apply(null,arguments)},t._sqlite3_status64=function(){return(t._sqlite3_status64=t.asm.sqlite3_status64).apply(null,arguments)},t._sqlite3_status=function(){return(t._sqlite3_status=t.asm.sqlite3_status).apply(null,arguments)},t._sqlite3_db_status=function(){return(t._sqlite3_db_status=t.asm.sqlite3_db_status).apply(null,arguments)},t._sqlite3_msize=function(){return(t._sqlite3_msize=t.asm.sqlite3_msize).apply(null,arguments)},t._sqlite3_vfs_find=function(){return(t._sqlite3_vfs_find=t.asm.sqlite3_vfs_find).apply(null,arguments)},t._sqlite3_initialize=function(){return(t._sqlite3_initialize=t.asm.sqlite3_initialize).apply(null,arguments)},t._sqlite3_malloc=function(){return(t._sqlite3_malloc=t.asm.sqlite3_malloc).apply(null,arguments)},t._sqlite3_free=function(){return(t._sqlite3_free=t.asm.sqlite3_free).apply(null,arguments)},t._sqlite3_vfs_register=function(){return(t._sqlite3_vfs_register=t.asm.sqlite3_vfs_register).apply(null,arguments)},t._sqlite3_vfs_unregister=function(){return(t._sqlite3_vfs_unregister=t.asm.sqlite3_vfs_unregister).apply(null,arguments)},t._sqlite3_malloc64=function(){return(t._sqlite3_malloc64=t.asm.sqlite3_malloc64).apply(null,arguments)},t._sqlite3_realloc=function(){return(t._sqlite3_realloc=t.asm.sqlite3_realloc).apply(null,arguments)},t._sqlite3_realloc64=function(){return(t._sqlite3_realloc64=t.asm.sqlite3_realloc64).apply(null,arguments)},t._sqlite3_value_text=function(){return(t._sqlite3_value_text=t.asm.sqlite3_value_text).apply(null,arguments)},t._sqlite3_randomness=function(){return(t._sqlite3_randomness=t.asm.sqlite3_randomness).apply(null,arguments)},t._sqlite3_stricmp=function(){return(t._sqlite3_stricmp=t.asm.sqlite3_stricmp).apply(null,arguments)},t._sqlite3_strnicmp=function(){return(t._sqlite3_strnicmp=t.asm.sqlite3_strnicmp).apply(null,arguments)},t._sqlite3_uri_parameter=function(){return(t._sqlite3_uri_parameter=t.asm.sqlite3_uri_parameter).apply(null,arguments)};var Vt=t.___errno_location=function(){return(Vt=t.___errno_location=t.asm.__errno_location).apply(null,arguments)};t._sqlite3_uri_boolean=function(){return(t._sqlite3_uri_boolean=t.asm.sqlite3_uri_boolean).apply(null,arguments)},t._sqlite3_serialize=function(){return(t._sqlite3_serialize=t.asm.sqlite3_serialize).apply(null,arguments)},t._sqlite3_prepare_v2=function(){return(t._sqlite3_prepare_v2=t.asm.sqlite3_prepare_v2).apply(null,arguments)},t._sqlite3_step=function(){return(t._sqlite3_step=t.asm.sqlite3_step).apply(null,arguments)},t._sqlite3_column_int64=function(){return(t._sqlite3_column_int64=t.asm.sqlite3_column_int64).apply(null,arguments)},t._sqlite3_column_int=function(){return(t._sqlite3_column_int=t.asm.sqlite3_column_int).apply(null,arguments)},t._sqlite3_finalize=function(){return(t._sqlite3_finalize=t.asm.sqlite3_finalize).apply(null,arguments)},t._sqlite3_file_control=function(){return(t._sqlite3_file_control=t.asm.sqlite3_file_control).apply(null,arguments)},t._sqlite3_reset=function(){return(t._sqlite3_reset=t.asm.sqlite3_reset).apply(null,arguments)},t._sqlite3_deserialize=function(){return(t._sqlite3_deserialize=t.asm.sqlite3_deserialize).apply(null,arguments)},t._sqlite3_clear_bindings=function(){return(t._sqlite3_clear_bindings=t.asm.sqlite3_clear_bindings).apply(null,arguments)},t._sqlite3_value_blob=function(){return(t._sqlite3_value_blob=t.asm.sqlite3_value_blob).apply(null,arguments)},t._sqlite3_value_bytes=function(){return(t._sqlite3_value_bytes=t.asm.sqlite3_value_bytes).apply(null,arguments)},t._sqlite3_value_double=function(){return(t._sqlite3_value_double=t.asm.sqlite3_value_double).apply(null,arguments)},t._sqlite3_value_int=function(){return(t._sqlite3_value_int=t.asm.sqlite3_value_int).apply(null,arguments)},t._sqlite3_value_int64=function(){return(t._sqlite3_value_int64=t.asm.sqlite3_value_int64).apply(null,arguments)},t._sqlite3_value_subtype=function(){return(t._sqlite3_value_subtype=t.asm.sqlite3_value_subtype).apply(null,arguments)},t._sqlite3_value_pointer=function(){return(t._sqlite3_value_pointer=t.asm.sqlite3_value_pointer).apply(null,arguments)},t._sqlite3_value_type=function(){return(t._sqlite3_value_type=t.asm.sqlite3_value_type).apply(null,arguments)},t._sqlite3_value_nochange=function(){return(t._sqlite3_value_nochange=t.asm.sqlite3_value_nochange).apply(null,arguments)},t._sqlite3_value_frombind=function(){return(t._sqlite3_value_frombind=t.asm.sqlite3_value_frombind).apply(null,arguments)},t._sqlite3_value_dup=function(){return(t._sqlite3_value_dup=t.asm.sqlite3_value_dup).apply(null,arguments)},t._sqlite3_value_free=function(){return(t._sqlite3_value_free=t.asm.sqlite3_value_free).apply(null,arguments)},t._sqlite3_result_blob=function(){return(t._sqlite3_result_blob=t.asm.sqlite3_result_blob).apply(null,arguments)},t._sqlite3_result_error_nomem=function(){return(t._sqlite3_result_error_nomem=t.asm.sqlite3_result_error_nomem).apply(null,arguments)},t._sqlite3_result_error_toobig=function(){return(t._sqlite3_result_error_toobig=t.asm.sqlite3_result_error_toobig).apply(null,arguments)},t._sqlite3_result_double=function(){return(t._sqlite3_result_double=t.asm.sqlite3_result_double).apply(null,arguments)},t._sqlite3_result_error=function(){return(t._sqlite3_result_error=t.asm.sqlite3_result_error).apply(null,arguments)},t._sqlite3_result_int=function(){return(t._sqlite3_result_int=t.asm.sqlite3_result_int).apply(null,arguments)},t._sqlite3_result_int64=function(){return(t._sqlite3_result_int64=t.asm.sqlite3_result_int64).apply(null,arguments)},t._sqlite3_result_null=function(){return(t._sqlite3_result_null=t.asm.sqlite3_result_null).apply(null,arguments)},t._sqlite3_result_pointer=function(){return(t._sqlite3_result_pointer=t.asm.sqlite3_result_pointer).apply(null,arguments)},t._sqlite3_result_subtype=function(){return(t._sqlite3_result_subtype=t.asm.sqlite3_result_subtype).apply(null,arguments)},t._sqlite3_result_text=function(){return(t._sqlite3_result_text=t.asm.sqlite3_result_text).apply(null,arguments)},t._sqlite3_result_zeroblob=function(){return(t._sqlite3_result_zeroblob=t.asm.sqlite3_result_zeroblob).apply(null,arguments)},t._sqlite3_result_zeroblob64=function(){return(t._sqlite3_result_zeroblob64=t.asm.sqlite3_result_zeroblob64).apply(null,arguments)},t._sqlite3_result_error_code=function(){return(t._sqlite3_result_error_code=t.asm.sqlite3_result_error_code).apply(null,arguments)},t._sqlite3_user_data=function(){return(t._sqlite3_user_data=t.asm.sqlite3_user_data).apply(null,arguments)},t._sqlite3_context_db_handle=function(){return(t._sqlite3_context_db_handle=t.asm.sqlite3_context_db_handle).apply(null,arguments)},t._sqlite3_vtab_nochange=function(){return(t._sqlite3_vtab_nochange=t.asm.sqlite3_vtab_nochange).apply(null,arguments)},t._sqlite3_vtab_in_first=function(){return(t._sqlite3_vtab_in_first=t.asm.sqlite3_vtab_in_first).apply(null,arguments)},t._sqlite3_vtab_in_next=function(){return(t._sqlite3_vtab_in_next=t.asm.sqlite3_vtab_in_next).apply(null,arguments)},t._sqlite3_aggregate_context=function(){return(t._sqlite3_aggregate_context=t.asm.sqlite3_aggregate_context).apply(null,arguments)},t._sqlite3_get_auxdata=function(){return(t._sqlite3_get_auxdata=t.asm.sqlite3_get_auxdata).apply(null,arguments)},t._sqlite3_set_auxdata=function(){return(t._sqlite3_set_auxdata=t.asm.sqlite3_set_auxdata).apply(null,arguments)},t._sqlite3_column_count=function(){return(t._sqlite3_column_count=t.asm.sqlite3_column_count).apply(null,arguments)},t._sqlite3_data_count=function(){return(t._sqlite3_data_count=t.asm.sqlite3_data_count).apply(null,arguments)},t._sqlite3_column_blob=function(){return(t._sqlite3_column_blob=t.asm.sqlite3_column_blob).apply(null,arguments)},t._sqlite3_column_bytes=function(){return(t._sqlite3_column_bytes=t.asm.sqlite3_column_bytes).apply(null,arguments)},t._sqlite3_column_double=function(){return(t._sqlite3_column_double=t.asm.sqlite3_column_double).apply(null,arguments)},t._sqlite3_column_text=function(){return(t._sqlite3_column_text=t.asm.sqlite3_column_text).apply(null,arguments)},t._sqlite3_column_value=function(){return(t._sqlite3_column_value=t.asm.sqlite3_column_value).apply(null,arguments)},t._sqlite3_column_type=function(){return(t._sqlite3_column_type=t.asm.sqlite3_column_type).apply(null,arguments)},t._sqlite3_column_name=function(){return(t._sqlite3_column_name=t.asm.sqlite3_column_name).apply(null,arguments)},t._sqlite3_bind_blob=function(){return(t._sqlite3_bind_blob=t.asm.sqlite3_bind_blob).apply(null,arguments)},t._sqlite3_bind_double=function(){return(t._sqlite3_bind_double=t.asm.sqlite3_bind_double).apply(null,arguments)},t._sqlite3_bind_int=function(){return(t._sqlite3_bind_int=t.asm.sqlite3_bind_int).apply(null,arguments)},t._sqlite3_bind_int64=function(){return(t._sqlite3_bind_int64=t.asm.sqlite3_bind_int64).apply(null,arguments)},t._sqlite3_bind_null=function(){return(t._sqlite3_bind_null=t.asm.sqlite3_bind_null).apply(null,arguments)},t._sqlite3_bind_pointer=function(){return(t._sqlite3_bind_pointer=t.asm.sqlite3_bind_pointer).apply(null,arguments)},t._sqlite3_bind_text=function(){return(t._sqlite3_bind_text=t.asm.sqlite3_bind_text).apply(null,arguments)},t._sqlite3_bind_parameter_count=function(){return(t._sqlite3_bind_parameter_count=t.asm.sqlite3_bind_parameter_count).apply(null,arguments)},t._sqlite3_bind_parameter_index=function(){return(t._sqlite3_bind_parameter_index=t.asm.sqlite3_bind_parameter_index).apply(null,arguments)},t._sqlite3_db_handle=function(){return(t._sqlite3_db_handle=t.asm.sqlite3_db_handle).apply(null,arguments)},t._sqlite3_stmt_readonly=function(){return(t._sqlite3_stmt_readonly=t.asm.sqlite3_stmt_readonly).apply(null,arguments)},t._sqlite3_stmt_isexplain=function(){return(t._sqlite3_stmt_isexplain=t.asm.sqlite3_stmt_isexplain).apply(null,arguments)},t._sqlite3_stmt_status=function(){return(t._sqlite3_stmt_status=t.asm.sqlite3_stmt_status).apply(null,arguments)},t._sqlite3_sql=function(){return(t._sqlite3_sql=t.asm.sqlite3_sql).apply(null,arguments)},t._sqlite3_expanded_sql=function(){return(t._sqlite3_expanded_sql=t.asm.sqlite3_expanded_sql).apply(null,arguments)},t._sqlite3_preupdate_old=function(){return(t._sqlite3_preupdate_old=t.asm.sqlite3_preupdate_old).apply(null,arguments)},t._sqlite3_preupdate_count=function(){return(t._sqlite3_preupdate_count=t.asm.sqlite3_preupdate_count).apply(null,arguments)},t._sqlite3_preupdate_depth=function(){return(t._sqlite3_preupdate_depth=t.asm.sqlite3_preupdate_depth).apply(null,arguments)},t._sqlite3_preupdate_blobwrite=function(){return(t._sqlite3_preupdate_blobwrite=t.asm.sqlite3_preupdate_blobwrite).apply(null,arguments)},t._sqlite3_preupdate_new=function(){return(t._sqlite3_preupdate_new=t.asm.sqlite3_preupdate_new).apply(null,arguments)},t._sqlite3_value_numeric_type=function(){return(t._sqlite3_value_numeric_type=t.asm.sqlite3_value_numeric_type).apply(null,arguments)},t._sqlite3_errmsg=function(){return(t._sqlite3_errmsg=t.asm.sqlite3_errmsg).apply(null,arguments)},t._sqlite3_set_authorizer=function(){return(t._sqlite3_set_authorizer=t.asm.sqlite3_set_authorizer).apply(null,arguments)},t._sqlite3_strglob=function(){return(t._sqlite3_strglob=t.asm.sqlite3_strglob).apply(null,arguments)},t._sqlite3_strlike=function(){return(t._sqlite3_strlike=t.asm.sqlite3_strlike).apply(null,arguments)},t._sqlite3_exec=function(){return(t._sqlite3_exec=t.asm.sqlite3_exec).apply(null,arguments)},t._sqlite3_auto_extension=function(){return(t._sqlite3_auto_extension=t.asm.sqlite3_auto_extension).apply(null,arguments)},t._sqlite3_cancel_auto_extension=function(){return(t._sqlite3_cancel_auto_extension=t.asm.sqlite3_cancel_auto_extension).apply(null,arguments)},t._sqlite3_reset_auto_extension=function(){return(t._sqlite3_reset_auto_extension=t.asm.sqlite3_reset_auto_extension).apply(null,arguments)},t._sqlite3_prepare_v3=function(){return(t._sqlite3_prepare_v3=t.asm.sqlite3_prepare_v3).apply(null,arguments)},t._sqlite3_create_module=function(){return(t._sqlite3_create_module=t.asm.sqlite3_create_module).apply(null,arguments)},t._sqlite3_create_module_v2=function(){return(t._sqlite3_create_module_v2=t.asm.sqlite3_create_module_v2).apply(null,arguments)},t._sqlite3_drop_modules=function(){return(t._sqlite3_drop_modules=t.asm.sqlite3_drop_modules).apply(null,arguments)},t._sqlite3_declare_vtab=function(){return(t._sqlite3_declare_vtab=t.asm.sqlite3_declare_vtab).apply(null,arguments)},t._sqlite3_vtab_on_conflict=function(){return(t._sqlite3_vtab_on_conflict=t.asm.sqlite3_vtab_on_conflict).apply(null,arguments)},t._sqlite3_vtab_collation=function(){return(t._sqlite3_vtab_collation=t.asm.sqlite3_vtab_collation).apply(null,arguments)},t._sqlite3_vtab_in=function(){return(t._sqlite3_vtab_in=t.asm.sqlite3_vtab_in).apply(null,arguments)},t._sqlite3_vtab_rhs_value=function(){return(t._sqlite3_vtab_rhs_value=t.asm.sqlite3_vtab_rhs_value).apply(null,arguments)},t._sqlite3_vtab_distinct=function(){return(t._sqlite3_vtab_distinct=t.asm.sqlite3_vtab_distinct).apply(null,arguments)},t._sqlite3_keyword_name=function(){return(t._sqlite3_keyword_name=t.asm.sqlite3_keyword_name).apply(null,arguments)},t._sqlite3_keyword_count=function(){return(t._sqlite3_keyword_count=t.asm.sqlite3_keyword_count).apply(null,arguments)},t._sqlite3_keyword_check=function(){return(t._sqlite3_keyword_check=t.asm.sqlite3_keyword_check).apply(null,arguments)},t._sqlite3_complete=function(){return(t._sqlite3_complete=t.asm.sqlite3_complete).apply(null,arguments)},t._sqlite3_libversion=function(){return(t._sqlite3_libversion=t.asm.sqlite3_libversion).apply(null,arguments)},t._sqlite3_libversion_number=function(){return(t._sqlite3_libversion_number=t.asm.sqlite3_libversion_number).apply(null,arguments)},t._sqlite3_shutdown=function(){return(t._sqlite3_shutdown=t.asm.sqlite3_shutdown).apply(null,arguments)},t._sqlite3_last_insert_rowid=function(){return(t._sqlite3_last_insert_rowid=t.asm.sqlite3_last_insert_rowid).apply(null,arguments)},t._sqlite3_set_last_insert_rowid=function(){return(t._sqlite3_set_last_insert_rowid=t.asm.sqlite3_set_last_insert_rowid).apply(null,arguments)},t._sqlite3_changes64=function(){return(t._sqlite3_changes64=t.asm.sqlite3_changes64).apply(null,arguments)},t._sqlite3_changes=function(){return(t._sqlite3_changes=t.asm.sqlite3_changes).apply(null,arguments)},t._sqlite3_total_changes64=function(){return(t._sqlite3_total_changes64=t.asm.sqlite3_total_changes64).apply(null,arguments)},t._sqlite3_total_changes=function(){return(t._sqlite3_total_changes=t.asm.sqlite3_total_changes).apply(null,arguments)},t._sqlite3_txn_state=function(){return(t._sqlite3_txn_state=t.asm.sqlite3_txn_state).apply(null,arguments)},t._sqlite3_close_v2=function(){return(t._sqlite3_close_v2=t.asm.sqlite3_close_v2).apply(null,arguments)},t._sqlite3_busy_handler=function(){return(t._sqlite3_busy_handler=t.asm.sqlite3_busy_handler).apply(null,arguments)},t._sqlite3_progress_handler=function(){return(t._sqlite3_progress_handler=t.asm.sqlite3_progress_handler).apply(null,arguments)},t._sqlite3_busy_timeout=function(){return(t._sqlite3_busy_timeout=t.asm.sqlite3_busy_timeout).apply(null,arguments)},t._sqlite3_create_function=function(){return(t._sqlite3_create_function=t.asm.sqlite3_create_function).apply(null,arguments)},t._sqlite3_create_function_v2=function(){return(t._sqlite3_create_function_v2=t.asm.sqlite3_create_function_v2).apply(null,arguments)},t._sqlite3_create_window_function=function(){return(t._sqlite3_create_window_function=t.asm.sqlite3_create_window_function).apply(null,arguments)},t._sqlite3_overload_function=function(){return(t._sqlite3_overload_function=t.asm.sqlite3_overload_function).apply(null,arguments)},t._sqlite3_trace_v2=function(){return(t._sqlite3_trace_v2=t.asm.sqlite3_trace_v2).apply(null,arguments)},t._sqlite3_commit_hook=function(){return(t._sqlite3_commit_hook=t.asm.sqlite3_commit_hook).apply(null,arguments)},t._sqlite3_update_hook=function(){return(t._sqlite3_update_hook=t.asm.sqlite3_update_hook).apply(null,arguments)},t._sqlite3_rollback_hook=function(){return(t._sqlite3_rollback_hook=t.asm.sqlite3_rollback_hook).apply(null,arguments)},t._sqlite3_preupdate_hook=function(){return(t._sqlite3_preupdate_hook=t.asm.sqlite3_preupdate_hook).apply(null,arguments)},t._sqlite3_error_offset=function(){return(t._sqlite3_error_offset=t.asm.sqlite3_error_offset).apply(null,arguments)},t._sqlite3_errcode=function(){return(t._sqlite3_errcode=t.asm.sqlite3_errcode).apply(null,arguments)},t._sqlite3_extended_errcode=function(){return(t._sqlite3_extended_errcode=t.asm.sqlite3_extended_errcode).apply(null,arguments)},t._sqlite3_errstr=function(){return(t._sqlite3_errstr=t.asm.sqlite3_errstr).apply(null,arguments)},t._sqlite3_limit=function(){return(t._sqlite3_limit=t.asm.sqlite3_limit).apply(null,arguments)},t._sqlite3_open=function(){return(t._sqlite3_open=t.asm.sqlite3_open).apply(null,arguments)},t._sqlite3_open_v2=function(){return(t._sqlite3_open_v2=t.asm.sqlite3_open_v2).apply(null,arguments)},t._sqlite3_create_collation=function(){return(t._sqlite3_create_collation=t.asm.sqlite3_create_collation).apply(null,arguments)},t._sqlite3_create_collation_v2=function(){return(t._sqlite3_create_collation_v2=t.asm.sqlite3_create_collation_v2).apply(null,arguments)},t._sqlite3_collation_needed=function(){return(t._sqlite3_collation_needed=t.asm.sqlite3_collation_needed).apply(null,arguments)},t._sqlite3_table_column_metadata=function(){return(t._sqlite3_table_column_metadata=t.asm.sqlite3_table_column_metadata).apply(null,arguments)},t._sqlite3_extended_result_codes=function(){return(t._sqlite3_extended_result_codes=t.asm.sqlite3_extended_result_codes).apply(null,arguments)},t._sqlite3_uri_key=function(){return(t._sqlite3_uri_key=t.asm.sqlite3_uri_key).apply(null,arguments)},t._sqlite3_uri_int64=function(){return(t._sqlite3_uri_int64=t.asm.sqlite3_uri_int64).apply(null,arguments)},t._sqlite3_db_name=function(){return(t._sqlite3_db_name=t.asm.sqlite3_db_name).apply(null,arguments)},t._sqlite3_db_filename=function(){return(t._sqlite3_db_filename=t.asm.sqlite3_db_filename).apply(null,arguments)},t._sqlite3_compileoption_used=function(){return(t._sqlite3_compileoption_used=t.asm.sqlite3_compileoption_used).apply(null,arguments)},t._sqlite3_compileoption_get=function(){return(t._sqlite3_compileoption_get=t.asm.sqlite3_compileoption_get).apply(null,arguments)},t._sqlite3session_diff=function(){return(t._sqlite3session_diff=t.asm.sqlite3session_diff).apply(null,arguments)},t._sqlite3session_attach=function(){return(t._sqlite3session_attach=t.asm.sqlite3session_attach).apply(null,arguments)},t._sqlite3session_create=function(){return(t._sqlite3session_create=t.asm.sqlite3session_create).apply(null,arguments)},t._sqlite3session_delete=function(){return(t._sqlite3session_delete=t.asm.sqlite3session_delete).apply(null,arguments)},t._sqlite3session_table_filter=function(){return(t._sqlite3session_table_filter=t.asm.sqlite3session_table_filter).apply(null,arguments)},t._sqlite3session_changeset=function(){return(t._sqlite3session_changeset=t.asm.sqlite3session_changeset).apply(null,arguments)},t._sqlite3session_changeset_strm=function(){return(t._sqlite3session_changeset_strm=t.asm.sqlite3session_changeset_strm).apply(null,arguments)},t._sqlite3session_patchset_strm=function(){return(t._sqlite3session_patchset_strm=t.asm.sqlite3session_patchset_strm).apply(null,arguments)},t._sqlite3session_patchset=function(){return(t._sqlite3session_patchset=t.asm.sqlite3session_patchset).apply(null,arguments)},t._sqlite3session_enable=function(){return(t._sqlite3session_enable=t.asm.sqlite3session_enable).apply(null,arguments)},t._sqlite3session_indirect=function(){return(t._sqlite3session_indirect=t.asm.sqlite3session_indirect).apply(null,arguments)},t._sqlite3session_isempty=function(){return(t._sqlite3session_isempty=t.asm.sqlite3session_isempty).apply(null,arguments)},t._sqlite3session_memory_used=function(){return(t._sqlite3session_memory_used=t.asm.sqlite3session_memory_used).apply(null,arguments)},t._sqlite3session_object_config=function(){return(t._sqlite3session_object_config=t.asm.sqlite3session_object_config).apply(null,arguments)},t._sqlite3session_changeset_size=function(){return(t._sqlite3session_changeset_size=t.asm.sqlite3session_changeset_size).apply(null,arguments)},t._sqlite3changeset_start=function(){return(t._sqlite3changeset_start=t.asm.sqlite3changeset_start).apply(null,arguments)},t._sqlite3changeset_start_v2=function(){return(t._sqlite3changeset_start_v2=t.asm.sqlite3changeset_start_v2).apply(null,arguments)},t._sqlite3changeset_start_strm=function(){return(t._sqlite3changeset_start_strm=t.asm.sqlite3changeset_start_strm).apply(null,arguments)},t._sqlite3changeset_start_v2_strm=function(){return(t._sqlite3changeset_start_v2_strm=t.asm.sqlite3changeset_start_v2_strm).apply(null,arguments)},t._sqlite3changeset_next=function(){return(t._sqlite3changeset_next=t.asm.sqlite3changeset_next).apply(null,arguments)},t._sqlite3changeset_op=function(){return(t._sqlite3changeset_op=t.asm.sqlite3changeset_op).apply(null,arguments)},t._sqlite3changeset_pk=function(){return(t._sqlite3changeset_pk=t.asm.sqlite3changeset_pk).apply(null,arguments)},t._sqlite3changeset_old=function(){return(t._sqlite3changeset_old=t.asm.sqlite3changeset_old).apply(null,arguments)},t._sqlite3changeset_new=function(){return(t._sqlite3changeset_new=t.asm.sqlite3changeset_new).apply(null,arguments)},t._sqlite3changeset_conflict=function(){return(t._sqlite3changeset_conflict=t.asm.sqlite3changeset_conflict).apply(null,arguments)},t._sqlite3changeset_fk_conflicts=function(){return(t._sqlite3changeset_fk_conflicts=t.asm.sqlite3changeset_fk_conflicts).apply(null,arguments)},t._sqlite3changeset_finalize=function(){return(t._sqlite3changeset_finalize=t.asm.sqlite3changeset_finalize).apply(null,arguments)},t._sqlite3changeset_invert=function(){return(t._sqlite3changeset_invert=t.asm.sqlite3changeset_invert).apply(null,arguments)},t._sqlite3changeset_invert_strm=function(){return(t._sqlite3changeset_invert_strm=t.asm.sqlite3changeset_invert_strm).apply(null,arguments)},t._sqlite3changeset_apply_v2=function(){return(t._sqlite3changeset_apply_v2=t.asm.sqlite3changeset_apply_v2).apply(null,arguments)},t._sqlite3changeset_apply=function(){return(t._sqlite3changeset_apply=t.asm.sqlite3changeset_apply).apply(null,arguments)},t._sqlite3changeset_apply_v2_strm=function(){return(t._sqlite3changeset_apply_v2_strm=t.asm.sqlite3changeset_apply_v2_strm).apply(null,arguments)},t._sqlite3changeset_apply_strm=function(){return(t._sqlite3changeset_apply_strm=t.asm.sqlite3changeset_apply_strm).apply(null,arguments)},t._sqlite3changegroup_new=function(){return(t._sqlite3changegroup_new=t.asm.sqlite3changegroup_new).apply(null,arguments)},t._sqlite3changegroup_add=function(){return(t._sqlite3changegroup_add=t.asm.sqlite3changegroup_add).apply(null,arguments)},t._sqlite3changegroup_output=function(){return(t._sqlite3changegroup_output=t.asm.sqlite3changegroup_output).apply(null,arguments)},t._sqlite3changegroup_add_strm=function(){return(t._sqlite3changegroup_add_strm=t.asm.sqlite3changegroup_add_strm).apply(null,arguments)},t._sqlite3changegroup_output_strm=function(){return(t._sqlite3changegroup_output_strm=t.asm.sqlite3changegroup_output_strm).apply(null,arguments)},t._sqlite3changegroup_delete=function(){return(t._sqlite3changegroup_delete=t.asm.sqlite3changegroup_delete).apply(null,arguments)},t._sqlite3changeset_concat=function(){return(t._sqlite3changeset_concat=t.asm.sqlite3changeset_concat).apply(null,arguments)},t._sqlite3changeset_concat_strm=function(){return(t._sqlite3changeset_concat_strm=t.asm.sqlite3changeset_concat_strm).apply(null,arguments)},t._sqlite3session_config=function(){return(t._sqlite3session_config=t.asm.sqlite3session_config).apply(null,arguments)},t._sqlite3_sourceid=function(){return(t._sqlite3_sourceid=t.asm.sqlite3_sourceid).apply(null,arguments)},t._sqlite3_wasm_pstack_ptr=function(){return(t._sqlite3_wasm_pstack_ptr=t.asm.sqlite3_wasm_pstack_ptr).apply(null,arguments)},t._sqlite3_wasm_pstack_restore=function(){return(t._sqlite3_wasm_pstack_restore=t.asm.sqlite3_wasm_pstack_restore).apply(null,arguments)},t._sqlite3_wasm_pstack_alloc=function(){return(t._sqlite3_wasm_pstack_alloc=t.asm.sqlite3_wasm_pstack_alloc).apply(null,arguments)},t._sqlite3_wasm_pstack_remaining=function(){return(t._sqlite3_wasm_pstack_remaining=t.asm.sqlite3_wasm_pstack_remaining).apply(null,arguments)},t._sqlite3_wasm_pstack_quota=function(){return(t._sqlite3_wasm_pstack_quota=t.asm.sqlite3_wasm_pstack_quota).apply(null,arguments)},t._sqlite3_wasm_db_error=function(){return(t._sqlite3_wasm_db_error=t.asm.sqlite3_wasm_db_error).apply(null,arguments)},t._sqlite3_wasm_test_struct=function(){return(t._sqlite3_wasm_test_struct=t.asm.sqlite3_wasm_test_struct).apply(null,arguments)},t._sqlite3_wasm_enum_json=function(){return(t._sqlite3_wasm_enum_json=t.asm.sqlite3_wasm_enum_json).apply(null,arguments)},t._sqlite3_wasm_vfs_unlink=function(){return(t._sqlite3_wasm_vfs_unlink=t.asm.sqlite3_wasm_vfs_unlink).apply(null,arguments)},t._sqlite3_wasm_db_vfs=function(){return(t._sqlite3_wasm_db_vfs=t.asm.sqlite3_wasm_db_vfs).apply(null,arguments)},t._sqlite3_wasm_db_reset=function(){return(t._sqlite3_wasm_db_reset=t.asm.sqlite3_wasm_db_reset).apply(null,arguments)},t._sqlite3_wasm_db_export_chunked=function(){return(t._sqlite3_wasm_db_export_chunked=t.asm.sqlite3_wasm_db_export_chunked).apply(null,arguments)},t._sqlite3_wasm_db_serialize=function(){return(t._sqlite3_wasm_db_serialize=t.asm.sqlite3_wasm_db_serialize).apply(null,arguments)},t._sqlite3_wasm_vfs_create_file=function(){return(t._sqlite3_wasm_vfs_create_file=t.asm.sqlite3_wasm_vfs_create_file).apply(null,arguments)},t._sqlite3_wasm_posix_create_file=function(){return(t._sqlite3_wasm_posix_create_file=t.asm.sqlite3_wasm_posix_create_file).apply(null,arguments)},t._sqlite3_wasm_kvvfsMakeKeyOnPstack=function(){return(t._sqlite3_wasm_kvvfsMakeKeyOnPstack=t.asm.sqlite3_wasm_kvvfsMakeKeyOnPstack).apply(null,arguments)},t._sqlite3_wasm_kvvfs_methods=function(){return(t._sqlite3_wasm_kvvfs_methods=t.asm.sqlite3_wasm_kvvfs_methods).apply(null,arguments)},t._sqlite3_wasm_vtab_config=function(){return(t._sqlite3_wasm_vtab_config=t.asm.sqlite3_wasm_vtab_config).apply(null,arguments)},t._sqlite3_wasm_db_config_ip=function(){return(t._sqlite3_wasm_db_config_ip=t.asm.sqlite3_wasm_db_config_ip).apply(null,arguments)},t._sqlite3_wasm_db_config_pii=function(){return(t._sqlite3_wasm_db_config_pii=t.asm.sqlite3_wasm_db_config_pii).apply(null,arguments)},t._sqlite3_wasm_db_config_s=function(){return(t._sqlite3_wasm_db_config_s=t.asm.sqlite3_wasm_db_config_s).apply(null,arguments)},t._sqlite3_wasm_config_i=function(){return(t._sqlite3_wasm_config_i=t.asm.sqlite3_wasm_config_i).apply(null,arguments)},t._sqlite3_wasm_config_ii=function(){return(t._sqlite3_wasm_config_ii=t.asm.sqlite3_wasm_config_ii).apply(null,arguments)},t._sqlite3_wasm_config_j=function(){return(t._sqlite3_wasm_config_j=t.asm.sqlite3_wasm_config_j).apply(null,arguments)},t._sqlite3_wasm_init_wasmfs=function(){return(t._sqlite3_wasm_init_wasmfs=t.asm.sqlite3_wasm_init_wasmfs).apply(null,arguments)},t._sqlite3_wasm_test_intptr=function(){return(t._sqlite3_wasm_test_intptr=t.asm.sqlite3_wasm_test_intptr).apply(null,arguments)},t._sqlite3_wasm_test_voidptr=function(){return(t._sqlite3_wasm_test_voidptr=t.asm.sqlite3_wasm_test_voidptr).apply(null,arguments)},t._sqlite3_wasm_test_int64_max=function(){return(t._sqlite3_wasm_test_int64_max=t.asm.sqlite3_wasm_test_int64_max).apply(null,arguments)},t._sqlite3_wasm_test_int64_min=function(){return(t._sqlite3_wasm_test_int64_min=t.asm.sqlite3_wasm_test_int64_min).apply(null,arguments)},t._sqlite3_wasm_test_int64_times2=function(){return(t._sqlite3_wasm_test_int64_times2=t.asm.sqlite3_wasm_test_int64_times2).apply(null,arguments)},t._sqlite3_wasm_test_int64_minmax=function(){return(t._sqlite3_wasm_test_int64_minmax=t.asm.sqlite3_wasm_test_int64_minmax).apply(null,arguments)},t._sqlite3_wasm_test_int64ptr=function(){return(t._sqlite3_wasm_test_int64ptr=t.asm.sqlite3_wasm_test_int64ptr).apply(null,arguments)},t._sqlite3_wasm_test_stack_overflow=function(){return(t._sqlite3_wasm_test_stack_overflow=t.asm.sqlite3_wasm_test_stack_overflow).apply(null,arguments)},t._sqlite3_wasm_test_str_hello=function(){return(t._sqlite3_wasm_test_str_hello=t.asm.sqlite3_wasm_test_str_hello).apply(null,arguments)};var Gt=t._malloc=function(){return(Gt=t._malloc=t.asm.malloc).apply(null,arguments)};t._free=function(){return(t._free=t.asm.free).apply(null,arguments)},t._realloc=function(){return(t._realloc=t.asm.realloc).apply(null,arguments)};var $t=t._emscripten_builtin_memalign=function(){return($t=t._emscripten_builtin_memalign=t.asm.emscripten_builtin_memalign).apply(null,arguments)};t.stackSave=function(){return(t.stackSave=t.asm.stackSave).apply(null,arguments)},t.stackRestore=function(){return(t.stackRestore=t.asm.stackRestore).apply(null,arguments)},t.stackAlloc=function(){return(t.stackAlloc=t.asm.stackAlloc).apply(null,arguments)},t.wasmMemory=Ce;var it;Ge=function n(){it||Kt(),it||(Ge=n)};function Kt(n){if(Ne>0||(bn(),Ne>0))return;function e(){it||(it=!0,t.calledRun=!0,!Tt&&(wn(),ce(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),En()))}t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),e()},1)):e()}if(t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return Kt(),t.postRun||(t.postRun=[]),t.postRun.push(function(n){if(globalThis.sqlite3ApiBootstrap=function e(s=globalThis.sqlite3ApiConfig||e.defaultConfig){if(e.sqlite3)return console.warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),e.sqlite3;const r=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:(()=>typeof n<"u"?!!n.HEAPU64:!!globalThis.BigInt64Array)(),debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},s||{});Object.assign(r,{allocExportName:r.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:r.useStdAlloc?"free":"sqlite3_free",reallocExportName:r.useStdAlloc?"realloc":"sqlite3_realloc"},r),["exports","memory","wasmfsOpfsDir"].forEach(c=>{typeof r[c]=="function"&&(r[c]=r[c]())});const i=Object.create(null),l=Object.create(null),d=c=>i.sqlite3_js_rc_str&&i.sqlite3_js_rc_str(c)||"Unknown result code #"+c,E=c=>typeof c=="number"&&c===(c|0);class k extends Error{constructor(...a){let g;if(a.length)if(E(a[0]))if(g=a[0],a.length===1)super(d(a[0]));else{const I=d(g);typeof a[1]=="object"?super(I,a[1]):(a[0]=I+":",super(a.join(" ")))}else a.length===2&&typeof a[1]=="object"?super(...a):super(a.join(" "));this.resultCode=g||i.SQLITE_ERROR,this.name="SQLite3Error"}}k.toss=(...c)=>{throw new k(...c)};const j=k.toss;r.wasmfsOpfsDir&&!/^\/[^/]+$/.test(r.wasmfsOpfsDir)&&j("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const H=c=>typeof c!="bigint"&&c===(c|0)&&c<=2147483647&&c>=-2147483648,Y=function c(a){return c._max||(c._max=BigInt("0x7fffffffffffffff"),c._min=~c._max),a>=c._min&&a<=c._max},S=c=>c>=-0x7fffffffn-1n&&c<=0x7fffffffn,p=function c(a){return c._min||(c._min=Number.MIN_SAFE_INTEGER,c._max=Number.MAX_SAFE_INTEGER),a>=c._min&&a<=c._max},f=c=>c&&c.constructor&&H(c.constructor.BYTES_PER_ELEMENT)?c:!1,y=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,w=c=>c.buffer instanceof y,m=(c,a,g)=>w(c)?c.slice(a,g):c.subarray(a,g),D=c=>c&&(c instanceof Uint8Array||c instanceof Int8Array||c instanceof ArrayBuffer),N=c=>c&&(c instanceof Uint8Array||c instanceof Int8Array||c instanceof ArrayBuffer),F=c=>D(c)||j("Value is not of a supported TypedArray type."),B=new TextDecoder("utf-8"),te=function(c,a,g){return B.decode(m(c,a,g))},u=function(c){return N(c)?te(c instanceof ArrayBuffer?new Uint8Array(c):c):Array.isArray(c)?c.join(""):(l.isPtr(c)&&(c=l.cstrToJs(c)),c)};class q extends Error{constructor(...a){a.length===2&&typeof a[1]=="object"?super(...a):a.length?super(a.join(" ")):super("Allocation failed."),this.resultCode=i.SQLITE_NOMEM,this.name="WasmAllocError"}}q.toss=(...c)=>{throw new q(...c)},Object.assign(i,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(c,a,g,I,z,X,Z,R,b)=>{},sqlite3_create_function:(c,a,g,I,z,X,Z,R)=>{},sqlite3_create_window_function:(c,a,g,I,z,X,Z,R,b,A)=>{},sqlite3_prepare_v3:(c,a,g,I,z,X)=>{},sqlite3_prepare_v2:(c,a,g,I,z)=>{},sqlite3_exec:(c,a,g,I,z)=>{},sqlite3_randomness:(c,a)=>{}});const v={affirmBindableTypedArray:F,flexibleString:u,bigIntFits32:S,bigIntFits64:Y,bigIntFitsDouble:p,isBindableTypedArray:D,isInt32:H,isSQLableTypedArray:N,isTypedArray:f,typedArrayToString:te,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:w,toss:function(...c){throw new Error(c.join(" "))},toss3:j,typedArrayPart:m};Object.assign(l,{ptrSizeof:r.wasmPtrSizeof||4,ptrIR:r.wasmPtrIR||"i32",bigIntEnabled:!!r.bigIntEnabled,exports:r.exports||j("Missing API config.exports (WASM module exports)."),memory:r.memory||r.exports.memory||j("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),l.allocFromTypedArray=function(c){c instanceof ArrayBuffer&&(c=new Uint8Array(c)),F(c);const a=l.alloc(c.byteLength||1);return l.heapForSize(c.constructor).set(c.byteLength?c:[0],a),a};{const c=r.allocExportName,a=r.deallocExportName,g=r.reallocExportName;for(const I of[c,a,g])l.exports[I]instanceof Function||j("Missing required exports[",I,"] function.");l.alloc=function I(z){return I.impl(z)||q.toss("Failed to allocate",z," bytes.")},l.alloc.impl=l.exports[c],l.realloc=function I(z,X){const Z=I.impl(z,X);return X?Z||q.toss("Failed to reallocate",X," bytes."):0},l.realloc.impl=l.exports[g],l.dealloc=l.exports[a]}l.compileOptionUsed=function c(a){if(arguments.length){if(Array.isArray(a)){const g={};return a.forEach(I=>{g[I]=i.sqlite3_compileoption_used(I)}),g}else if(typeof a=="object")return Object.keys(a).forEach(g=>{a[g]=i.sqlite3_compileoption_used(g)}),a}else{if(c._result)return c._result;c._opt||(c._rx=/^([^=]+)=(.+)/,c._rxInt=/^-?\d+$/,c._opt=function(Z,R){const b=c._rx.exec(Z);R[0]=b?b[1]:Z,R[1]=b?c._rxInt.test(b[2])?+b[2]:b[2]:!0});const g={},I=[0,0];let z=0,X;for(;X=i.sqlite3_compileoption_get(z++);)c._opt(X,I),g[I[0]]=I[1];return c._result=g}return typeof a=="string"?!!i.sqlite3_compileoption_used(a):!1},l.pstack=Object.assign(Object.create(null),{restore:l.exports.sqlite3_wasm_pstack_restore,alloc:function(c){return typeof c=="string"&&!(c=l.sizeofIR(c))&&q.toss("Invalid value for pstack.alloc(",arguments[0],")"),l.exports.sqlite3_wasm_pstack_alloc(c)||q.toss("Could not allocate",c,"bytes from the pstack.")},allocChunks:function(c,a){typeof a=="string"&&!(a=l.sizeofIR(a))&&q.toss("Invalid size value for allocChunks(",arguments[1],")");const g=l.pstack.alloc(c*a),I=[];let z=0,X=0;for(;z<c;++z,X+=a)I.push(g+X);return I},allocPtr:(c=1,a=!0)=>c===1?l.pstack.alloc(a?8:l.ptrSizeof):l.pstack.allocChunks(c,a?8:l.ptrSizeof)}),Object.defineProperties(l.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:l.exports.sqlite3_wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:l.exports.sqlite3_wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:l.exports.sqlite3_wasm_pstack_remaining}}),i.sqlite3_randomness=(...c)=>{if(c.length===1&&v.isTypedArray(c[0])&&c[0].BYTES_PER_ELEMENT===1){const a=c[0];if(a.byteLength===0)return l.exports.sqlite3_randomness(0,0),a;const g=l.pstack.pointer;try{let I=a.byteLength,z=0;const X=l.exports.sqlite3_randomness,Z=l.heap8u(),R=I<512?I:512,b=l.pstack.alloc(R);do{const A=I>R?R:I;X(A,b),a.set(m(Z,b,b+A),z),I-=A,z+=A}while(I>0)}catch(I){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",I)}finally{l.pstack.restore(g)}return a}l.exports.sqlite3_randomness(...c)};let M;if(i.sqlite3_wasmfs_opfs_dir=function(){if(M!==void 0)return M;const c=r.wasmfsOpfsDir;if(!c||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return M="";try{return c&&l.xCallWrapped("sqlite3_wasm_init_wasmfs","i32",["string"],c)===0?M=c:M=""}catch{return M=""}},i.sqlite3_wasmfs_filename_is_persistent=function(c){const a=i.sqlite3_wasmfs_opfs_dir();return a&&c?c.startsWith(a+"/"):!1},i.sqlite3_js_db_uses_vfs=function(c,a,g=0){try{const I=i.sqlite3_vfs_find(a);return I?c?I===i.sqlite3_js_db_vfs(c,g)?I:!1:I===i.sqlite3_vfs_find(0)?I:!1:!1}catch{return!1}},i.sqlite3_js_vfs_list=function(){const c=[];let a=i.sqlite3_vfs_find(0);for(;a;){const g=new i.sqlite3_vfs(a);c.push(l.cstrToJs(g.$zName)),a=g.$pNext,g.dispose()}return c},i.sqlite3_js_db_export=function(c,a=0){c=l.xWrap.testConvertArg("sqlite3*",c),c||j("Invalid sqlite3* argument."),l.bigIntEnabled||j("BigInt64 support is not enabled.");const g=l.scopedAllocPush();let I;try{const z=l.scopedAlloc(8+l.ptrSizeof),X=z+8,Z=a?l.isPtr(a)?a:l.scopedAllocCString(""+a):0;let R=l.exports.sqlite3_wasm_db_serialize(c,Z,X,z,0);R&&j("Database serialization failed with code",h.capi.sqlite3_js_rc_str(R)),I=l.peekPtr(X);const b=l.peek(z,"i64");return R=b?l.heap8u().slice(I,I+Number(b)):new Uint8Array,R}finally{I&&l.exports.sqlite3_free(I),l.scopedAllocPop(g)}},i.sqlite3_js_db_vfs=(c,a=0)=>l.sqlite3_wasm_db_vfs(c,a),i.sqlite3_js_aggregate_context=(c,a)=>i.sqlite3_aggregate_context(c,a)||(a?q.toss("Cannot allocate",a,"bytes for sqlite3_aggregate_context()"):0),i.sqlite3_js_posix_create_file=function(c,a,g){let I;a&&l.isPtr(a)?I=a:a instanceof ArrayBuffer||a instanceof Uint8Array?(I=l.allocFromTypedArray(a),(arguments.length<3||!v.isInt32(g)||g<0)&&(g=a.byteLength)):k.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!v.isInt32(g)||g<0)&&k.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const z=l.sqlite3_wasm_posix_create_file(c,I,g);z&&k.toss("Creation of file failed with sqlite3 result code",i.sqlite3_js_rc_str(z))}finally{l.dealloc(I)}},i.sqlite3_js_vfs_create_file=function(c,a,g,I){r.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let z;g?(l.isPtr(g)?z=g:g instanceof ArrayBuffer&&(g=new Uint8Array(g)),g instanceof Uint8Array?(z=l.allocFromTypedArray(g),(arguments.length<4||!v.isInt32(I)||I<0)&&(I=g.byteLength)):k.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):z=0,(!v.isInt32(I)||I<0)&&(l.dealloc(z),k.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const X=l.sqlite3_wasm_vfs_create_file(c,a,z,I);X&&k.toss("Creation of file failed with sqlite3 result code",i.sqlite3_js_rc_str(X))}finally{l.dealloc(z)}},v.isUIThread()){const c=function(a){const g=Object.create(null);return g.prefix="kvvfs-"+a,g.stores=[],(a==="session"||a==="")&&g.stores.push(globalThis.sessionStorage),(a==="local"||a==="")&&g.stores.push(globalThis.localStorage),g};i.sqlite3_js_kvvfs_clear=function(a=""){let g=0;const I=c(a);return I.stores.forEach(z=>{const X=[];let Z;for(Z=0;Z<z.length;++Z){const R=z.key(Z);R.startsWith(I.prefix)&&X.push(R)}X.forEach(R=>z.removeItem(R)),g+=X.length}),g},i.sqlite3_js_kvvfs_size=function(a=""){let g=0;const I=c(a);return I.stores.forEach(z=>{let X;for(X=0;X<z.length;++X){const Z=z.key(X);Z.startsWith(I.prefix)&&(g+=Z.length,g+=z.getItem(Z).length)}}),g*2}}i.sqlite3_db_config=function(c,a,...g){switch(this.s||(this.s=l.xWrap("sqlite3_wasm_db_config_s","int",["sqlite3*","int","string:static"]),this.pii=l.xWrap("sqlite3_wasm_db_config_pii","int",["sqlite3*","int","*","int","int"]),this.ip=l.xWrap("sqlite3_wasm_db_config_ip","int",["sqlite3*","int","int","*"])),a){case i.SQLITE_DBCONFIG_ENABLE_FKEY:case i.SQLITE_DBCONFIG_ENABLE_TRIGGER:case i.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case i.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case i.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case i.SQLITE_DBCONFIG_ENABLE_QPSG:case i.SQLITE_DBCONFIG_TRIGGER_EQP:case i.SQLITE_DBCONFIG_RESET_DATABASE:case i.SQLITE_DBCONFIG_DEFENSIVE:case i.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case i.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case i.SQLITE_DBCONFIG_DQS_DML:case i.SQLITE_DBCONFIG_DQS_DDL:case i.SQLITE_DBCONFIG_ENABLE_VIEW:case i.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case i.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case i.SQLITE_DBCONFIG_STMT_SCANSTATUS:case i.SQLITE_DBCONFIG_REVERSE_SCANORDER:return this.ip(c,a,g[0],g[1]||0);case i.SQLITE_DBCONFIG_LOOKASIDE:return this.pii(c,a,g[0],g[1],g[2]);case i.SQLITE_DBCONFIG_MAINDBNAME:return this.s(c,a,g[0]);default:return i.SQLITE_MISUSE}}.bind(Object.create(null)),i.sqlite3_value_to_js=function(c,a=!0){let g;const I=i.sqlite3_value_type(c);switch(I){case i.SQLITE_INTEGER:l.bigIntEnabled?(g=i.sqlite3_value_int64(c),v.bigIntFitsDouble(g)&&(g=Number(g))):g=i.sqlite3_value_double(c);break;case i.SQLITE_FLOAT:g=i.sqlite3_value_double(c);break;case i.SQLITE_TEXT:g=i.sqlite3_value_text(c);break;case i.SQLITE_BLOB:{const z=i.sqlite3_value_bytes(c),X=i.sqlite3_value_blob(c);z&&!X&&h.WasmAllocError.toss("Cannot allocate memory for blob argument of",z,"byte(s)"),g=z?l.heap8u().slice(X,X+Number(z)):null;break}case i.SQLITE_NULL:g=null;break;default:a&&j(i.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",I),g=void 0}return g},i.sqlite3_values_to_js=function(c,a,g=!0){let I;const z=[];for(I=0;I<c;++I)z.push(i.sqlite3_value_to_js(l.peekPtr(a+l.ptrSizeof*I),g));return z},i.sqlite3_result_error_js=function(c,a){a instanceof q?i.sqlite3_result_error_nomem(c):i.sqlite3_result_error(c,""+a,-1)},i.sqlite3_result_js=function(c,a){if(a instanceof Error){i.sqlite3_result_error_js(c,a);return}try{switch(typeof a){case"undefined":break;case"boolean":i.sqlite3_result_int(c,a?1:0);break;case"bigint":v.bigIntFits32(a)?i.sqlite3_result_int(c,Number(a)):v.bigIntFitsDouble(a)?i.sqlite3_result_double(c,Number(a)):l.bigIntEnabled?v.bigIntFits64(a)?i.sqlite3_result_int64(c,a):j("BigInt value",a.toString(),"is too BigInt for int64."):j("BigInt value",a.toString(),"is too BigInt.");break;case"number":{let g;v.isInt32(a)?g=i.sqlite3_result_int:l.bigIntEnabled&&Number.isInteger(a)&&v.bigIntFits64(BigInt(a))?g=i.sqlite3_result_int64:g=i.sqlite3_result_double,g(c,a);break}case"string":{const[g,I]=l.allocCString(a,!0);i.sqlite3_result_text(c,g,I,i.SQLITE_WASM_DEALLOC);break}case"object":if(a===null){i.sqlite3_result_null(c);break}else if(v.isBindableTypedArray(a)){const g=l.allocFromTypedArray(a);i.sqlite3_result_blob(c,g,a.byteLength,i.SQLITE_WASM_DEALLOC);break}default:j("Don't not how to handle this UDF result value:",typeof a,a)}}catch(g){i.sqlite3_result_error_js(c,g)}},i.sqlite3_column_js=function(c,a,g=!0){const I=i.sqlite3_column_value(c,a);return I===0?void 0:i.sqlite3_value_to_js(I,g)};const _=function(c,a,g){g=i[g],this.ptr?l.pokePtr(this.ptr,0):this.ptr=l.allocPtr();const I=g(c,a,this.ptr);if(I)return k.toss(I,arguments[2]+"() failed with code "+I);const z=l.peekPtr(this.ptr);return z?i.sqlite3_value_to_js(z,!0):void 0}.bind(Object.create(null));i.sqlite3_preupdate_new_js=(c,a)=>_(c,a,"sqlite3_preupdate_new"),i.sqlite3_preupdate_old_js=(c,a)=>_(c,a,"sqlite3_preupdate_old"),i.sqlite3changeset_new_js=(c,a)=>_(c,a,"sqlite3changeset_new"),i.sqlite3changeset_old_js=(c,a)=>_(c,a,"sqlite3changeset_old");const h={WasmAllocError:q,SQLite3Error:k,capi:i,util:v,wasm:l,config:r,version:Object.create(null),client:void 0,asyncPostInit:async function c(){if(c.isReady instanceof Promise)return c.isReady;let a=e.initializersAsync;delete e.initializersAsync;const g=async()=>(h.__isUnderTest||(delete h.util,delete h.StructBinder),h),I=X=>{throw r.error("an async sqlite3 initializer failed:",X),X};if(!a||!a.length)return c.isReady=g().catch(I);a=a.map(X=>X instanceof Function?async Z=>X(h):X),a.push(g);let z=Promise.resolve(h);for(;a.length;)z=z.then(a.shift());return c.isReady=z.catch(I)},scriptInfo:void 0};try{e.initializers.forEach(c=>{c(h)})}catch(c){throw console.error("sqlite3 bootstrap initializer threw:",c),c}return delete e.initializers,e.sqlite3=h,h},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(e){e.bigIntEnabled===void 0&&(e.bigIntEnabled=!!globalThis.BigInt64Array);const s=(...u)=>{throw new Error(u.join(" "))};e.exports||Object.defineProperty(e,"exports",{enumerable:!0,configurable:!0,get:()=>e.instance&&e.instance.exports});const r=e.pointerIR||"i32",i=e.ptrSizeof=r==="i32"?4:r==="i64"?8:s("Unhandled ptrSizeof:",r),l=Object.create(null);l.heapSize=0,l.memory=null,l.freeFuncIndexes=[],l.scopedAlloc=[],l.utf8Decoder=new TextDecoder,l.utf8Encoder=new TextEncoder("utf-8"),e.sizeofIR=u=>{switch(u){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return i;default:return(""+u).endsWith("*")?i:void 0}};const d=function(){if(!l.memory)l.memory=e.memory instanceof WebAssembly.Memory?e.memory:e.exports.memory;else if(l.heapSize===l.memory.buffer.byteLength)return l;const u=l.memory.buffer;return l.HEAP8=new Int8Array(u),l.HEAP8U=new Uint8Array(u),l.HEAP16=new Int16Array(u),l.HEAP16U=new Uint16Array(u),l.HEAP32=new Int32Array(u),l.HEAP32U=new Uint32Array(u),e.bigIntEnabled&&(l.HEAP64=new BigInt64Array(u),l.HEAP64U=new BigUint64Array(u)),l.HEAP32F=new Float32Array(u),l.HEAP64F=new Float64Array(u),l.heapSize=u.byteLength,l};e.heap8=()=>d().HEAP8,e.heap8u=()=>d().HEAP8U,e.heap16=()=>d().HEAP16,e.heap16u=()=>d().HEAP16U,e.heap32=()=>d().HEAP32,e.heap32u=()=>d().HEAP32U,e.heapForSize=function(u,q=!0){const v=l.memory&&l.heapSize===l.memory.buffer.byteLength?l:d();switch(u){case Int8Array:return v.HEAP8;case Uint8Array:return v.HEAP8U;case Int16Array:return v.HEAP16;case Uint16Array:return v.HEAP16U;case Int32Array:return v.HEAP32;case Uint32Array:return v.HEAP32U;case 8:return q?v.HEAP8U:v.HEAP8;case 16:return q?v.HEAP16U:v.HEAP16;case 32:return q?v.HEAP32U:v.HEAP32;case 64:if(v.HEAP64)return q?v.HEAP64U:v.HEAP64;break;default:if(e.bigIntEnabled){if(u===globalThis.BigUint64Array)return v.HEAP64U;if(u===globalThis.BigInt64Array)return v.HEAP64;break}}s("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},e.functionTable=function(){return e.exports.__indirect_function_table},e.functionEntry=function(u){const q=e.functionTable();return u<q.length?q.get(u):void 0},e.jsFuncToWasm=function u(q,v){if(u._||(u._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(h,c,a){a<128?h[c](a):h[c](a%128|128,a>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(h){const c=u._.rxJSig.exec(h);return c?c[2]:h.substr(1)},letterType:h=>u._.sigTypes[h]||s("Invalid signature letter:",h),pushSigType:(h,c)=>h.push(u._.typeCodes[u._.letterType(c)])}),typeof q=="string"){const h=v;v=q,q=h}const M=u._.sigParams(v),_=[1,96];u._.uleb128Encode(_,"push",M.length);for(const h of M)u._.pushSigType(_,h);return v[0]==="v"?_.push(0):(_.push(1),u._.pushSigType(_,v[0])),u._.uleb128Encode(_,"unshift",_.length),_.unshift(0,97,115,109,1,0,0,0,1),_.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(_)),{e:{f:q}}).exports.f};const E=function(q,v,M){if(M&&!l.scopedAlloc.length&&s("No scopedAllocPush() scope is active."),typeof q=="string"){const a=v;v=q,q=a}(typeof v!="string"||!(q instanceof Function))&&s("Invalid arguments: expecting (function,signature) or (signature,function).");const _=e.functionTable(),h=_.length;let c;for(;l.freeFuncIndexes.length&&(c=l.freeFuncIndexes.pop(),_.get(c));){c=null;continue}c||(c=h,_.grow(1));try{return _.set(c,q),M&&l.scopedAlloc[l.scopedAlloc.length-1].push(c),c}catch(a){if(!(a instanceof TypeError))throw c===h&&l.freeFuncIndexes.push(h),a}try{const a=e.jsFuncToWasm(q,v);_.set(c,a),M&&l.scopedAlloc[l.scopedAlloc.length-1].push(c)}catch(a){throw c===h&&l.freeFuncIndexes.push(h),a}return c};e.installFunction=(u,q)=>E(u,q,!1),e.scopedInstallFunction=(u,q)=>E(u,q,!0),e.uninstallFunction=function(u){if(!u&&u!==0)return;const q=l.freeFuncIndexes,v=e.functionTable();q.push(u);const M=v.get(u);return v.set(u,null),M},e.peek=function(q,v="i8"){v.endsWith("*")&&(v=r);const M=l.memory&&l.heapSize===l.memory.buffer.byteLength?l:d(),_=Array.isArray(q)?[]:void 0;let h;do{switch(_&&(q=arguments[0].shift()),v){case"i1":case"i8":h=M.HEAP8[q>>0];break;case"i16":h=M.HEAP16[q>>1];break;case"i32":h=M.HEAP32[q>>2];break;case"float":case"f32":h=M.HEAP32F[q>>2];break;case"double":case"f64":h=Number(M.HEAP64F[q>>3]);break;case"i64":if(e.bigIntEnabled){h=BigInt(M.HEAP64[q>>3]);break}default:s("Invalid type for peek():",v)}_&&_.push(h)}while(_&&arguments[0].length);return _||h},e.poke=function(u,q,v="i8"){v.endsWith("*")&&(v=r);const M=l.memory&&l.heapSize===l.memory.buffer.byteLength?l:d();for(const _ of Array.isArray(u)?u:[u])switch(v){case"i1":case"i8":M.HEAP8[_>>0]=q;continue;case"i16":M.HEAP16[_>>1]=q;continue;case"i32":M.HEAP32[_>>2]=q;continue;case"float":case"f32":M.HEAP32F[_>>2]=q;continue;case"double":case"f64":M.HEAP64F[_>>3]=q;continue;case"i64":if(M.HEAP64){M.HEAP64[_>>3]=BigInt(q);continue}default:s("Invalid type for poke(): "+v)}return this},e.peekPtr=(...u)=>e.peek(u.length===1?u[0]:u,r),e.pokePtr=(u,q=0)=>e.poke(u,q,r),e.peek8=(...u)=>e.peek(u.length===1?u[0]:u,"i8"),e.poke8=(u,q)=>e.poke(u,q,"i8"),e.peek16=(...u)=>e.peek(u.length===1?u[0]:u,"i16"),e.poke16=(u,q)=>e.poke(u,q,"i16"),e.peek32=(...u)=>e.peek(u.length===1?u[0]:u,"i32"),e.poke32=(u,q)=>e.poke(u,q,"i32"),e.peek64=(...u)=>e.peek(u.length===1?u[0]:u,"i64"),e.poke64=(u,q)=>e.poke(u,q,"i64"),e.peek32f=(...u)=>e.peek(u.length===1?u[0]:u,"f32"),e.poke32f=(u,q)=>e.poke(u,q,"f32"),e.peek64f=(...u)=>e.peek(u.length===1?u[0]:u,"f64"),e.poke64f=(u,q)=>e.poke(u,q,"f64"),e.getMemValue=e.peek,e.getPtrValue=e.peekPtr,e.setMemValue=e.poke,e.setPtrValue=e.pokePtr,e.isPtr32=u=>typeof u=="number"&&u===(u|0)&&u>=0,e.isPtr=e.isPtr32,e.cstrlen=function(u){if(!u||!e.isPtr(u))return null;const q=d().HEAP8U;let v=u;for(;q[v]!==0;++v);return v-u};const k=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,j=function(u,q,v){return l.utf8Decoder.decode(u.buffer instanceof k?u.slice(q,v):u.subarray(q,v))};e.cstrToJs=function(u){const q=e.cstrlen(u);return q?j(d().HEAP8U,u,u+q):q===null?q:""},e.jstrlen=function(u){if(typeof u!="string")return null;const q=u.length;let v=0;for(let M=0;M<q;++M){let _=u.charCodeAt(M);_>=55296&&_<=57343&&(_=65536+((_&1023)<<10)|u.charCodeAt(++M)&1023),_<=127?++v:_<=2047?v+=2:_<=65535?v+=3:v+=4}return v},e.jstrcpy=function(u,q,v=0,M=-1,_=!0){if((!q||!(q instanceof Int8Array)&&!(q instanceof Uint8Array))&&s("jstrcpy() target must be an Int8Array or Uint8Array."),M<0&&(M=q.length-v),!(M>0)||!(v>=0))return 0;let h=0,c=u.length;const a=v,g=v+M-(_?1:0);for(;h<c&&v<g;++h){let I=u.charCodeAt(h);if(I>=55296&&I<=57343&&(I=65536+((I&1023)<<10)|u.charCodeAt(++h)&1023),I<=127){if(v>=g)break;q[v++]=I}else if(I<=2047){if(v+1>=g)break;q[v++]=192|I>>6,q[v++]=128|I&63}else if(I<=65535){if(v+2>=g)break;q[v++]=224|I>>12,q[v++]=128|I>>6&63,q[v++]=128|I&63}else{if(v+3>=g)break;q[v++]=240|I>>18,q[v++]=128|I>>12&63,q[v++]=128|I>>6&63,q[v++]=128|I&63}}return _&&(q[v++]=0),v-a},e.cstrncpy=function(u,q,v){if((!u||!q)&&s("cstrncpy() does not accept NULL strings."),v<0)v=e.cstrlen(strPtr)+1;else if(!(v>0))return 0;const M=e.heap8u();let _=0,h;for(;_<v&&(h=M[q+_]);++_)M[u+_]=h;return _<v&&(M[u+_++]=0),_},e.jstrToUintArray=(u,q=!1)=>l.utf8Encoder.encode(q?u+"\0":u);const H=(u,q)=>{(!(u.alloc instanceof Function)||!(u.dealloc instanceof Function))&&s("Object is missing alloc() and/or dealloc() function(s)","required by",q+"().")},Y=function(u,q,v,M){if(H(e,M),typeof u!="string")return null;{const _=l.utf8Encoder.encode(u),h=v(_.length+1),c=d().HEAP8U;return c.set(_,h),c[h+_.length]=0,q?[h,_.length]:h}};e.allocCString=(u,q=!1)=>Y(u,q,e.alloc,"allocCString()"),e.scopedAllocPush=function(){H(e,"scopedAllocPush");const u=[];return l.scopedAlloc.push(u),u},e.scopedAllocPop=function(u){H(e,"scopedAllocPop");const q=arguments.length?l.scopedAlloc.indexOf(u):l.scopedAlloc.length-1;q<0&&s("Invalid state object for scopedAllocPop()."),arguments.length===0&&(u=l.scopedAlloc[q]),l.scopedAlloc.splice(q,1);for(let v;v=u.pop();)e.functionEntry(v)?e.uninstallFunction(v):e.dealloc(v)},e.scopedAlloc=function(u){l.scopedAlloc.length||s("No scopedAllocPush() scope is active.");const q=e.alloc(u);return l.scopedAlloc[l.scopedAlloc.length-1].push(q),q},Object.defineProperty(e.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>l.scopedAlloc.length,set:()=>s("The 'active' property is read-only.")}),e.scopedAllocCString=(u,q=!1)=>Y(u,q,e.scopedAlloc,"scopedAllocCString()");const S=function(u,q){const v=e[u?"scopedAlloc":"alloc"]((q.length+1)*e.ptrSizeof);let M=0;return q.forEach(_=>{e.pokePtr(v+e.ptrSizeof*M++,e[u?"scopedAllocCString":"allocCString"](""+_))}),e.pokePtr(v+e.ptrSizeof*M,0),v};e.scopedAllocMainArgv=u=>S(!0,u),e.allocMainArgv=u=>S(!1,u),e.cArgvToJs=(u,q)=>{const v=[];for(let M=0;M<u;++M){const _=e.peekPtr(q+e.ptrSizeof*M);v.push(_?e.cstrToJs(_):null)}return v},e.scopedAllocCall=function(u){e.scopedAllocPush();try{return u()}finally{e.scopedAllocPop()}};const p=function(u,q,v){H(e,v);const M=q?"i64":r;let _=e[v](u*(q?8:i));if(e.poke(_,0,M),u===1)return _;const h=[_];for(let c=1;c<u;++c)_+=q?8:i,h[c]=_,e.poke(_,0,M);return h};e.allocPtr=(u=1,q=!0)=>p(u,q,"alloc"),e.scopedAllocPtr=(u=1,q=!0)=>p(u,q,"scopedAlloc"),e.xGet=function(u){return e.exports[u]||s("Cannot find exported symbol:",u)};const f=(u,q)=>s(u+"() requires",q,"argument(s).");e.xCall=function(u,...q){const v=e.xGet(u);return v instanceof Function||s("Exported symbol",u,"is not a function."),v.length!==q.length&&f(u,v.length),arguments.length===2&&Array.isArray(arguments[1])?v.apply(null,arguments[1]):v.apply(null,q)},l.xWrap=Object.create(null),l.xWrap.convert=Object.create(null),l.xWrap.convert.arg=new Map,l.xWrap.convert.result=new Map;const y=l.xWrap.convert.arg,w=l.xWrap.convert.result;e.bigIntEnabled&&y.set("i64",u=>BigInt(u));const m=r==="i32"?u=>u|0:u=>BigInt(u)|BigInt(0);y.set("i32",m).set("i16",u=>(u|0)&65535).set("i8",u=>(u|0)&255).set("f32",u=>Number(u).valueOf()).set("float",y.get("f32")).set("f64",y.get("f32")).set("double",y.get("f64")).set("int",y.get("i32")).set("null",u=>u).set(null,y.get("null")).set("**",m).set("*",m),w.set("*",m).set("pointer",m).set("number",u=>Number(u)).set("void",u=>{}).set("null",u=>u).set(null,w.get("null"));{const u=["i8","i16","i32","int","f32","float","f64","double"];e.bigIntEnabled&&u.push("i64");const q=y.get(r);for(const v of u)y.set(v+"*",q),w.set(v+"*",q),w.set(v,y.get(v)||s("Missing arg converter:",v))}const D=function(u){return typeof u=="string"?e.scopedAllocCString(u):u?m(u):null};y.set("string",D).set("utf8",D).set("pointer",D),w.set("string",u=>e.cstrToJs(u)).set("utf8",w.get("string")).set("string:dealloc",u=>{try{return u?e.cstrToJs(u):null}finally{e.dealloc(u)}}).set("utf8:dealloc",w.get("string:dealloc")).set("json",u=>JSON.parse(e.cstrToJs(u))).set("json:dealloc",u=>{try{return u?JSON.parse(e.cstrToJs(u)):null}finally{e.dealloc(u)}});const N=class{constructor(u){this.name=u.name||"unnamed adapter"}convertArg(u,q,v){s("AbstractArgAdapter must be subclassed.")}};y.FuncPtrAdapter=class Le extends N{constructor(q){super(q),y.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",q),this.name=q.name||"unnamed",this.signature=q.signature,q.contextKey instanceof Function&&(this.contextKey=q.contextKey,q.bindScope||(q.bindScope="context")),this.bindScope=q.bindScope||s("FuncPtrAdapter options requires a bindScope (explicit or implied)."),Le.bindScopes.indexOf(q.bindScope)<0&&s("Invalid options.bindScope ("+q.bindMod+") for FuncPtrAdapter. Expecting one of: ("+Le.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=q.callProxy instanceof Function?q.callProxy:void 0}contextKey(q,v){return this}contextMap(q){const v=this.__cmap||(this.__cmap=new Map);let M=v.get(q);return M===void 0&&v.set(q,M=[]),M}convertArg(q,v,M){let _=this.singleton;if(!_&&this.isContext&&(_=this.contextMap(this.contextKey(v,M))),_&&_[0]===q)return _[1];if(q instanceof Function){this.callProxy&&(q=this.callProxy(q));const h=E(q,this.signature,this.isTransient);if(Le.debugFuncInstall&&Le.debugOut("FuncPtrAdapter installed",this,this.contextKey(v,M),"@"+h,q),_){if(_[1]){Le.debugFuncInstall&&Le.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(v,M),"@"+_[1],q);try{l.scopedAlloc[l.scopedAlloc.length-1].push(_[1])}catch{}}_[0]=q,_[1]=h}return h}else if(e.isPtr(q)||q===null||q===void 0){if(_&&_[1]&&_[1]!==q){Le.debugFuncInstall&&Le.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(v,M),"@"+_[1],q);try{l.scopedAlloc[l.scopedAlloc.length-1].push(_[1])}catch{}_[0]=_[1]=q|0}return q||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},y.FuncPtrAdapter.warnOnUse=!1,y.FuncPtrAdapter.debugFuncInstall=!1,y.FuncPtrAdapter.debugOut=console.debug.bind(console),y.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const F=u=>y.get(u)||s("Argument adapter not found:",u),B=u=>w.get(u)||s("Result adapter not found:",u);l.xWrap.convertArg=(u,...q)=>F(u)(...q),l.xWrap.convertArgNoCheck=(u,...q)=>y.get(u)(...q),l.xWrap.convertResult=(u,q)=>u===null?q:u?B(u)(q):void 0,l.xWrap.convertResultNoCheck=(u,q)=>u===null?q:u?w.get(u)(q):void 0,e.xWrap=function(u,q,...v){arguments.length===3&&Array.isArray(arguments[2])&&(v=arguments[2]),e.isPtr(u)&&(u=e.functionEntry(u)||s("Function pointer not found in WASM function table."));const M=u instanceof Function,_=M?u:e.xGet(u);if(M&&(u=_.name||"unnamed function"),v.length!==_.length&&f(u,_.length),q===null&&_.length===0)return _;q!=null&&B(q);for(const c of v)c instanceof N?y.set(c,(...a)=>c.convertArg(...a)):F(c);const h=l.xWrap;return _.length===0?(...c)=>c.length?f(u,_.length):h.convertResult(q,_.call(null)):function(...c){c.length!==_.length&&f(u,_.length);const a=e.scopedAllocPush();try{for(const g in c)c[g]=h.convertArgNoCheck(v[g],c[g],c,g);return h.convertResultNoCheck(q,_.apply(null,c))}finally{e.scopedAllocPop(a)}}};const te=function(u,q,v,M,_,h){if(typeof v=="string"){if(q===1)return h.get(v);if(q===2){if(M)M instanceof Function||s(_,"requires a function argument.");else return delete h.get(v),u;return h.set(v,M),u}}s("Invalid arguments to",_)};return e.xWrap.resultAdapter=function u(q,v){return te(u,arguments.length,q,v,"resultAdapter()",w)},e.xWrap.argAdapter=function u(q,v){return te(u,arguments.length,q,v,"argAdapter()",y)},e.xWrap.FuncPtrAdapter=y.FuncPtrAdapter,e.xCallWrapped=function(u,q,v,...M){return Array.isArray(arguments[3])&&(M=arguments[3]),e.xWrap(u,q,v||[]).apply(null,M||[])},e.xWrap.testConvertArg=l.xWrap.convertArg,e.xWrap.testConvertResult=l.xWrap.convertResult,e},globalThis.WhWasmUtilInstaller.yawl=function(e){const s=()=>fetch(e.uri,{credentials:"same-origin"}),r=this,i=function(d){if(e.wasmUtilTarget){const E=(...j)=>{throw new Error(j.join(" "))},k=e.wasmUtilTarget;if(k.module=d.module,k.instance=d.instance,k.instance.exports.memory||(k.memory=e.imports&&e.imports.env&&e.imports.env.memory||E("Missing 'memory' object!")),!k.alloc&&d.instance.exports.malloc){const j=d.instance.exports;k.alloc=function(H){return j.malloc(H)||E("Allocation of",H,"bytes failed.")},k.dealloc=function(H){j.free(H)}}r(k)}return e.onload&&e.onload(d,e),d};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(s(),e.imports||{}).then(i)}:function(){return s().then(E=>E.arrayBuffer()).then(E=>WebAssembly.instantiate(E,e.imports||{})).then(i)}}.bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function e(s){const r=(...T)=>{throw new Error(T.join(" "))};!(s.heap instanceof WebAssembly.Memory)&&!(s.heap instanceof Function)&&r("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(T){s[T]instanceof Function||r("Config option '"+T+"' must be a function.")});const i=e,l=s.heap instanceof Function?s.heap:()=>new Uint8Array(s.heap.buffer),d=s.alloc,E=s.dealloc,k=s.log||console.log.bind(console),j=s.memberPrefix||"",H=s.memberSuffix||"",Y=s.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!s.bigIntEnabled,S=globalThis.BigInt,p=globalThis.BigInt64Array,f=s.ptrSizeof||4,y=s.ptrIR||"i32";i.debugFlags||(i.__makeDebugFlags=function(T=null){T&&T.__flags&&(T=T.__flags);const W=function V(J){return arguments.length===0?V.__flags:(J<0?(delete V.__flags.getter,delete V.__flags.setter,delete V.__flags.alloc,delete V.__flags.dealloc):(V.__flags.getter=(1&J)!==0,V.__flags.setter=(2&J)!==0,V.__flags.alloc=(4&J)!==0,V.__flags.dealloc=(8&J)!==0),V._flags)};return Object.defineProperty(W,"__flags",{iterable:!1,writable:!1,value:Object.create(T)}),T||W(0),W},i.debugFlags=i.__makeDebugFlags());const w=function(){const T=new ArrayBuffer(2);return new DataView(T).setInt16(0,256,!0),new Int16Array(T)[0]===256}(),m=T=>T[1]==="(",D=T=>T==="P",N=T=>m(T)?"p":T[0],F=function(T){switch(N(T)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return y;case"j":return"i64";case"f":return"float";case"d":return"double"}r("Unhandled signature IR:",T)},B=p?()=>!0:()=>r("BigInt64Array is not available."),te=function(T){switch(N(T)){case"p":case"P":case"s":{switch(f){case 4:return"getInt32";case 8:return B()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return B()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}r("Unhandled DataView getter for signature:",T)},u=function(T){switch(N(T)){case"p":case"P":case"s":{switch(f){case 4:return"setInt32";case 8:return B()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return B()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}r("Unhandled DataView setter for signature:",T)},q=function(T){switch(N(T)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return B()&&S;case"p":case"P":case"s":switch(f){case 4:return Number;case 8:return B()&&S}break}r("Unhandled DataView set wrapper for signature:",T)},v=(T,W)=>T+"::"+W,M=function(T,W){return()=>r(v(T,W),"is read-only.")},_=new WeakMap,h="(pointer-is-external)",c=function(T,W,V){if(V||(V=_.get(W)),V){if(_.delete(W),Array.isArray(W.ondispose)){let J;for(;J=W.ondispose.shift();)try{J instanceof Function?J.call(W):J instanceof G?J.dispose():typeof J=="number"&&E(J)}catch(_e){console.warn("ondispose() for",T.structName,"@",V,"threw. NOT propagating it.",_e)}}else if(W.ondispose instanceof Function)try{W.ondispose()}catch(J){console.warn("ondispose() for",T.structName,"@",V,"threw. NOT propagating it.",J)}delete W.ondispose,T.debugFlags.__flags.dealloc&&k("debug.dealloc:",W[h]?"EXTERNAL":"",T.structName,"instance:",T.structInfo.sizeof,"bytes @"+V),W[h]||E(V)}},a=T=>({configurable:!1,writable:!1,iterable:!1,value:T}),g=function(T,W,V){let J=!V;V?Object.defineProperty(W,h,a(V)):(V=d(T.structInfo.sizeof),V||r("Allocation of",T.structName,"structure failed."));try{T.debugFlags.__flags.alloc&&k("debug.alloc:",J?"":"EXTERNAL",T.structName,"instance:",T.structInfo.sizeof,"bytes @"+V),J&&l().fill(0,V,V+T.structInfo.sizeof),_.set(W,V)}catch(_e){throw c(T,W,V),_e}},I=function(){const T=this.pointer;return T?new Uint8Array(l().slice(T,T+this.structInfo.sizeof)):null},X=a(T=>j+T+H),Z=function(T,W,V=!0){let J=T.members[W];if(!J&&(j||H)){for(const _e of Object.values(T.members))if(_e.key===W){J=_e;break}!J&&V&&r(v(T.name,W),"is not a mapped struct member.")}return J},R=function T(W,V,J=!1){T._||(T._=pe=>pe.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const _e=Z(W.structInfo,V,!0);return J?T._(_e.signature):_e.signature},b={configurable:!1,enumerable:!1,get:function(){return _.get(this)},set:()=>r("Cannot assign the 'pointer' property of a struct.")},A=a(function(){const T=[];for(const W of Object.keys(this.structInfo.members))T.push(this.memberKey(W));return T}),C=new TextDecoder("utf-8"),U=new TextEncoder,ee=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,x=function(T,W,V){return C.decode(T.buffer instanceof ee?T.slice(W,V):T.subarray(W,V))},O=function(T,W,V=!1){const J=Z(T.structInfo,W,V);return J&&J.signature.length===1&&J.signature[0]==="s"?J:!1},P=function(T){T.signature!=="s"&&r("Invalid member type signature for C-string value:",JSON.stringify(T))},$=function(W,V){const J=Z(W.structInfo,V,!0);P(J);const _e=W[J.key];if(!_e)return null;let pe=_e;const me=l();for(;me[pe]!==0;++pe);return _e===pe?"":x(me,_e,pe)},Q=function(T,...W){T.ondispose?Array.isArray(T.ondispose)||(T.ondispose=[T.ondispose]):T.ondispose=[],T.ondispose.push(...W)},oe=function(T){const W=U.encode(T),V=d(W.length+1);V||r("Allocation error while duplicating string:",T);const J=l();return J.set(W,V),J[V+W.length]=0,V},ue=function(T,W,V){const J=Z(T.structInfo,W,!0);P(J);const _e=oe(V);return T[J.key]=_e,Q(T,_e),T},G=function(W,V){arguments[2]!==a&&r("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:a(W),structInfo:a(V)})};G.prototype=Object.create(null,{dispose:a(function(){c(this.constructor,this)}),lookupMember:a(function(T,W=!0){return Z(this.structInfo,T,W)}),memberToJsString:a(function(T){return $(this,T)}),memberIsString:a(function(T,W=!0){return O(this,T,W)}),memberKey:X,memberKeys:A,memberSignature:a(function(T,W=!1){return R(this,T,W)}),memoryDump:a(I),pointer:b,setMemberCString:a(function(T,W){return ue(this,T,W)})}),Object.assign(G.prototype,{addOnDispose:function(...T){return Q(this,...T),this}}),Object.defineProperties(G,{allocCString:a(oe),isA:a(T=>T instanceof G),hasExternalPointer:a(T=>T instanceof G&&!!T[h]),memberKey:X});const ve=T=>Number.isFinite(T)||T instanceof(S||Number),Te=function T(W,V,J){if(!T._){T._={getters:{},setters:{},sw:{}};const Ae=["i","c","C","p","P","s","f","d","v()"];Y&&Ae.push("j"),Ae.forEach(function(Oe){T._.getters[Oe]=te(Oe),T._.setters[Oe]=u(Oe),T._.sw[Oe]=q(Oe)});const Ar=/^[ipPsjfdcC]$/,Ir=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;T.sigCheck=function(Oe,kr,Jt,ht){Object.prototype.hasOwnProperty.call(Oe,Jt)&&r(Oe.structName,"already has a property named",Jt+"."),Ar.test(ht)||Ir.test(ht)||r("Malformed signature for",v(Oe.structName,kr)+":",ht)}}const _e=W.memberKey(V);T.sigCheck(W.prototype,V,_e,J.signature),J.key=_e,J.name=V;const pe=N(J.signature),me=v(W.prototype.structName,_e),he=W.prototype.debugFlags.__flags,Qe=Object.create(null);Qe.configurable=!1,Qe.enumerable=!1,Qe.get=function(){he.getter&&k("debug.getter:",T._.getters[pe],"for",F(pe),me,"@",this.pointer,"+",J.offset,"sz",J.sizeof);let Ae=new DataView(l().buffer,this.pointer+J.offset,J.sizeof)[T._.getters[pe]](0,w);return he.getter&&k("debug.getter:",me,"result =",Ae),Ae},J.readOnly?Qe.set=M(W.prototype.structName,_e):Qe.set=function(Ae){if(he.setter&&k("debug.setter:",T._.setters[pe],"for",F(pe),me,"@",this.pointer,"+",J.offset,"sz",J.sizeof,Ae),this.pointer||r("Cannot set struct property on disposed instance."),Ae===null)Ae=0;else for(;!ve(Ae);){if(D(J.signature)&&Ae instanceof G){Ae=Ae.pointer||0,he.setter&&k("debug.setter:",me,"resolved to",Ae);break}r("Invalid value for pointer-type",me+".")}new DataView(l().buffer,this.pointer+J.offset,J.sizeof)[T._.setters[pe]](0,T._.sw[pe](Ae),w)},Object.defineProperty(W.prototype,_e,Qe)},qe=function T(W,V){arguments.length===1?(V=W,W=V.name):V.name||(V.name=W),W||r("Struct name is required.");let J=!1;Object.keys(V.members).forEach(me=>{const he=V.members[me];he.sizeof?he.sizeof===1?he.signature==="c"||he.signature==="C"||r("Unexpected sizeof==1 member",v(V.name,me),"with signature",he.signature):(he.sizeof%4!==0&&(console.warn("Invalid struct member description =",he,"from",V),r(W,"member",me,"sizeof is not aligned. sizeof="+he.sizeof)),he.offset%4!==0&&(console.warn("Invalid struct member description =",he,"from",V),r(W,"member",me,"offset is not aligned. offset="+he.offset))):r(W,"member",me,"is missing sizeof."),(!J||J.offset<he.offset)&&(J=he)}),J?V.sizeof<J.offset+J.sizeof&&r("Invalid struct config:",W,"max member offset ("+J.offset+") ","extends past end of struct (sizeof="+V.sizeof+")."):r("No member property descriptions found.");const _e=a(i.__makeDebugFlags(T.debugFlags)),pe=function me(he){this instanceof me?arguments.length?((he!==(he|0)||he<=0)&&r("Invalid pointer value for",W,"constructor."),g(me,this,he)):g(me,this):r("The",W,"constructor may only be called via 'new'.")};return Object.defineProperties(pe,{debugFlags:_e,isA:a(me=>me instanceof pe),memberKey:X,memberKeys:A,methodInfoForKey:a(function(me){}),structInfo:a(V),structName:a(W)}),pe.prototype=new G(W,V,a),Object.defineProperties(pe.prototype,{debugFlags:_e,constructor:a(pe)}),Object.keys(V.members).forEach(me=>Te(pe,me,V.members[me])),pe};return qe.StructType=G,qe.config=s,qe.allocCString=oe,qe.debugFlags||(qe.debugFlags=i.__makeDebugFlags(i.debugFlags)),qe},globalThis.sqlite3ApiBootstrap.initializers.push(function(e){const s=(...S)=>{throw new Error(S.join(" "))};e.SQLite3Error.toss;const r=e.capi,i=e.wasm,l=e.util;if(globalThis.WhWasmUtilInstaller(i),delete globalThis.WhWasmUtilInstaller,i.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(S,p)=>S[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:S=>S[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new i.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:S=>{let p;return(f,y,w,m)=>{try{const D=i.cArgvToJs(y,w);return p||(p=i.cArgvToJs(y,m)),S(D,p)|0}catch(D){return D.resultCode||r.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_progress_handler",void 0,["sqlite3*","int",new i.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(S,p)=>S[0]}),"*"]],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:S=>S[0]}),"*"]],["sqlite3_set_authorizer","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(S,p)=>S[0],callProxy:S=>(p,f,y,w,m,D)=>{try{return y=y&&i.cstrToJs(y),w=w&&i.cstrToJs(w),m=m&&i.cstrToJs(m),D=D&&i.cstrToJs(D),S(p,f,y,w,m,D)||0}catch(N){return N.resultCode||r.SQLITE_ERROR}}}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*",new i.xWrap.FuncPtrAdapter({name:"xDestroyAuxData",signature:"v(*)",contextKey:(S,p)=>S[0]})]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_isexplain","int",["sqlite3_stmt*"]],["sqlite3_stmt_readonly","int",["sqlite3_stmt*"]],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new i.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(S,p)=>S[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],i.exports.sqlite3_activate_see instanceof Function&&i.bindingSignatures.push(["sqlite3_key","int","sqlite3*","string","int"],["sqlite3_key_v2","int","sqlite3*","string","*","int"],["sqlite3_rekey","int","sqlite3*","string","int"],["sqlite3_rekey_v2","int","sqlite3*","string","*","int"],["sqlite3_activate_see",void 0,"string"]),i.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:S=>S[0],callProxy:S=>(p,f,y,w,m,D,N)=>{S(p,f,y,i.cstrToJs(w),i.cstrToJs(m),D,N)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:S=>S[0],callProxy:S=>(p,f,y,w,m)=>{S(p,f,i.cstrToJs(y),i.cstrToJs(w),m)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]],i.bigIntEnabled&&i.exports.sqlite3changegroup_add){const S={signature:"i(ps)",callProxy:p=>(f,y)=>{try{return p(f,i.cstrToJs(y))|0}catch(w){return w.resultCode||r.SQLITE_ERROR}}};i.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...S}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...S}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...S}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...S}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new i.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xFilter",...S,contextKey:(p,f)=>p[0]}),"*"]])}i.bindingSignatures.wasm=[["sqlite3_wasm_db_reset","int","sqlite3*"],["sqlite3_wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3_wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3_wasm_posix_create_file","int","string","*","int"],["sqlite3_wasm_vfs_unlink","int","sqlite3_vfs*","string"]],e.StructBinder=globalThis.Jaccwabyt({heap:i.heap8u,alloc:i.alloc,dealloc:i.dealloc,bigIntEnabled:i.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const S=i.xWrap.argAdapter("string");i.xWrap.argAdapter("string:flexible",m=>S(l.flexibleString(m))),i.xWrap.argAdapter("string:static",function(m){return i.isPtr(m)?m:(m=""+m,this[m]||(this[m]=i.allocCString(m)))}.bind(Object.create(null)));const p=i.xWrap.argAdapter("*"),f=function(){};i.xWrap.argAdapter("sqlite3_filename",p)("sqlite3_context*",p)("sqlite3_value*",p)("void*",p)("sqlite3_changegroup*",p)("sqlite3_changeset_iter*",p)("sqlite3_session*",p)("sqlite3_stmt*",m=>p(m instanceof(e?.oo1?.Stmt||f)?m.pointer:m))("sqlite3*",m=>p(m instanceof(e?.oo1?.DB||f)?m.pointer:m))("sqlite3_index_info*",m=>p(m instanceof(r.sqlite3_index_info||f)?m.pointer:m))("sqlite3_module*",m=>p(m instanceof(r.sqlite3_module||f)?m.pointer:m))("sqlite3_vfs*",m=>typeof m=="string"?r.sqlite3_vfs_find(m)||e.SQLite3Error.toss(r.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",m):p(m instanceof(r.sqlite3_vfs||f)?m.pointer:m));const y=i.xWrap.resultAdapter("*");i.xWrap.resultAdapter("sqlite3*",y)("sqlite3_context*",y)("sqlite3_stmt*",y)("sqlite3_value*",y)("sqlite3_vfs*",y)("void*",y),i.exports.sqlite3_step.length===0&&(i.xWrap.doArgcCheck=!1,e.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(const m of i.bindingSignatures)r[m[0]]=i.xWrap.apply(null,m);for(const m of i.bindingSignatures.wasm)i[m[0]]=i.xWrap.apply(null,m);const w=function(m){return()=>s(m+"() is unavailable due to lack","of BigInt support in this build.")};for(const m of i.bindingSignatures.int64)r[m[0]]=i.bigIntEnabled?i.xWrap.apply(null,m):w(m[0]);if(delete i.bindingSignatures,i.exports.sqlite3_wasm_db_error){const m=i.xWrap("sqlite3_wasm_db_error","int","sqlite3*","int","string");l.sqlite3_wasm_db_error=function(D,N,F){return N instanceof e.WasmAllocError?(N=r.SQLITE_NOMEM,F=0):N instanceof Error&&(F=F||""+N,N=N.resultCode||r.SQLITE_ERROR),D?m(D,N,F):N}}else l.sqlite3_wasm_db_error=function(m,D,N){return console.warn("sqlite3_wasm_db_error() is not exported.",arguments),D}}{const S=i.xCall("sqlite3_wasm_enum_json");S||s("Maintenance required: increase sqlite3_wasm_enum_json()'s","static buffer size!"),i.ctype=JSON.parse(i.cstrToJs(S));const p=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];i.bigIntEnabled&&p.push("serialize","session","vtab");for(const w of p)for(const m of Object.entries(i.ctype[w]))r[m[0]]=m[1];i.functionEntry(r.SQLITE_WASM_DEALLOC)||s("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+r.SQLITE_WASM_DEALLOC+").");const f=Object.create(null);for(const w of["resultCodes"])for(const m of Object.entries(i.ctype[w]))f[m[1]]=m[0];r.sqlite3_js_rc_str=w=>f[w];const y=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!l.isUIThread(),sqlite3_index_info:!i.bigIntEnabled,sqlite3_index_constraint:!i.bigIntEnabled,sqlite3_index_orderby:!i.bigIntEnabled,sqlite3_index_constraint_usage:!i.bigIntEnabled});for(const w of i.ctype.structs)y[w.name]||(r[w.name]=e.StructBinder(w));if(r.sqlite3_index_info){for(const w of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])r.sqlite3_index_info[w]=r[w],delete r[w];r.sqlite3_vtab_config=i.xWrap("sqlite3_wasm_vtab_config","int",["sqlite3*","int","int"])}}const d=(S,p,f)=>e.util.sqlite3_wasm_db_error(S,r.SQLITE_MISUSE,p+"() requires "+f+" argument"+(f===1?"":"s")+"."),E=S=>l.sqlite3_wasm_db_error(S,r.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),k=S=>i.xWrap.argAdapter("sqlite3*")(S),j=S=>i.isPtr(S)?i.cstrToJs(S):S,H=function(S,p){S=k(S);let f=this.dbMap.get(S);if(p)!f&&p>0&&this.dbMap.set(S,f=Object.create(null));else return this.dbMap.delete(S),f;return f}.bind(Object.assign(Object.create(null),{dbMap:new Map}));H.addCollation=function(S,p){const f=H(S,1);f.collation||(f.collation=new Set),f.collation.add(j(p).toLowerCase())},H._addUDF=function(S,p,f,y){p=j(p).toLowerCase();let w=y.get(p);w||y.set(p,w=new Set),w.add(f<0?-1:f)},H.addFunction=function(S,p,f){const y=H(S,1);y.udf||(y.udf=new Map),this._addUDF(S,p,f,y.udf)},H.addWindowFunc=function(S,p,f){const y=H(S,1);y.wudf||(y.wudf=new Map),this._addUDF(S,p,f,y.wudf)},H.cleanup=function(S){S=k(S);const p=[S];for(const w of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const m=i.exports[w];p.length=m.length;try{r[w](...p)}catch(D){console.warn("close-time call of",w+"(",p,") threw:",D)}}const f=H(S,0);if(!f)return;if(f.collation){for(const w of f.collation)try{r.sqlite3_create_collation_v2(S,w,r.SQLITE_UTF8,0,0,0)}catch{}delete f.collation}let y;for(y=0;y<2;++y){const w=y?f.wudf:f.udf;if(!w)continue;const m=y?r.sqlite3_create_window_function:r.sqlite3_create_function_v2;for(const D of w){const N=D[0],F=D[1],B=[S,N,0,r.SQLITE_UTF8,0,0,0,0,0];y&&B.push(0);for(const te of F)try{B[2]=te,m.apply(null,B)}catch{}F.clear()}w.clear()}delete f.udf,delete f.wudf};{const S=i.xWrap("sqlite3_close_v2","int","sqlite3*");r.sqlite3_close_v2=function(p){if(arguments.length!==1)return d(p,"sqlite3_close_v2",1);if(p)try{H.cleanup(p)}catch{}return S(p)}}if(r.sqlite3session_table_filter){const S=i.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);r.sqlite3session_delete=function(p){if(arguments.length!==1)return d(pDb,"sqlite3session_delete",1);p&&r.sqlite3session_table_filter(p,0,0),S(p)}}{const S=(f,y)=>"argv["+y+"]:"+f[0]+":"+i.cstrToJs(f[1]).toLowerCase(),p=i.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new i.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:S}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:S})]);r.sqlite3_create_collation_v2=function(f,y,w,m,D,N){if(arguments.length!==6)return d(f,"sqlite3_create_collation_v2",6);if(!(w&15))w|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(w&15))return E(f);try{const F=p(f,y,w,m,D,N);return F===0&&D instanceof Function&&H.addCollation(f,y),F}catch(F){return l.sqlite3_wasm_db_error(f,F)}},r.sqlite3_create_collation=(f,y,w,m,D)=>arguments.length===5?r.sqlite3_create_collation_v2(f,y,w,m,D,0):d(f,"sqlite3_create_collation",5)}{const S=function(w,m){return w[0]+":"+(w[2]<0?-1:w[2])+":"+m+":"+i.cstrToJs(w[1]).toLowerCase()},p=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:S,callProxy:w=>(m,D,N)=>{try{w(m,...r.sqlite3_values_to_js(D,N))}catch(F){r.sqlite3_result_error_js(m,F)}}},xFinalAndValue:{signature:"v(p)",contextKey:S,callProxy:w=>m=>{try{r.sqlite3_result_js(m,w(m))}catch(D){r.sqlite3_result_error_js(m,D)}}},xFunc:{signature:"v(pip)",contextKey:S,callProxy:w=>(m,D,N)=>{try{r.sqlite3_result_js(m,w(m,...r.sqlite3_values_to_js(D,N)))}catch(F){r.sqlite3_result_error_js(m,F)}}},xDestroy:{signature:"v(p)",contextKey:S,callProxy:w=>m=>{try{w(m)}catch(D){console.error("UDF xDestroy method threw:",D)}}}}),f=i.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new i.xWrap.FuncPtrAdapter({name:"xFunc",...p.xFunc}),new i.xWrap.FuncPtrAdapter({name:"xStep",...p.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xFinal",...p.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",...p.xDestroy})]),y=i.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new i.xWrap.FuncPtrAdapter({name:"xStep",...p.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xFinal",...p.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xValue",...p.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xInverse",...p.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",...p.xDestroy})]);r.sqlite3_create_function_v2=function w(m,D,N,F,B,te,u,q,v){if(w.length!==arguments.length)return d(m,"sqlite3_create_function_v2",w.length);if(!(F&15))F|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(F&15))return E(m);try{const M=f(m,D,N,F,B,te,u,q,v);return M===0&&(te instanceof Function||u instanceof Function||q instanceof Function||v instanceof Function)&&H.addFunction(m,D,N),M}catch(M){return console.error("sqlite3_create_function_v2() setup threw:",M),l.sqlite3_wasm_db_error(m,M,"Creation of UDF threw: "+M)}},r.sqlite3_create_function=function w(m,D,N,F,B,te,u,q){return w.length===arguments.length?r.sqlite3_create_function_v2(m,D,N,F,B,te,u,q,0):d(m,"sqlite3_create_function",w.length)},r.sqlite3_create_window_function=function w(m,D,N,F,B,te,u,q,v,M){if(w.length!==arguments.length)return d(m,"sqlite3_create_window_function",w.length);if(!(F&15))F|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(F&15))return E(m);try{const _=y(m,D,N,F,B,te,u,q,v,M);return _===0&&(te instanceof Function||u instanceof Function||q instanceof Function||v instanceof Function||M instanceof Function)&&H.addWindowFunc(m,D,N),_}catch(_){return console.error("sqlite3_create_window_function() setup threw:",_),l.sqlite3_wasm_db_error(m,_,"Creation of UDF threw: "+_)}},r.sqlite3_create_function_v2.udfSetResult=r.sqlite3_create_function.udfSetResult=r.sqlite3_create_window_function.udfSetResult=r.sqlite3_result_js,r.sqlite3_create_function_v2.udfConvertArgs=r.sqlite3_create_function.udfConvertArgs=r.sqlite3_create_window_function.udfConvertArgs=r.sqlite3_values_to_js,r.sqlite3_create_function_v2.udfSetError=r.sqlite3_create_function.udfSetError=r.sqlite3_create_window_function.udfSetError=r.sqlite3_result_error_js}{const S=(f,y)=>(typeof f=="string"?y=-1:l.isSQLableTypedArray(f)?(y=f.byteLength,f=l.typedArrayToString(f instanceof ArrayBuffer?new Uint8Array(f):f)):Array.isArray(f)&&(f=f.join(""),y=-1),[f,y]),p={basic:i.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:i.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};r.sqlite3_prepare_v3=function f(y,w,m,D,N,F){if(f.length!==arguments.length)return d(y,"sqlite3_prepare_v3",f.length);const[B,te]=S(w,m);switch(typeof B){case"string":return p.basic(y,B,te,D,N,null);case"number":return p.full(y,B,te,D,N,F);default:return l.sqlite3_wasm_db_error(y,r.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},r.sqlite3_prepare_v2=function f(y,w,m,D,N){return f.length===arguments.length?r.sqlite3_prepare_v3(y,w,m,0,D,N):d(y,"sqlite3_prepare_v2",f.length)}}{const S=i.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),p=i.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);r.sqlite3_bind_text=function f(y,w,m,D,N){if(f.length!==arguments.length)return d(r.sqlite3_db_handle(y),"sqlite3_bind_text",f.length);if(i.isPtr(m)||m===null)return S(y,w,m,D,N);m instanceof ArrayBuffer?m=new Uint8Array(m):Array.isArray(pMem)&&(m=pMem.join(""));let F,B;try{if(l.isSQLableTypedArray(m))F=i.allocFromTypedArray(m),B=m.byteLength;else if(typeof m=="string")[F,B]=i.allocCString(m);else return l.sqlite3_wasm_db_error(r.sqlite3_db_handle(y),r.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return S(y,w,F,B,r.SQLITE_WASM_DEALLOC)}catch(te){return i.dealloc(F),l.sqlite3_wasm_db_error(r.sqlite3_db_handle(y),te)}},r.sqlite3_bind_blob=function f(y,w,m,D,N){if(f.length!==arguments.length)return d(r.sqlite3_db_handle(y),"sqlite3_bind_blob",f.length);if(i.isPtr(m)||m===null)return p(y,w,m,D,N);m instanceof ArrayBuffer?m=new Uint8Array(m):Array.isArray(m)&&(m=m.join(""));let F,B;try{if(l.isBindableTypedArray(m))F=i.allocFromTypedArray(m),B=D>=0?D:m.byteLength;else if(typeof m=="string")[F,B]=i.allocCString(m);else return l.sqlite3_wasm_db_error(r.sqlite3_db_handle(y),r.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return p(y,w,F,B,r.SQLITE_WASM_DEALLOC)}catch(te){return i.dealloc(F),l.sqlite3_wasm_db_error(r.sqlite3_db_handle(y),te)}}}r.sqlite3_config=function(S,...p){if(arguments.length<2)return r.SQLITE_MISUSE;switch(S){case r.SQLITE_CONFIG_COVERING_INDEX_SCAN:case r.SQLITE_CONFIG_MEMSTATUS:case r.SQLITE_CONFIG_SMALL_MALLOC:case r.SQLITE_CONFIG_SORTERREF_SIZE:case r.SQLITE_CONFIG_STMTJRNL_SPILL:case r.SQLITE_CONFIG_URI:return i.exports.sqlite3_wasm_config_i(S,p[0]);case r.SQLITE_CONFIG_LOOKASIDE:return i.exports.sqlite3_wasm_config_ii(S,p[0],p[1]);case r.SQLITE_CONFIG_MEMDB_MAXSIZE:return i.exports.sqlite3_wasm_config_j(S,p[0]);case r.SQLITE_CONFIG_GETMALLOC:case r.SQLITE_CONFIG_GETMUTEX:case r.SQLITE_CONFIG_GETPCACHE2:case r.SQLITE_CONFIG_GETPCACHE:case r.SQLITE_CONFIG_HEAP:case r.SQLITE_CONFIG_LOG:case r.SQLITE_CONFIG_MALLOC:case r.SQLITE_CONFIG_MMAP_SIZE:case r.SQLITE_CONFIG_MULTITHREAD:case r.SQLITE_CONFIG_MUTEX:case r.SQLITE_CONFIG_PAGECACHE:case r.SQLITE_CONFIG_PCACHE2:case r.SQLITE_CONFIG_PCACHE:case r.SQLITE_CONFIG_PCACHE_HDRSZ:case r.SQLITE_CONFIG_PMASZ:case r.SQLITE_CONFIG_SERIALIZED:case r.SQLITE_CONFIG_SINGLETHREAD:case r.SQLITE_CONFIG_SQLLOG:case r.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return r.SQLITE_NOTFOUND}};{const S=new Set;r.sqlite3_auto_extension=function(p){if(p instanceof Function)p=i.installFunction("i(ppp)",p);else if(arguments.length!==1||!i.isPtr(p))return r.SQLITE_MISUSE;const f=i.exports.sqlite3_auto_extension(p);return p!==arguments[0]&&(f===0?S.add(p):i.uninstallFunction(p)),f},r.sqlite3_cancel_auto_extension=function(p){return!p||arguments.length!==1||!i.isPtr(p)?0:i.exports.sqlite3_cancel_auto_extension(p)},r.sqlite3_reset_auto_extension=function(){i.exports.sqlite3_reset_auto_extension();for(const p of S)i.uninstallFunction(p);S.clear()}}const Y=r.sqlite3_vfs_find("kvvfs");if(Y)if(l.isUIThread()){const S=new r.sqlite3_kvvfs_methods(i.exports.sqlite3_wasm_kvvfs_methods());delete r.sqlite3_kvvfs_methods;const p=i.exports.sqlite3_wasm_kvvfsMakeKeyOnPstack,f=i.pstack,y=m=>i.peek(m)===115?sessionStorage:localStorage,w={xRead:(m,D,N,F)=>{const B=f.pointer,te=i.scopedAllocPush();try{const u=p(m,D);if(!u)return-3;const q=i.cstrToJs(u),v=y(m).getItem(q);if(!v)return-1;const M=v.length;if(F<=0)return M;if(F===1)return i.poke(N,0),M;const _=i.scopedAllocCString(v);return F>M+1&&(F=M+1),i.heap8u().copyWithin(N,_,_+F-1),i.poke(N+F-1,0),F-1}catch(u){return console.error("kvstorageRead()",u),-2}finally{f.restore(B),i.scopedAllocPop(te)}},xWrite:(m,D,N)=>{const F=f.pointer;try{const B=p(m,D);if(!B)return 1;const te=i.cstrToJs(B);return y(m).setItem(te,i.cstrToJs(N)),0}catch(B){return console.error("kvstorageWrite()",B),r.SQLITE_IOERR}finally{f.restore(F)}},xDelete:(m,D)=>{const N=f.pointer;try{const F=p(m,D);return F?(y(m).removeItem(i.cstrToJs(F)),0):1}catch(F){return console.error("kvstorageDelete()",F),r.SQLITE_IOERR}finally{f.restore(N)}}};for(const m of Object.keys(w))S[S.memberKey(m)]=i.installFunction(S.memberSignature(m),w[m])}else r.sqlite3_vfs_unregister(Y);i.xWrap.FuncPtrAdapter.warnOnUse=!0}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){e.version={libVersion:"3.43.1",libVersionNumber:3043001,sourceId:"2023-09-11 12:01:27 2d3a40c05c49e1a49264912b1a05bc2143ac0e7c3df588276ce80a4cbc9bd1b0",downloadVersion:3430100}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){const s=(..._)=>{throw new e.SQLite3Error(..._)},r=e.capi,i=e.wasm,l=e.util,d=new WeakMap,E=new WeakMap,k=(_,h,c)=>{const a=Object.getOwnPropertyDescriptor(_,h);return a?a.value:c},j=function(_,h){return h&&(_ instanceof p&&(_=_.pointer),s(h,"sqlite3 result code",h+":",_?r.sqlite3_errmsg(_):r.sqlite3_errstr(h))),arguments[0]},H=i.installFunction("i(ippp)",function(_,h,c,a){r.SQLITE_TRACE_STMT===_&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+h+":",i.cstrToJs(a))}.bind({counter:0})),Y=Object.create(null),S=function _(...h){if(!_._name2vfs){_._name2vfs=Object.create(null);const A=typeof importScripts=="function"?C=>s("The VFS for",C,"is only available in the main window thread."):!1;_._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:A||(()=>"local")},_._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:A||(()=>"session")}}const c=_.normalizeArgs(...h);let a=c.filename,g=c.vfs,I=c.flags;(typeof a!="string"&&typeof a!="number"||typeof I!="string"||g&&typeof g!="string"&&typeof g!="number")&&(e.config.error("Invalid DB ctor args",c,arguments),s("Invalid arguments for DB constructor."));let z=typeof a=="number"?i.cstrToJs(a):a;const X=_._name2vfs[z];X&&(g=X.vfs,a=z=X.filename(z));let Z,R=0;I.indexOf("c")>=0&&(R|=r.SQLITE_OPEN_CREATE|r.SQLITE_OPEN_READWRITE),I.indexOf("w")>=0&&(R|=r.SQLITE_OPEN_READWRITE),R===0&&(R|=r.SQLITE_OPEN_READONLY),R|=r.SQLITE_OPEN_EXRESCODE;const b=i.pstack.pointer;try{const A=i.pstack.allocPtr();let C=r.sqlite3_open_v2(a,A,R,g||0);Z=i.peekPtr(A),j(Z,C),r.sqlite3_extended_result_codes(Z,1),I.indexOf("t")>=0&&r.sqlite3_trace_v2(Z,r.SQLITE_TRACE_STMT,H,Z)}catch(A){throw Z&&r.sqlite3_close_v2(Z),A}finally{i.pstack.restore(b)}this.filename=z,d.set(this,Z),E.set(this,Object.create(null));try{const A=r.sqlite3_js_db_vfs(Z);A||s("Internal error: cannot get VFS for new db handle.");const C=Y[A];C instanceof Function?C(this,e):C&&j(Z,r.sqlite3_exec(Z,C,0,0,0))}catch(A){throw this.close(),A}};S.setVfsPostOpenSql=function(_,h){Y[_]=h},S.normalizeArgs=function(_=":memory:",h="c",c=null){const a={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(a,arguments[0]),a.flags===void 0&&(a.flags="c"),a.vfs===void 0&&(a.vfs=null),a.filename===void 0&&(a.filename=":memory:")):(a.filename=_,a.flags=h,a.vfs=c),a};const p=function(..._){S.apply(this,_)};p.dbCtorHelper=S;const f={null:1,number:2,string:3,boolean:4,blob:5};f.undefined==f.null,i.bigIntEnabled&&(f.bigint=f.number);const y=function(){f!==arguments[2]&&s(r.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],d.set(this,arguments[1]),this.parameterCount=r.sqlite3_bind_parameter_count(this.pointer)},w=function(_){return _.pointer||s("DB has been closed."),_},m=function(_,h){return(h!==(h|0)||h<0||h>=_.columnCount)&&s("Column index",h,"is out of range."),_},D=function(_,h){const c=Object.create(null);switch(c.opt=Object.create(null),h.length){case 1:typeof h[0]=="string"||l.isSQLableTypedArray(h[0])||Array.isArray(h[0])?c.sql=h[0]:h[0]&&typeof h[0]=="object"&&(c.opt=h[0],c.sql=c.opt.sql);break;case 2:c.sql=h[0],c.opt=h[1];break;default:s("Invalid argument count for exec().")}c.sql=l.flexibleString(c.sql),typeof c.sql!="string"&&s("Missing SQL argument or unsupported SQL value type.");const a=c.opt;switch(a.returnValue){case"resultRows":a.resultRows||(a.resultRows=[]),c.returnVal=()=>a.resultRows;break;case"saveSql":a.saveSql||(a.saveSql=[]),c.returnVal=()=>a.saveSql;break;case void 0:case"this":c.returnVal=()=>_;break;default:s("Invalid returnValue value:",a.returnValue)}if(!a.callback&&!a.returnValue&&a.rowMode!==void 0&&(a.resultRows||(a.resultRows=[]),c.returnVal=()=>a.resultRows),a.callback||a.resultRows)switch(a.rowMode===void 0?"array":a.rowMode){case"object":c.cbArg=g=>g.get(Object.create(null));break;case"array":c.cbArg=g=>g.get([]);break;case"stmt":Array.isArray(a.resultRows)&&s("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),c.cbArg=g=>g;break;default:if(l.isInt32(a.rowMode)){c.cbArg=g=>g.get(a.rowMode);break}else if(typeof a.rowMode=="string"&&a.rowMode.length>1&&a.rowMode[0]==="$"){const g=a.rowMode.substr(1);c.cbArg=I=>{const z=I.get(Object.create(null))[g];return z===void 0?s(r.SQLITE_NOTFOUND,"exec(): unknown result column:",g):z};break}s("Invalid rowMode:",a.rowMode)}return c},N=(_,h,c,...a)=>{const g=_.prepare(h);try{const I=g.bind(c).step()?g.get(...a):void 0;return g.reset(),I}finally{g.finalize()}},F=(_,h,c,a)=>_.exec({sql:h,bind:c,rowMode:a,returnValue:"resultRows"});p.checkRc=(_,h)=>j(_,h),p.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return w(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}const _=this.pointer;if(Object.keys(E.get(this)).forEach((h,c)=>{if(c&&c.pointer)try{c.finalize()}catch{}}),d.delete(this),E.delete(this),r.sqlite3_close_v2(_),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(_=!1,h=!1){const c=w(this).pointer;return _?h?r.sqlite3_total_changes64(c):r.sqlite3_total_changes(c):h?r.sqlite3_changes64(c):r.sqlite3_changes(c)},dbFilename:function(_="main"){return r.sqlite3_db_filename(w(this).pointer,_)},dbName:function(_=0){return r.sqlite3_db_name(w(this).pointer,_)},dbVfsName:function(_=0){let h;const c=r.sqlite3_js_db_vfs(w(this).pointer,_);if(c){const a=new r.sqlite3_vfs(c);try{h=i.cstrToJs(a.$zName)}finally{a.dispose()}}return h},prepare:function(_){w(this);const h=i.pstack.pointer;let c,a;try{c=i.pstack.alloc(8),p.checkRc(this,r.sqlite3_prepare_v2(this.pointer,_,-1,c,null)),a=i.peekPtr(c)}finally{i.pstack.restore(h)}a||s("Cannot prepare empty SQL.");const g=new y(this,a,f);return E.get(this)[a]=g,g},exec:function(){w(this);const _=D(this,arguments);if(!_.sql)return s("exec() requires an SQL string.");const h=_.opt,c=h.callback,a=Array.isArray(h.resultRows)?h.resultRows:void 0;let g,I=h.bind,z=!!(_.cbArg||h.columnNames||a);const X=i.scopedAllocPush(),Z=Array.isArray(h.saveSql)?h.saveSql:void 0;try{const R=l.isSQLableTypedArray(_.sql);let b=R?_.sql.byteLength:i.jstrlen(_.sql);const A=i.scopedAlloc(2*i.ptrSizeof+(b+1)),C=A+i.ptrSizeof;let U=C+i.ptrSizeof;const ee=U+b;for(R?i.heap8().set(_.sql,U):i.jstrcpy(_.sql,i.heap8(),U,b,!1),i.poke(U+b,0);U&&i.peek(U,"i8");){i.pokePtr([A,C],0),p.checkRc(this,r.sqlite3_prepare_v3(this.pointer,U,b,0,A,C));const x=i.peekPtr(A);if(U=i.peekPtr(C),b=ee-U,!!x){if(Z&&Z.push(r.sqlite3_sql(x).trim()),g=new y(this,x,f),I&&g.parameterCount&&(g.bind(I),I=null),z&&g.columnCount){let O=Array.isArray(h.columnNames)?0:1;if(z=!1,_.cbArg||a){for(;g.step();g._lockedByExec=!1){O++===0&&g.getColumnNames(h.columnNames),g._lockedByExec=!0;const P=_.cbArg(g);if(a&&a.push(P),c&&c.call(h,P,g)===!1)break}g._lockedByExec=!1}O===0&&g.getColumnNames(h.columnNames)}else g.step();g.reset().finalize(),g=null}}}finally{i.scopedAllocPop(X),g&&(delete g._lockedByExec,g.finalize())}return _.returnVal()},createFunction:function(h,c,a){const g=P=>P instanceof Function;switch(arguments.length){case 1:a=h,h=a.name,c=a.xFunc||0;break;case 2:g(c)||(a=c,c=a.xFunc||0);break}a||(a={}),typeof h!="string"&&s("Invalid arguments: missing function name.");let I=a.xStep||0,z=a.xFinal||0;const X=a.xValue||0,Z=a.xInverse||0;let R;g(c)?(R=!1,(g(I)||g(z))&&s("Ambiguous arguments: scalar or aggregate?"),I=z=null):g(I)?(g(z)||s("Missing xFinal() callback for aggregate or window UDF."),c=null):g(z)?s("Missing xStep() callback for aggregate or window UDF."):s("Missing function-type properties."),R===!1?(g(X)||g(Z))&&s("xValue and xInverse are not permitted for non-window UDFs."):g(X)?(g(Z)||s("xInverse must be provided if xValue is."),R=!0):g(Z)&&s("xValue must be provided if xInverse is.");const b=a.pApp;b!=null&&(typeof b!="number"||!l.isInt32(b))&&s("Invalid value for pApp property. Must be a legal WASM pointer value.");const A=a.xDestroy||0;A&&!g(A)&&s("xDestroy property must be a function.");let C=0;k(a,"deterministic")&&(C|=r.SQLITE_DETERMINISTIC),k(a,"directOnly")&&(C|=r.SQLITE_DIRECTONLY),k(a,"innocuous")&&(C|=r.SQLITE_INNOCUOUS),h=h.toLowerCase();const U=c||I,ee=k(a,"arity"),x=typeof ee=="number"?ee:U.length?U.length-1:0;let O;return R?O=r.sqlite3_create_window_function(this.pointer,h,x,r.SQLITE_UTF8|C,b||0,I,z,X,Z,A):O=r.sqlite3_create_function_v2(this.pointer,h,x,r.SQLITE_UTF8|C,b||0,c,I,z,A),p.checkRc(this,O),this},selectValue:function(_,h,c){return N(this,_,h,0,c)},selectValues:function(_,h,c){const a=this.prepare(_),g=[];try{for(a.bind(h);a.step();)g.push(a.get(0,c));a.reset()}finally{a.finalize()}return g},selectArray:function(_,h){return N(this,_,h,[])},selectObject:function(_,h){return N(this,_,h,{})},selectArrays:function(_,h){return F(this,_,h,"array")},selectObjects:function(_,h){return F(this,_,h,"object")},openStatementCount:function(){return this.pointer?Object.keys(E.get(this)).length:0},transaction:function(_){let h="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&s(r.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),h+=" "+arguments[0],_=arguments[1]),w(this).exec(h);try{const c=_(this);return this.exec("COMMIT"),c}catch(c){throw this.exec("ROLLBACK"),c}},savepoint:function(_){w(this).exec("SAVEPOINT oo1");try{const h=_(this);return this.exec("RELEASE oo1"),h}catch(h){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),h}},checkRc:function(_){return j(this,_)}};const B=function(_){return _.pointer||s("Stmt has been closed."),_},te=function(_){let h=f[_==null?"null":typeof _];switch(h){case f.boolean:case f.null:case f.number:case f.string:return h;case f.bigint:if(i.bigIntEnabled)return h;default:return l.isBindableTypedArray(_)?f.blob:void 0}},u=function(_){return te(_)||s("Unsupported bind() argument type:",typeof _)},q=function(_,h){const c=typeof h=="number"?h:r.sqlite3_bind_parameter_index(_.pointer,h);return c===0||!l.isInt32(c)?s("Invalid bind() parameter name: "+h):(c<1||c>_.parameterCount)&&s("Bind index",h,"is out of range."),c},v=function(_,h){return _._lockedByExec&&s("Operation is illegal when statement is locked:",h),_},M=function _(h,c,a,g){v(B(h),"bind()"),_._||(_._tooBigInt=z=>s("BigInt value is too big to store without precision loss:",z),_._={string:function(z,X,Z,R){const[b,A]=i.allocCString(Z,!0);return(R?r.sqlite3_bind_blob:r.sqlite3_bind_text)(z.pointer,X,b,A,r.SQLITE_WASM_DEALLOC)}}),u(g),c=q(h,c);let I=0;switch(g==null?f.null:a){case f.null:I=r.sqlite3_bind_null(h.pointer,c);break;case f.string:I=_._.string(h,c,g,!1);break;case f.number:{let z;l.isInt32(g)?z=r.sqlite3_bind_int:typeof g=="bigint"?l.bigIntFits64(g)?i.bigIntEnabled?z=r.sqlite3_bind_int64:l.bigIntFitsDouble(g)?(g=Number(g),z=r.sqlite3_bind_double):_._tooBigInt(g):_._tooBigInt(g):(g=Number(g),i.bigIntEnabled&&Number.isInteger(g)?z=r.sqlite3_bind_int64:z=r.sqlite3_bind_double),I=z(h.pointer,c,g);break}case f.boolean:I=r.sqlite3_bind_int(h.pointer,c,g?1:0);break;case f.blob:{if(typeof g=="string"){I=_._.string(h,c,g,!0);break}else g instanceof ArrayBuffer?g=new Uint8Array(g):l.isBindableTypedArray(g)||s("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const z=i.alloc(g.byteLength||1);i.heap8().set(g.byteLength?g:[0],z),I=r.sqlite3_bind_blob(h.pointer,c,z,g.byteLength,r.SQLITE_WASM_DEALLOC);break}default:e.config.warn("Unsupported bind() argument type:",g),s("Unsupported bind() argument type: "+typeof g)}return I&&p.checkRc(h.db.pointer,I),h._mayGet=!1,h};y.prototype={finalize:function(){if(this.pointer){v(this,"finalize()");const _=r.sqlite3_finalize(this.pointer);return delete E.get(this.db)[this.pointer],d.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,_}},clearBindings:function(){return v(B(this),"clearBindings()"),r.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(_){v(this,"reset()"),_&&this.clearBindings();const h=r.sqlite3_reset(B(this).pointer);return this._mayGet=!1,j(this.db,h),this},bind:function(){B(this);let _,h;switch(arguments.length){case 1:_=1,h=arguments[0];break;case 2:_=arguments[0],h=arguments[1];break;default:s("Invalid bind() arguments.")}return h===void 0?this:(this.parameterCount||s("This statement has no bindable parameters."),this._mayGet=!1,h===null?M(this,_,f.null,h):Array.isArray(h)?(arguments.length!==1&&s("When binding an array, an index argument is not permitted."),h.forEach((c,a)=>M(this,a+1,u(c),c)),this):(h instanceof ArrayBuffer&&(h=new Uint8Array(h)),typeof h=="object"&&!l.isBindableTypedArray(h)?(arguments.length!==1&&s("When binding an object, an index argument is not permitted."),Object.keys(h).forEach(c=>M(this,c,u(h[c]),h[c])),this):M(this,_,u(h),h)))},bindAsBlob:function(_,h){B(this),arguments.length===1&&(h=_,_=1);const c=u(h);return f.string!==c&&f.blob!==c&&f.null!==c&&s("Invalid value type for bindAsBlob()"),M(this,_,f.blob,h)},step:function(){v(this,"step()");const _=r.sqlite3_step(B(this).pointer);switch(_){case r.SQLITE_DONE:return this._mayGet=!1;case r.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,e.config.warn("sqlite3_step() rc=",_,r.sqlite3_js_rc_str(_),"SQL =",r.sqlite3_sql(this.pointer)),p.checkRc(this.db.pointer,_)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const _=this.step();return this.reset(),_}finally{try{this.finalize()}catch{}}},get:function(_,h){if(B(this)._mayGet||s("Stmt.step() has not (recently) returned true."),Array.isArray(_)){let c=0;const a=this.columnCount;for(;c<a;)_[c]=this.get(c++);return _}else if(_&&typeof _=="object"){let c=0;const a=this.columnCount;for(;c<a;)_[r.sqlite3_column_name(this.pointer,c)]=this.get(c++);return _}switch(m(this,_),h===void 0?r.sqlite3_column_type(this.pointer,_):h){case r.SQLITE_NULL:return null;case r.SQLITE_INTEGER:if(i.bigIntEnabled){const c=r.sqlite3_column_int64(this.pointer,_);return c>=Number.MIN_SAFE_INTEGER&&c<=Number.MAX_SAFE_INTEGER?Number(c).valueOf():c}else{const c=r.sqlite3_column_double(this.pointer,_);return(c>Number.MAX_SAFE_INTEGER||c<Number.MIN_SAFE_INTEGER)&&s("Integer is out of range for JS integer range: "+c),l.isInt32(c)?c|0:c}case r.SQLITE_FLOAT:return r.sqlite3_column_double(this.pointer,_);case r.SQLITE_TEXT:return r.sqlite3_column_text(this.pointer,_);case r.SQLITE_BLOB:{const c=r.sqlite3_column_bytes(this.pointer,_),a=r.sqlite3_column_blob(this.pointer,_),g=new Uint8Array(c);return c&&g.set(i.heap8u().slice(a,a+c),0),c&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(g.buffer),g}default:s("Don't know how to translate","type of result column #"+_+".")}s("Not reached.")},getInt:function(_){return this.get(_,r.SQLITE_INTEGER)},getFloat:function(_){return this.get(_,r.SQLITE_FLOAT)},getString:function(_){return this.get(_,r.SQLITE_TEXT)},getBlob:function(_){return this.get(_,r.SQLITE_BLOB)},getJSON:function(_){const h=this.get(_,r.SQLITE_STRING);return h===null?h:JSON.parse(h)},getColumnName:function(_){return r.sqlite3_column_name(m(B(this),_).pointer,_)},getColumnNames:function(_=[]){m(B(this),0);const h=this.columnCount;for(let c=0;c<h;++c)_.push(r.sqlite3_column_name(this.pointer,c));return _},getParamIndex:function(_){return B(this).parameterCount?r.sqlite3_bind_parameter_index(this.pointer,_):void 0}};{const _={enumerable:!0,get:function(){return d.get(this)},set:()=>s("The pointer property is read-only.")};Object.defineProperty(y.prototype,"pointer",_),Object.defineProperty(p.prototype,"pointer",_)}if(Object.defineProperty(y.prototype,"columnCount",{enumerable:!1,get:function(){return r.sqlite3_column_count(this.pointer)},set:()=>s("The columnCount property is read-only.")}),e.oo1={DB:p,Stmt:y},l.isUIThread()){e.oo1.JsStorageDb=function(h="session"){h!=="session"&&h!=="local"&&s("JsStorageDb db name must be one of 'session' or 'local'."),S.call(this,{filename:h,flags:"c",vfs:"kvvfs"})};const _=e.oo1.JsStorageDb;_.prototype=Object.create(p.prototype),_.clearStorage=r.sqlite3_js_kvvfs_clear,_.prototype.clearStorage=function(){return _.clearStorage(w(this).filename)},_.storageSize=r.sqlite3_js_kvvfs_size,_.prototype.storageSize=function(){return _.storageSize(w(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){e.initWorker1API=function(){const s=(...p)=>{throw new Error(p.join(" "))};globalThis.WorkerGlobalScope instanceof Function||s("initWorker1API() must be run from a Worker thread."),this.self;const r=this.sqlite3||s("Missing this.sqlite3 object."),i=r.oo1.DB,l=function(p){let f=d.idMap.get(p);return f||(f="db#"+ ++d.idSeq+"@"+p.pointer,d.idMap.set(p,f),f)},d={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(p){const f=new i(p);return this.dbs[l(f)]=f,this.dbList.indexOf(f)<0&&this.dbList.push(f),f},close:function(p,f){if(p){delete this.dbs[l(p)];const y=p.filename,w=r.wasm.sqlite3_wasm_db_vfs(p.pointer,0);p.close();const m=this.dbList.indexOf(p);m>=0&&this.dbList.splice(m,1),f&&y&&w&&r.wasm.sqlite3_wasm_vfs_unlink(w,y)}},post:function(p,f){f&&f.length?(globalThis.postMessage(p,Array.from(f)),f.length=0):globalThis.postMessage(p)},dbs:Object.create(null),getDb:function(p,f=!0){return this.dbs[p]||(f?s("Unknown (or closed) DB ID:",p):void 0)}},E=function(p=d.dbList[0]){return p&&p.pointer?p:s("DB is not opened.")},k=function(p,f=!0){const y=d.getDb(p.dbId,!1)||d.dbList[0];return f?E(y):y},j=function(){return d.dbList[0]&&l(d.dbList[0])},H=function(p){const f=/^file:.+(vfs=(\w+))/.exec(p);return r.capi.sqlite3_vfs_find(f?f[2]:0)},Y=p=>p===""||p[0]===":",S={open:function(p){const f=Object.create(null),y=p.args||Object.create(null);y.simulateError&&s("Throwing because of simulateError flag.");const w=Object.create(null);let m,D;if(f.vfs=y.vfs,Y(y.filename)?f.filename=y.filename||"":(f.filename=y.filename,m=y.byteArray,m&&(D=H(y.filename))),D){let F;try{F=r.wasm.allocFromTypedArray(m);const B=r.wasm.sqlite3_wasm_vfs_create_file(D,f.filename,F,m.byteLength);B&&r.SQLite3Error.toss(B)}catch(B){throw new r.SQLite3Error(B.name+" creating "+y.filename+": "+B.message,{cause:B})}finally{F&&r.wasm.dealloc(F)}}const N=d.open(f);return w.filename=N.filename,w.persistent=!!r.capi.sqlite3_js_db_uses_vfs(N.pointer,"opfs"),w.dbId=l(N),w.vfs=N.dbVfsName(),w},close:function(p){const f=k(p,!1),y={filename:f&&f.filename};if(f){const w=p.args&&typeof p.args=="object"?!!p.args.unlink:!1;d.close(f,w)}return y},exec:function(p){const f=typeof p.args=="string"?{sql:p.args}:p.args||Object.create(null);f.rowMode==="stmt"?s("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):f.sql||s("'exec' requires input SQL.");const y=k(p);(f.callback||Array.isArray(f.resultRows))&&(y._blobXfer=d.xfer);const w=f.callback;let m=0;const D=!!f.columnNames;typeof w=="string"&&(D||(f.columnNames=[]),f.callback=function(N,F){d.post({type:w,columnNames:f.columnNames,rowNumber:++m,row:N},d.xfer)});try{const N=f.countChanges?y.changes(!0,f.countChanges===64):void 0;y.exec(f),N!==void 0&&(f.changeCount=y.changes(!0,f.countChanges===64)-N),f.callback instanceof Function&&(f.callback=w,d.post({type:w,columnNames:f.columnNames,rowNumber:null,row:void 0}))}finally{delete y._blobXfer,f.callback&&(f.callback=w)}return f},"config-get":function(){const p=Object.create(null),f=r.config;return["bigIntEnabled"].forEach(function(y){Object.getOwnPropertyDescriptor(f,y)&&(p[y]=f[y])}),p.version=r.version,p.vfsList=r.capi.sqlite3_js_vfs_list(),p.opfsEnabled=!!r.opfs,p},export:function(p){const f=k(p),y={byteArray:r.capi.sqlite3_js_db_export(f.pointer),filename:f.filename,mimetype:"application/x-sqlite3"};return d.xfer.push(y.byteArray.buffer),y},toss:function(p){s("Testing worker exception")},"opfs-tree":async function(p){return r.opfs||s("OPFS support is unavailable."),await r.opfs.treeList()}};globalThis.onmessage=async function(p){p=p.data;let f,y=p.dbId,w=p.type;const m=performance.now();try{S.hasOwnProperty(w)&&S[w]instanceof Function?f=await S[w](p):s("Unknown db worker message type:",p.type)}catch(D){w="error",f={operation:p.type,message:D.message,errorClass:D.name,input:p},D.stack&&(f.stack=typeof D.stack=="string"?D.stack.split(/\n\s*/):D.stack)}y||(y=f.dbId||j()),d.post({type:w,dbId:y,messageId:p.messageId,workerReceivedTime:m,workerRespondTime:performance.now(),departureTime:p.departureTime,result:f},d.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}.bind({self,sqlite3:e})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){const s=e.wasm,r=e.capi,i=e.util.toss3,l=Object.create(null),d=Object.create(null),E=e.StructBinder;e.vfs=l,e.vtab=d;const k=r.sqlite3_index_info;k.prototype.nthConstraint=function(p,f=!1){if(p<0||p>=this.$nConstraint)return!1;const y=this.$aConstraint+k.sqlite3_index_constraint.structInfo.sizeof*p;return f?y:new k.sqlite3_index_constraint(y)},k.prototype.nthConstraintUsage=function(p,f=!1){if(p<0||p>=this.$nConstraint)return!1;const y=this.$aConstraintUsage+k.sqlite3_index_constraint_usage.structInfo.sizeof*p;return f?y:new k.sqlite3_index_constraint_usage(y)},k.prototype.nthOrderBy=function(p,f=!1){if(p<0||p>=this.$nOrderBy)return!1;const y=this.$aOrderBy+k.sqlite3_index_orderby.structInfo.sizeof*p;return f?y:new k.sqlite3_index_orderby(y)};const j=function p(f,y,w,m=p.installMethodArgcCheck){if(f instanceof E.StructType?!(w instanceof Function)&&!s.isPtr(w)&&i("Usage errror: expecting a Function or WASM pointer to one."):i("Usage error: target object is-not-a StructType."),arguments.length===1)return(B,te)=>p(f,B,te,m);p.argcProxy||(p.argcProxy=function(B,te,u,q){return function(...v){return u.length!==arguments.length&&i("Argument mismatch for",B.structInfo.name+"::"+te+": Native signature is:",q),u.apply(this,v)}},p.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((B,te)=>{if(typeof B=="number")try{s.uninstallFunction(B)}catch{}}),delete this.ondispose.__removeFuncList)});const D=f.memberSignature(y);D.length<2&&i("Member",y,"does not have a function pointer signature:",D);const N=f.memberKey(y),F=m&&!s.isPtr(w)?p.argcProxy(f,N,w,D):w;if(s.isPtr(F))F&&!s.functionEntry(F)&&i("Pointer",F,"is not a WASM function table entry."),f[N]=F;else{const B=s.installFunction(F,f.memberSignature(y,!0));f[N]=B,(!f.ondispose||!f.ondispose.__removeFuncList)&&(f.addOnDispose("ondispose.__removeFuncList handler",p.removeFuncList),f.ondispose.__removeFuncList=[]),f.ondispose.__removeFuncList.push(N,B)}return(B,te)=>p(f,B,te,m)};j.installMethodArgcCheck=!1;const H=function(p,f,y=j.installMethodArgcCheck){const w=new Map;for(const m of Object.keys(f)){const D=f[m],N=w.get(D);if(N){const F=p.memberKey(m);p[F]=p[p.memberKey(N)]}else j(p,m,D,y),w.set(D,m)}return p};E.StructType.prototype.installMethod=function(f,y,w=j.installMethodArgcCheck){return arguments.length<3&&f&&typeof f=="object"?H(this,...arguments):j(this,...arguments)},E.StructType.prototype.installMethods=function(p,f=j.installMethodArgcCheck){return H(this,p,f)},r.sqlite3_vfs.prototype.registerVfs=function(p=!1){this instanceof e.capi.sqlite3_vfs||i("Expecting a sqlite3_vfs-type argument.");const f=r.sqlite3_vfs_register(this,p?1:0);return f&&i("sqlite3_vfs_register(",this,") failed with rc",f),this.pointer!==r.sqlite3_vfs_find(this.$zName)&&i("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},l.installVfs=function(p){let f=0;const y=["io","vfs"];for(const w of y){const m=p[w];m&&(++f,H(m.struct,m.methods,!!m.applyArgcCheck),w==="vfs"&&(!m.struct.$zName&&typeof m.name=="string"&&m.struct.addOnDispose(m.struct.$zName=s.allocCString(m.name)),m.struct.registerVfs(!!m.asDefault)))}return f||i("Misuse: installVfs() options object requires at least","one of:",y),this};const Y=function(p,f){return function(y,w=!1){if(arguments.length===0&&(y=new f),y instanceof f)return this.set(y.pointer,y),y;s.isPtr(y)||e.SQLite3Error.toss("Invalid argument to",p+"()");let m=this.get(y);return w&&this.delete(y),m}.bind(new Map)},S=function(p,f){const y=Y(p,f);return Object.assign(Object.create(null),{StructType:f,create:w=>{const m=y();return s.pokePtr(w,m.pointer),m},get:w=>y(w),unget:w=>y(w,!0),dispose:w=>{const m=y(w,!0);m&&m.dispose()}})};d.xVtab=S("xVtab",r.sqlite3_vtab),d.xCursor=S("xCursor",r.sqlite3_vtab_cursor),d.xIndexInfo=p=>new r.sqlite3_index_info(p),d.xError=function p(f,y,w){if(p.errorReporter instanceof Function)try{p.errorReporter("sqlite3_module::"+f+"(): "+y.message)}catch{}let m;return y instanceof e.WasmAllocError?m=r.SQLITE_NOMEM:arguments.length>2?m=w:y instanceof e.SQLite3Error&&(m=y.resultCode),m||r.SQLITE_ERROR},d.xError.errorReporter=console.error.bind(console),d.xRowid=(p,f)=>s.poke(p,f,"i64"),d.setupModule=function(p){let f=!1;const y=this instanceof r.sqlite3_module?this:p.struct||(f=new r.sqlite3_module);try{const w=p.methods||i("Missing 'methods' object.");for(const m of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const D=m[0],N=m[1];w[D]===!0?w[D]=w[N]:w[N]===!0&&(w[N]=w[D])}if(p.catchExceptions){const m=function(F,B){return["xConnect","xCreate"].indexOf(F)>=0?function(te,u,q,v,M,_){try{return B(...arguments)||0}catch(h){return h instanceof e.WasmAllocError||(s.dealloc(s.peekPtr(_)),s.pokePtr(_,s.allocCString(h.message))),d.xError(F,h)}}:function(...te){try{return B(...te)||0}catch(u){return d.xError(F,u)}}},D=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],N=Object.create(null);for(const F of D){const B=w[F];if(B instanceof Function)F==="xConnect"&&w.xCreate===B?N[F]=w.xCreate:F==="xCreate"&&w.xConnect===B?N[F]=w.xConnect:N[F]=m(F,B);else continue}H(y,N,!1)}else H(y,w,!!p.applyArgcCheck);if(y.$iVersion===0){let m;typeof p.iVersion=="number"?m=p.iVersion:y.$xShadowName?m=3:y.$xSavePoint||y.$xRelease||y.$xRollbackTo?m=2:m=1,y.$iVersion=m}}catch(w){throw f&&f.dispose(),w}return y},r.sqlite3_module.prototype.setupModule=function(p){return d.setupModule.call(this,p)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){const s=function r(i){if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory)return Promise.reject(new Error("Missing required OPFS APIs."));(!i||typeof i!="object")&&(i=Object.create(null));const l=new URL(globalThis.location.href).searchParams;return l.has("opfs-disable")?Promise.resolve(e):(i.verbose===void 0&&(i.verbose=l.has("opfs-verbose")?+l.get("opfs-verbose")||2:1),i.sanityChecks===void 0&&(i.sanityChecks=l.has("opfs-sanity-check")),i.proxyUri===void 0&&(i.proxyUri=r.defaultProxyUri),typeof i.proxyUri=="function"&&(i.proxyUri=i.proxyUri()),new Promise(function(E,k){const j=[e.config.error,e.config.warn,e.config.log],H=(x,...O)=>{i.verbose>x&&j[x]("OPFS syncer:",...O)},Y=(...x)=>H(2,...x),S=(...x)=>H(1,...x),p=(...x)=>H(0,...x),f=e.util.toss,y=e.capi,w=e.wasm,m=y.sqlite3_vfs,D=y.sqlite3_file,N=y.sqlite3_io_methods,F=Object.create(null),B=()=>globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory;F.metrics={dump:function(){let x,O=0,P=0,$=0;for(x in a.opIds){const Q=g[x];O+=Q.count,P+=Q.time,$+=Q.wait,Q.avgTime=Q.count&&Q.time?Q.time/Q.count:0,Q.avgWait=Q.count&&Q.wait?Q.wait/Q.count:0}e.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",g,`
Total of`,O,"op(s) for",P,"ms (incl. "+$+" ms of waiting on the async side)"),e.config.log("Serialization metrics:",g.s11n),_.postMessage({type:"opfs-async-metrics"})},reset:function(){let x;const O=$=>$.count=$.time=$.wait=0;for(x in a.opIds)O(g[x]=Object.create(null));let P=g.s11n=Object.create(null);P=P.serialize=Object.create(null),P.count=P.time=0,P=g.s11n.deserialize=Object.create(null),P.count=P.time=0}};const te=new N,u=new m().addOnDispose(()=>te.dispose());let q;const v=x=>(q=!0,u.dispose(),k(x)),M=()=>(q=!1,E(e)),_=new Worker(new URL("/assets/sqlite3-opfs-async-proxy-f7581b46.js",self.location));setTimeout(()=>{q===void 0&&v(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),_._originalOnError=_.onerror,_.onerror=function(x){p("Error initializing OPFS asyncer:",x),v(new Error("Loading OPFS async Worker failed for unknown reasons."))};const h=y.sqlite3_vfs_find(null),c=h?new m(h):null;te.$iVersion=1,u.$iVersion=2,u.$szOsFile=y.sqlite3_file.structInfo.sizeof,u.$mxPathname=1024,u.$zName=w.allocCString("opfs"),u.$xDlOpen=u.$xDlError=u.$xDlSym=u.$xDlClose=null,u.addOnDispose("$zName",u.$zName,"cleanup default VFS wrapper",()=>c?c.dispose():null);const a=Object.create(null);a.verbose=i.verbose,a.littleEndian=(()=>{const x=new ArrayBuffer(2);return new DataView(x).setInt16(0,256,!0),new Int16Array(x)[0]===256})(),a.asyncIdleWaitTime=150,a.asyncS11nExceptions=1,a.fileBufferSize=1024*64,a.sabS11nOffset=a.fileBufferSize,a.sabS11nSize=u.$mxPathname*2,a.sabIO=new SharedArrayBuffer(a.fileBufferSize+a.sabS11nSize),a.opIds=Object.create(null);const g=Object.create(null);{let x=0;a.opIds.whichOp=x++,a.opIds.rc=x++,a.opIds.xAccess=x++,a.opIds.xClose=x++,a.opIds.xDelete=x++,a.opIds.xDeleteNoWait=x++,a.opIds.xFileSize=x++,a.opIds.xLock=x++,a.opIds.xOpen=x++,a.opIds.xRead=x++,a.opIds.xSleep=x++,a.opIds.xSync=x++,a.opIds.xTruncate=x++,a.opIds.xUnlock=x++,a.opIds.xWrite=x++,a.opIds.mkdir=x++,a.opIds["opfs-async-metrics"]=x++,a.opIds["opfs-async-shutdown"]=x++,a.opIds.retry=x++,a.sabOP=new SharedArrayBuffer(x*4),F.metrics.reset()}a.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(x=>{(a.sq3Codes[x]=y[x])===void 0&&f("Maintenance required: not found:",x)}),a.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,defaultUnlockAsap:!1});const I=(x,...O)=>{const P=a.opIds[x]||f("Invalid op ID:",x);a.s11n.serialize(...O),Atomics.store(a.sabOPView,a.opIds.rc,-1),Atomics.store(a.sabOPView,a.opIds.whichOp,P),Atomics.notify(a.sabOPView,a.opIds.whichOp);const $=performance.now();Atomics.wait(a.sabOPView,a.opIds.rc,-1);const Q=Atomics.load(a.sabOPView,a.opIds.rc);if(g[x].wait+=performance.now()-$,Q&&a.asyncS11nExceptions){const oe=a.s11n.deserialize();oe&&p(x+"() async error:",...oe)}return Q};F.debug={asyncShutdown:()=>{S("Shutting down OPFS async listener. The OPFS VFS will no longer work."),I("opfs-async-shutdown")},asyncRestart:()=>{S("Attempting to restart OPFS VFS async listener. Might work, might not."),_.postMessage({type:"opfs-async-restart"})}};const z=()=>{if(a.s11n)return a.s11n;const x=new TextDecoder,O=new TextEncoder("utf-8"),P=new Uint8Array(a.sabIO,a.sabS11nOffset,a.sabS11nSize),$=new DataView(a.sabIO,a.sabS11nOffset,a.sabS11nSize);a.s11n=Object.create(null);const Q=Object.create(null);Q.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},Q.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},Q.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},Q.string={id:4};const oe=G=>Q[typeof G]||f("Maintenance required: this value type cannot be serialized.",G),ue=G=>{switch(G){case Q.number.id:return Q.number;case Q.bigint.id:return Q.bigint;case Q.boolean.id:return Q.boolean;case Q.string.id:return Q.string;default:f("Invalid type ID:",G)}};return a.s11n.deserialize=function(G=!1){++g.s11n.deserialize.count;const ve=performance.now(),Te=P[0],qe=Te?[]:null;if(Te){const T=[];let W=1,V,J,_e;for(V=0;V<Te;++V,++W)T.push(ue(P[W]));for(V=0;V<Te;++V){const pe=T[V];pe.getter?(_e=$[pe.getter](W,a.littleEndian),W+=pe.size):(J=$.getInt32(W,a.littleEndian),W+=4,_e=x.decode(P.slice(W,W+J)),W+=J),qe.push(_e)}}return G&&(P[0]=0),g.s11n.deserialize.time+=performance.now()-ve,qe},a.s11n.serialize=function(...G){const ve=performance.now();if(++g.s11n.serialize.count,G.length){const Te=[];let qe=0,T=1;for(P[0]=G.length&255;qe<G.length;++qe,++T)Te.push(oe(G[qe])),P[T]=Te[qe].id;for(qe=0;qe<G.length;++qe){const W=Te[qe];if(W.setter)$[W.setter](T,G[qe],a.littleEndian),T+=W.size;else{const V=O.encode(G[qe]);$.setInt32(T,V.byteLength,a.littleEndian),T+=4,P.set(V,T),T+=V.byteLength}}}else P[0]=0;g.s11n.serialize.time+=performance.now()-ve},a.s11n},X=function x(O=16){x._chars||(x._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",x._n=x._chars.length);const P=[];let $=0;for(;$<O;++$){const Q=Math.random()*(x._n*64)%x._n|0;P[$]=x._chars[Q]}return P.join("")},Z=Object.create(null),R=Object.create(null);R.op=void 0,R.start=void 0;const b=x=>{R.start=performance.now(),R.op=x,++g[x].count},A=()=>g[R.op].time+=performance.now()-R.start,C={xCheckReservedLock:function(x,O){const P=Z[x];return w.poke(O,P.lockType?1:0,"i32"),0},xClose:function(x){b("xClose");let O=0;const P=Z[x];return P&&(delete Z[x],O=I("xClose",x),P.sq3File&&P.sq3File.dispose()),A(),O},xDeviceCharacteristics:function(x){return y.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(x,O,P){return y.SQLITE_NOTFOUND},xFileSize:function(x,O){b("xFileSize");let P=I("xFileSize",x);if(P==0)try{const $=a.s11n.deserialize()[0];w.poke(O,$,"i64")}catch($){p("Unexpected error reading xFileSize() result:",$),P=a.sq3Codes.SQLITE_IOERR}return A(),P},xLock:function(x,O){b("xLock");const P=Z[x];let $=0;return P.lockType?P.lockType=O:($=I("xLock",x,O),$===0&&(P.lockType=O)),A(),$},xRead:function(x,O,P,$){b("xRead");const Q=Z[x];let oe;try{oe=I("xRead",x,P,Number($)),(oe===0||y.SQLITE_IOERR_SHORT_READ===oe)&&w.heap8u().set(Q.sabView.subarray(0,P),O)}catch(ue){p("xRead(",arguments,") failed:",ue,Q),oe=y.SQLITE_IOERR_READ}return A(),oe},xSync:function(x,O){b("xSync"),++g.xSync.count;const P=I("xSync",x,O);return A(),P},xTruncate:function(x,O){b("xTruncate");const P=I("xTruncate",x,Number(O));return A(),P},xUnlock:function(x,O){b("xUnlock");const P=Z[x];let $=0;return y.SQLITE_LOCK_NONE===O&&P.lockType&&($=I("xUnlock",x,O)),$===0&&(P.lockType=O),A(),$},xWrite:function(x,O,P,$){b("xWrite");const Q=Z[x];let oe;try{Q.sabView.set(w.heap8u().subarray(O,O+P)),oe=I("xWrite",x,P,Number($))}catch(ue){p("xWrite(",arguments,") failed:",ue,Q),oe=y.SQLITE_IOERR_WRITE}return A(),oe}},U={xAccess:function(x,O,P,$){b("xAccess");const Q=I("xAccess",w.cstrToJs(O));return w.poke($,Q?0:1,"i32"),A(),0},xCurrentTime:function(x,O){return w.poke(O,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(x,O){return w.poke(O,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(x,O,P){b("xDelete");const $=I("xDelete",w.cstrToJs(O),P,!1);return A(),$},xFullPathname:function(x,O,P,$){return w.cstrncpy($,O,P)<P?0:y.SQLITE_CANTOPEN},xGetLastError:function(x,O,P){return S("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(O,P,$,Q,oe){b("xOpen");let ue=0;P===0?P=X():typeof P=="number"&&(y.sqlite3_uri_boolean(P,"opfs-unlock-asap",0)&&(ue|=a.opfsFlags.OPFS_UNLOCK_ASAP),P=w.cstrToJs(P));const G=Object.create(null);G.fid=$,G.filename=P,G.sab=new SharedArrayBuffer(a.fileBufferSize),G.flags=Q;const ve=I("xOpen",$,P,Q,ue);return ve||(G.readOnly&&w.poke(oe,y.SQLITE_OPEN_READONLY,"i32"),Z[$]=G,G.sabView=a.sabFileBufView,G.sq3File=new D($),G.sq3File.$pMethods=te.pointer,G.lockType=y.SQLITE_LOCK_NONE),A(),ve}};if(c&&(u.$xRandomness=c.$xRandomness,u.$xSleep=c.$xSleep),u.$xRandomness||(U.xRandomness=function(x,O,P){const $=w.heap8u();let Q=0;for(;Q<O;++Q)$[P+Q]=Math.random()*255e3&255;return Q}),u.$xSleep||(U.xSleep=function(x,O){return Atomics.wait(a.sabOPView,a.opIds.xSleep,0,O),0}),F.getResolvedPath=function(x,O){const P=new URL(x,"file://irrelevant").pathname;return O?P.split("/").filter($=>!!$):P},F.getDirForFilename=async function(O,P=!1){const $=F.getResolvedPath(O,!0),Q=$.pop();let oe=F.rootDirectory;for(const ue of $)ue&&(oe=await oe.getDirectoryHandle(ue,{create:!!P}));return[oe,Q]},F.mkdir=async function(x){try{return await F.getDirForFilename(x+"/filepart",!0),!0}catch{return!1}},F.entryExists=async function(x){try{const[O,P]=await F.getDirForFilename(x);return await O.getFileHandle(P),!0}catch{return!1}},F.randomFilename=X,F.registerVfs=(x=!1)=>w.exports.sqlite3_vfs_register(u.pointer,x?1:0),F.treeList=async function(){const x=async function P($,Q){Q.name=$.name,Q.dirs=[],Q.files=[];for await(const oe of $.values())if(oe.kind==="directory"){const ue=Object.create(null);Q.dirs.push(ue),await P(oe,ue)}else Q.files.push(oe.name)},O=Object.create(null);return await x(F.rootDirectory,O),O},F.rmfr=async function(){const x=F.rootDirectory,O={recurse:!0};for await(const P of x.values())x.removeEntry(P.name,O)},F.unlink=async function(x,O=!1,P=!1){try{const[$,Q]=await F.getDirForFilename(x,!1);return await $.removeEntry(Q,{recursive:O}),!0}catch($){if(P)throw new Error("unlink(",arguments[0],") failed: "+$.message,{cause:$});return!1}},F.traverse=async function(x){const O={recursive:!0,directory:F.rootDirectory};typeof x=="function"&&(x={callback:x}),x=Object.assign(O,x||{}),async function $(Q,oe){for await(const ue of Q.values()){if(x.callback(ue,Q,oe)===!1)return!1;if(x.recursive&&ue.kind==="directory"&&await $(ue,oe+1)===!1)break}}(x.directory,0)},F.importDb=async function(x,O){O instanceof ArrayBuffer&&(O=new Uint8Array(O));const P=O.byteLength;(P<512||P%512!=0)&&f("Byte array size is invalid for an SQLite db.");const $="SQLite format 3";for(let G=0;G<$.length;++G)$.charCodeAt(G)!==O[G]&&f("Input does not contain an SQLite database header.");let Q;const[oe,ue]=await F.getDirForFilename(x,!0);try{Q=await(await oe.getFileHandle(ue,{create:!0})).createSyncAccessHandle(),Q.truncate(0);const ve=Q.write(O,{at:0});return ve!=P&&f("Expected to write "+P+" bytes but wrote "+ve+"."),Q.write(new Uint8Array([1,1]),{at:18}),ve}catch(G){throw Q&&(await Q.close(),Q=void 0),await oe.removeEntry(ue).catch(()=>{}),G}finally{Q&&await Q.close()}},e.oo1){const x=function(...O){const P=e.oo1.DB.dbCtorHelper.normalizeArgs(...O);P.vfs=u.$zName,e.oo1.DB.dbCtorHelper.call(this,P)};x.prototype=Object.create(e.oo1.DB.prototype),e.oo1.OpfsDb=x,x.importDb=F.importDb,e.oo1.DB.dbCtorHelper.setVfsPostOpenSql(u.pointer,function(O,P){P.capi.sqlite3_busy_timeout(O,1e4),P.capi.sqlite3_exec(O,["pragma journal_mode=DELETE;","pragma cache_size=-16384;"],0,0,0)})}const ee=function(){const x=w.scopedAllocPush(),O=new D;try{const P=O.pointer,$=y.SQLITE_OPEN_CREATE|y.SQLITE_OPEN_READWRITE|y.SQLITE_OPEN_MAIN_DB,Q=w.scopedAlloc(8),oe="/sanity/check/file"+X(8),ue=w.scopedAllocCString(oe);let G;if(a.s11n.serialize("This is  string."),G=a.s11n.deserialize(),Y("deserialize() says:",G),G[0]!=="This is  string."&&f("String d13n error."),U.xAccess(u.pointer,ue,0,Q),G=w.peek(Q,"i32"),Y("xAccess(",oe,") exists ?=",G),G=U.xOpen(u.pointer,ue,P,$,Q),Y("open rc =",G,"state.sabOPView[xOpen] =",a.sabOPView[a.opIds.xOpen]),G!==0){p("open failed with code",G);return}U.xAccess(u.pointer,ue,0,Q),G=w.peek(Q,"i32"),G||f("xAccess() failed to detect file."),G=C.xSync(O.pointer,0),G&&f("sync failed w/ rc",G),G=C.xTruncate(O.pointer,1024),G&&f("truncate failed w/ rc",G),w.poke(Q,0,"i64"),G=C.xFileSize(O.pointer,Q),G&&f("xFileSize failed w/ rc",G),Y("xFileSize says:",w.peek(Q,"i64")),G=C.xWrite(O.pointer,ue,10,1),G&&f("xWrite() failed!");const ve=w.scopedAlloc(16);G=C.xRead(O.pointer,ve,6,2),w.poke(ve+6,0);let Te=w.cstrToJs(ve);Y("xRead() got:",Te),Te!=="sanity"&&f("Unexpected xRead() value."),U.xSleep&&(Y("xSleep()ing before close()ing..."),U.xSleep(u.pointer,2e3),Y("waking up from xSleep()")),G=C.xClose(P),Y("xClose rc =",G,"sabOPView =",a.sabOPView),Y("Deleting file:",oe),U.xDelete(u.pointer,ue,4660),U.xAccess(u.pointer,ue,0,Q),G=w.peek(Q,"i32"),G&&f("Expecting 0 from xAccess(",oe,") after xDelete()."),S("End of OPFS sanity checks.")}finally{O.dispose(),w.scopedAllocPop(x)}};_.onmessage=function({data:x}){switch(x.type){case"opfs-unavailable":v(new Error(x.payload.join(" ")));break;case"opfs-async-loaded":_.postMessage({type:"opfs-async-init",args:a});break;case"opfs-async-inited":{if(q===!0)break;try{e.vfs.installVfs({io:{struct:te,methods:C},vfs:{struct:u,methods:U}}),a.sabOPView=new Int32Array(a.sabOP),a.sabFileBufView=new Uint8Array(a.sabIO,0,a.fileBufferSize),a.sabS11nView=new Uint8Array(a.sabIO,a.sabS11nOffset,a.sabS11nSize),z(),i.sanityChecks&&(S("Running sanity checks because of opfs-sanity-check URL arg..."),ee()),B()?navigator.storage.getDirectory().then(O=>{_.onerror=_._originalOnError,delete _._originalOnError,e.opfs=F,F.rootDirectory=O,Y("End of OPFS sqlite3_vfs setup.",u),M()}).catch(v):M()}catch(O){p(O),v(O)}break}default:{const O="Unexpected message from the OPFS async worker: "+JSON.stringify(x);p(O),v(new Error(O));break}}}}))};s.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async r=>{try{let i=s.defaultProxyUri;return r.scriptInfo.sqlite3Dir&&(s.defaultProxyUri=r.scriptInfo.sqlite3Dir+i),s().catch(l=>{r.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",l.message)})}catch(i){return r.config.error("installOpfsVfs() exception:",i),Promise.reject(i)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){const s=e.util.toss,r=e.util.toss3,i=Object.create(null),l=e.capi,d=e.wasm,E=4096,k=512,j=4,H=8,Y=k+j,S=k,p=Y,f=E,y=l.SQLITE_OPEN_MAIN_DB|l.SQLITE_OPEN_MAIN_JOURNAL|l.SQLITE_OPEN_SUPER_JOURNAL|l.SQLITE_OPEN_WAL,w=".opaque",m=()=>Math.random().toString(36).slice(2),D=new TextDecoder,N=new TextEncoder,F=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2}),B=[e.config.error,e.config.warn,e.config.log];e.config.log;const te=e.config.warn;e.config.error;const u=new Map,q=R=>u.get(R),v=(R,b)=>{b?u.set(R,b):u.delete(R)},M=new Map,_=R=>M.get(R),h=(R,b)=>{b?M.set(R,b):M.delete(R)},c={xCheckReservedLock:function(R,b){const A=_(R);return A.log("xCheckReservedLock"),A.storeErr(),d.poke32(b,1),0},xClose:function(R){const b=_(R);b.storeErr();const A=b.getOFileForS3File(R);if(A)try{b.log(`xClose ${A.path}`),b.mapS3FileToOFile(R,!1),A.sah.flush(),A.flags&l.SQLITE_OPEN_DELETEONCLOSE&&b.deletePath(A.path)}catch(C){return b.storeErr(C),l.SQLITE_IOERR}return 0},xDeviceCharacteristics:function(R){return l.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(R,b,A){return l.SQLITE_NOTFOUND},xFileSize:function(R,b){const A=_(R);A.log("xFileSize");const U=A.getOFileForS3File(R).sah.getSize()-f;return d.poke64(b,BigInt(U)),0},xLock:function(R,b){const A=_(R);A.log(`xLock ${b}`),A.storeErr();const C=A.getOFileForS3File(R);return C.lockType=b,0},xRead:function(R,b,A,C){const U=_(R);U.storeErr();const ee=U.getOFileForS3File(R);U.log(`xRead ${ee.path} ${A} @ ${C}`);try{const x=ee.sah.read(d.heap8u().subarray(b,b+A),{at:f+Number(C)});return x<A?(d.heap8u().fill(0,b+x,b+A),l.SQLITE_IOERR_SHORT_READ):0}catch(x){return U.storeErr(x),l.SQLITE_IOERR}},xSectorSize:function(R){return E},xSync:function(R,b){const A=_(R);A.log(`xSync ${b}`),A.storeErr();const C=A.getOFileForS3File(R);try{return C.sah.flush(),0}catch(U){return A.storeErr(U),l.SQLITE_IOERR}},xTruncate:function(R,b){const A=_(R);A.log(`xTruncate ${b}`),A.storeErr();const C=A.getOFileForS3File(R);try{return C.sah.truncate(f+Number(b)),0}catch(U){return A.storeErr(U),l.SQLITE_IOERR}},xUnlock:function(R,b){const A=_(R);A.log("xUnlock");const C=A.getOFileForS3File(R);return C.lockType=b,0},xWrite:function(R,b,A,C){const U=_(R);U.storeErr();const ee=U.getOFileForS3File(R);U.log(`xWrite ${ee.path} ${A} ${C}`);try{return ee.sah.write(d.heap8u().subarray(b,b+A),{at:f+Number(C)})===A?0:l.SQLITE_IOERR}catch(x){return U.storeErr(x),l.SQLITE_IOERR}}},a=new l.sqlite3_io_methods;a.$iVersion=1,e.vfs.installVfs({io:{struct:a,methods:c}});const g={xAccess:function(R,b,A,C){const U=q(R);U.storeErr();try{const ee=U.getPath(b);d.poke32(C,U.hasFilename(ee)?1:0)}catch{d.poke32(C,0)}return 0},xCurrentTime:function(R,b){return d.poke(b,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(R,b){return d.poke(b,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(R,b,A){const C=q(R);C.log(`xDelete ${d.cstrToJs(b)}`),C.storeErr();try{return C.deletePath(C.getPath(b)),0}catch(U){return C.storeErr(U),l.SQLITE_IOERR_DELETE}},xFullPathname:function(R,b,A,C){return d.cstrncpy(C,b,A)<A?0:l.SQLITE_CANTOPEN},xGetLastError:function(R,b,A){const C=q(R);C.log(`xGetLastError ${b}`);const U=C.popErr();if(U){const ee=d.scopedAllocPush();try{const[x,O]=d.scopedAllocCString(U.message,!0);d.cstrncpy(A,x,b),O>b&&d.poke8(A+b-1,0)}catch{return l.SQLITE_NOMEM}finally{d.scopedAllocPop(ee)}}return 0},xOpen:function(b,A,C,U,ee){const x=q(b);try{x.log(`xOpen ${d.cstrToJs(A)} ${U}`);const O=A&&d.peek8(A)?x.getPath(A):m();let P=x.getSAHForPath(O);!P&&U&l.SQLITE_OPEN_CREATE&&(x.getFileCount()<x.getCapacity()?(P=x.nextAvailableSAH(),x.setAssociatedPath(P,O,U)):s("SAH pool is full. Cannot create file",O)),P||s("file not found:",O);const $={path:O,flags:U,sah:P};x.mapS3FileToOFile(C,$),$.lockType=l.SQLITE_LOCK_NONE;const Q=new l.sqlite3_file(C);return Q.$pMethods=a.pointer,Q.dispose(),d.poke32(ee,U),0}catch(O){return x.storeErr(O),l.SQLITE_CANTOPEN}}},I=function(R){e.capi.sqlite3_vfs_find(R)&&r("VFS name is already registered:",R);const b=new l.sqlite3_vfs,A=l.sqlite3_vfs_find(null),C=A?new l.sqlite3_vfs(A):null;return b.$iVersion=2,b.$szOsFile=l.sqlite3_file.structInfo.sizeof,b.$mxPathname=k,b.addOnDispose(b.$zName=d.allocCString(R),()=>v(b.pointer,0)),C&&(b.$xRandomness=C.$xRandomness,b.$xSleep=C.$xSleep,C.dispose()),!b.$xRandomness&&!g.xRandomness&&(g.xRandomness=function(U,ee,x){const O=d.heap8u();let P=0;for(;P<ee;++P)O[x+P]=Math.random()*255e3&255;return P}),!b.$xSleep&&!g.xSleep&&(g.xSleep=(U,ee)=>0),e.vfs.installVfs({vfs:{struct:b,methods:g}}),b};class z{vfsDir;#e;#i;#l;#r=new Map;#n=new Map;#s=new Set;#a=new Map;#t=new Uint8Array(Y);#c;#o;#_;constructor(b=Object.create(null)){this.#_=b.verbosity??F.verbosity,this.vfsName=b.name||F.name,this.#o=I(this.vfsName),v(this.#o.pointer,this),this.vfsDir=b.directory||"."+this.vfsName,this.#c=new DataView(this.#t.buffer,this.#t.byteOffset),this.isReady=this.reset(!!(b.clearOnInit??F.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(b.initialCapacity||F.initialCapacity)})}#u(b,...A){this.#_>b&&B[b](this.vfsName+":",...A)}log(...b){this.#u(2,...b)}warn(...b){this.#u(1,...b)}error(...b){this.#u(0,...b)}getVfs(){return this.#o}getCapacity(){return this.#r.size}getFileCount(){return this.#n.size}getFileNames(){const b=[],A=this.#n.keys();for(const C of A)b.push(C);return b}async addCapacity(b){for(let A=0;A<b;++A){const C=m(),ee=await(await this.#i.getFileHandle(C,{create:!0})).createSyncAccessHandle();this.#r.set(ee,C),this.setAssociatedPath(ee,"",0)}return this.getCapacity()}async reduceCapacity(b){let A=0;for(const C of Array.from(this.#s)){if(A===b||this.getFileCount()===this.getCapacity())break;const U=this.#r.get(C);C.close(),await this.#i.removeEntry(U),this.#r.delete(C),this.#s.delete(C),++A}return A}releaseAccessHandles(){for(const b of this.#r.keys())b.close();this.#r.clear(),this.#n.clear(),this.#s.clear()}async acquireAccessHandles(b){const A=[];for await(const[C,U]of this.#i)U.kind==="file"&&A.push([C,U]);return Promise.all(A.map(async([C,U])=>{try{const ee=await U.createSyncAccessHandle();if(this.#r.set(ee,C),b)ee.truncate(f),this.setAssociatedPath(ee,"",0);else{const x=this.getAssociatedPath(ee);x?this.#n.set(x,ee):this.#s.add(ee)}}catch(ee){throw this.storeErr(ee),this.releaseAccessHandles(),ee}}))}getAssociatedPath(b){b.read(this.#t,{at:0});const A=this.#c.getUint32(S);if(this.#t[0]&&(A&l.SQLITE_OPEN_DELETEONCLOSE||!(A&y)))return te(`Removing file with unexpected flags ${A.toString(16)}`,this.#t),this.setAssociatedPath(b,"",0),"";const C=new Uint32Array(H/4);b.read(C,{at:p});const U=this.computeDigest(this.#t);if(C.every((ee,x)=>ee===U[x])){const ee=this.#t.findIndex(x=>x===0);return ee===0&&b.truncate(f),ee?D.decode(this.#t.subarray(0,ee)):""}else return te("Disassociating file with bad digest."),this.setAssociatedPath(b,"",0),""}setAssociatedPath(b,A,C){const U=N.encodeInto(A,this.#t);k<=U.written+1&&s("Path too long:",A),this.#t.fill(0,U.written,k),this.#c.setUint32(S,C);const ee=this.computeDigest(this.#t);b.write(this.#t,{at:0}),b.write(ee,{at:p}),b.flush(),A?(this.#n.set(A,b),this.#s.delete(b)):(b.truncate(f),this.#s.add(b))}computeDigest(b){let A=3735928559,C=1103547991;for(const U of b)A=31*A+U*307,C=31*C+U*307;return new Uint32Array([A>>>0,C>>>0])}async reset(b){await this.isReady;let A=await navigator.storage.getDirectory(),C;for(const U of this.vfsDir.split("/"))U&&(C=A,A=await A.getDirectoryHandle(U,{create:!0}));return this.#e=A,this.#l=C,this.#i=await this.#e.getDirectoryHandle(w,{create:!0}),this.releaseAccessHandles(),this.acquireAccessHandles(b)}getPath(b){return d.isPtr(b)&&(b=d.cstrToJs(b)),(b instanceof URL?b:new URL(b,"file://localhost/")).pathname}deletePath(b){const A=this.#n.get(b);return A&&(this.#n.delete(b),this.setAssociatedPath(A,"",0)),!!A}storeErr(b){return b&&this.error(b),this.$error=b}popErr(){const b=this.$error;return this.$error=void 0,b}nextAvailableSAH(){const[b]=this.#s.keys();return b}getOFileForS3File(b){return this.#a.get(b)}mapS3FileToOFile(b,A){A?(this.#a.set(b,A),h(b,this)):(this.#a.delete(b),h(b,!1))}hasFilename(b){return this.#n.has(b)}getSAHForPath(b){return this.#n.get(b)}async removeVfs(){if(!this.#o.pointer||!this.#i)return!1;l.sqlite3_vfs_unregister(this.#o.pointer),this.#o.dispose();try{this.releaseAccessHandles(),await this.#e.removeEntry(w,{recursive:!0}),this.#i=void 0,await this.#l.removeEntry(this.#e.name,{recursive:!0}),this.#e=this.#l=void 0}catch(b){e.config.error(this.vfsName,"removeVfs() failed:",b)}return!0}exportFile(b){const A=this.#n.get(b)||s("File not found:",b),C=A.getSize()-f,U=new Uint8Array(C>0?C:0);if(C>0){const ee=A.read(U,{at:f});ee!=C&&s("Expected to read "+C+" bytes but read "+ee+".")}return U}importDb(b,A){A instanceof ArrayBuffer&&(A=new Uint8Array(A));const C=A.byteLength;(C<512||C%512!=0)&&s("Byte array size is invalid for an SQLite db.");const U="SQLite format 3";for(let O=0;O<U.length;++O)U.charCodeAt(O)!==A[O]&&s("Input does not contain an SQLite database header.");const ee=this.#n.get(b)||this.nextAvailableSAH()||s("No available handles to import to."),x=ee.write(A,{at:f});x!=C?(this.setAssociatedPath(ee,"",0),s("Expected to write "+C+" bytes but wrote "+x+".")):(ee.write(new Uint8Array([1,1]),{at:f+18}),this.setAssociatedPath(ee,b,l.SQLITE_OPEN_MAIN_DB))}}class X{#e;constructor(b){this.#e=b,this.vfsName=b.vfsName}async addCapacity(b){return this.#e.addCapacity(b)}async reduceCapacity(b){return this.#e.reduceCapacity(b)}getCapacity(){return this.#e.getCapacity(this.#e)}getFileCount(){return this.#e.getFileCount()}getFileNames(){return this.#e.getFileNames()}async reserveMinimumCapacity(b){const A=this.#e.getCapacity();return A<b?this.#e.addCapacity(b-A):A}exportFile(b){return this.#e.exportFile(b)}importDb(b,A){return this.#e.importDb(b,A)}async wipeFiles(){return this.#e.reset(!0)}unlink(b){return this.#e.deletePath(b)}async removeVfs(){return this.#e.removeVfs()}}const Z=async()=>{const R=await navigator.storage.getDirectory(),b=".opfs-sahpool-sync-check-"+m(),U=(await(await R.getFileHandle(b,{create:!0})).createSyncAccessHandle()).close();return await U,await R.removeEntry(b),U?.then&&s("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};e.installOpfsSAHPoolVfs=async function(R=Object.create(null)){const b=R.name||F.name;return i[b]?i[b]:!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory?i[b]=Promise.reject(new Error("Missing required OPFS APIs.")):i[b]=Z().then(async function(){if(R.$testThrowInInit)throw R.$testThrowInInit;const A=new z(R);return A.isReady.then(async()=>{const C=new X(A);if(e.oo1){const U=e.oo1,ee=A.getVfs(),x=function(...O){const P=U.DB.dbCtorHelper.normalizeArgs(...O);P.vfs=ee.$zName,U.DB.dbCtorHelper.call(this,P)};x.prototype=Object.create(U.DB.prototype),C.OpfsSAHPoolDb=x,U.DB.dbCtorHelper.setVfsPostOpenSql(ee.pointer,function(O,P){P.capi.sqlite3_exec(O,["pragma journal_mode=DELETE;","pragma cache_size=-16384;"],0,0,0)})}return A.log("VFS initialized."),C}).catch(async C=>(await A.removeVfs().catch(()=>{}),C))}).catch(A=>i[b]=Promise.reject(A))}}),typeof n<"u"){const e=Object.assign(Object.create(null),{exports:typeof wasmExports>"u"?n.asm:wasmExports,memory:n.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=e;let s;try{s=globalThis.sqlite3ApiBootstrap()}catch(r){throw console.error("sqlite3ApiBootstrap() error:",r),r}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}n.sqlite3=s}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")}),re.ready}})();ct=function(){const L=ct;if(!L)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const K=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:globalThis?.document?.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:globalThis?.location?.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(K.debugModule=K.urlParams.has("sqlite3.debugModule")?(...re)=>console.warn("sqlite3.debugModule:",...re):()=>{},K.urlParams.has("sqlite3.dir"))K.sqlite3Dir=K.urlParams.get("sqlite3.dir")+"/";else if(K.moduleScript){const re=K.moduleScript.src.split("/");re.pop(),K.sqlite3Dir=re.join("/")+"/"}if(globalThis.sqlite3InitModule=function re(...t){return L(...t).then(ce=>{const ge=ce.sqlite3;ge.scriptInfo=K,re.__isUnderTest&&(ge.__isUnderTest=!0);const fe=ge.asyncPostInit;return delete ge.asyncPostInit,fe()}).catch(ce=>{throw console.error("Exception loading sqlite3 module:",ce),ce})},globalThis.sqlite3InitModule.ready=L.ready,globalThis.sqlite3InitModuleState.moduleScript){const re=globalThis.sqlite3InitModuleState;let t=re.moduleScript.src.split("/");t.pop(),re.scriptDir=t.join("/")+"/"}return K.debugModule("sqlite3InitModuleState =",K),globalThis.sqlite3InitModule}();var _n=ct;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fn(L){return L.constructor.name==="MessagePort"}function pn(L){fn(L)&&L.close()}function dn(L){return mn(L,{type:"RELEASE"}).then(()=>{pn(L)})}const St=new WeakMap;"FinalizationRegistry"in globalThis&&new FinalizationRegistry(L=>{const K=(St.get(L)||0)-1;St.set(L,K),K===0&&dn(L)});function mn(L,K,re){return new Promise(t=>{const ce=gn();L.addEventListener("message",function ge(fe){!fe.data||!fe.data.id||fe.data.id!==ce||(L.removeEventListener("message",ge),t(fe.data))}),L.start&&L.start(),L.postMessage(Object.assign({id:ce},K),re)})}function gn(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}const At=(...L)=>console.log(...L),It=(...L)=>console.error(...L);At("Starting worker");class hn{db;rowMode="object";init(K,re){if(re&&re!=="array"&&re!=="object")throw new Error("Invalid rowMode");return this.rowMode=re||this.rowMode,new Promise(t=>{_n({print:At,printErr:It}).then(ce=>{console.log(ce);try{this.db=new ce.oo1.OpfsDb(K)}catch(ge){It(ge.name,ge.message)}return t()})})}executeSql(K,re,t){return t(this.db.exec({sql:K,bind:re,returnValue:"resultRows",rowMode:this.rowMode}))}}lt(hn)})();
